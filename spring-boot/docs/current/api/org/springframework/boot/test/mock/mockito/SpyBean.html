<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>

<title>SpyBean (Spring Boot 2.6.3 API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../../spring-javadoc.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SpyBean (Spring Boot 2.6.3 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>

<div class="topNav"><a name="navbar.top">

</a>
<div class="skipNav"><a href="SpyBean.html#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">

</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SpyBean.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="SpringBootMockResolver.html" title="class in org.springframework.boot.test.mock.mockito"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="SpyBeans.html" title="annotation in org.springframework.boot.test.mock.mockito"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html%3Forg%252Fspringframework%252Fboot%252Ftest%252Fmock%252Fmockito%252FSpyBean.html" target="_top">Frames</a></li>
<li><a href="SpyBean.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="SpyBean.html#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="SpyBean.html#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.top">

</a></div>


<div class="header">
<div class="subTitle">org.springframework.boot.test.mock.mockito</div>
<h2 title="Annotation Type SpyBean" class="title">Annotation Type SpyBean</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true" title="class or interface in java.lang.annotation">@Target</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>={<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/ElementType.html?is-external=true#TYPE" title="class or interface in java.lang.annotation">TYPE</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/ElementType.html?is-external=true#FIELD" title="class or interface in java.lang.annotation">FIELD</a>})
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true" title="class or interface in java.lang.annotation">@Retention</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>=<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/RetentionPolicy.html?is-external=true#RUNTIME" title="class or interface in java.lang.annotation">RUNTIME</a>)
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Documented.html?is-external=true" title="class or interface in java.lang.annotation">@Documented</a>
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Repeatable.html?is-external=true" title="class or interface in java.lang.annotation">@Repeatable</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Repeatable.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>=<a href="SpyBeans.html" title="annotation in org.springframework.boot.test.mock.mockito">SpyBeans.class</a>)
public @interface <span class="memberNameLabel">SpyBean</span></pre>
<div class="block">Annotation that can be used to apply Mockito spies to a Spring
<a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/context/ApplicationContext.html?is-external=true" title="class or interface in org.springframework.context"><code>ApplicationContext</code></a>. Can be used as a class level annotation or on fields in
either <code>@Configuration</code> classes, or test classes that are
<code>@RunWith</code> the <a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/test/context/junit4/SpringRunner.html?is-external=true" title="class or interface in org.springframework.test.context.junit4"><code>SpringRunner</code></a>.
<p>
Spies can be applied by type or by <a href="SpyBean.html#name--"><code>bean name</code></a>. All beans in the context
of the same type will be wrapped with the spy. If no existing bean is defined a new one
will be added. Dependencies that are known to the application context but are not beans
(such as those
<a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/beans/factory/config/ConfigurableListableBeanFactory.html?is-external=true#registerResolvableDependency-java.lang.Class-java.lang.Object-" title="class or interface in org.springframework.beans.factory.config"><code>registered directly</code></a>) will not be found and a spied bean will be added to the context
alongside the existing dependency.
<p>
When <code>@SpyBean</code> is used on a field, as well as being registered in the
application context, the spy will also be injected into the field. Typical usage might
be: <pre class="code"> &#064;RunWith(SpringRunner.class)
 public class ExampleTests {

     &#064;SpyBean
     private ExampleService service;

     &#064;Autowired
     private UserOfService userOfService;

     &#064;Test
     public void testUserOfService() {
         String actual = this.userOfService.makeUse();
         assertEquals("Was: Hello", actual);
         verify(this.service).greet();
     }

     &#064;Configuration
     &#064;Import(UserOfService.class) // A &#064;Component injected with ExampleService
     static class Config {
     }


 }
 </pre> If there is more than one bean of the requested type, qualifier metadata must be
specified at field level: <pre class="code"> &#064;RunWith(SpringRunner.class)
 public class ExampleTests {

     &#064;SpyBean
     &#064;Qualifier("example")
     private ExampleService service;

     ...
 }
 </pre>
<p>
This annotation is <code>@Repeatable</code> and may be specified multiple times when working
with Java 8 or contained within a <a href="SpyBeans.html" title="annotation in org.springframework.boot.test.mock.mockito"><code>@SpyBeans</code></a> annotation.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4.0</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Phillip Webb</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="MockitoPostProcessor.html" title="class in org.springframework.boot.test.mock.mockito"><code>MockitoPostProcessor</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">

<ul class="blockList">
<li class="blockList"><a name="annotation.type.optional.element.summary">

</a>
<h3>Optional Element Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="SpyBean.html#classes--">classes</a></span></code>
<div class="block">The classes to spy.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="SpyBean.html#name--">name</a></span></code>
<div class="block">The name of the bean to spy.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="SpyBean.html#proxyTargetAware--">proxyTargetAware</a></span></code>
<div class="block">Indicates that Mockito methods such as <code>verify(mock)</code>
should use the <code>target</code> of AOP advised beans, rather than the proxy itself.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="MockReset.html" title="enum in org.springframework.boot.test.mock.mockito">MockReset</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="SpyBean.html#reset--">reset</a></span></code>
<div class="block">The reset mode to apply to the spied bean.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="SpyBean.html#value--">value</a></span></code>
<div class="block">The classes to spy.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">

<ul class="blockList">
<li class="blockList"><a name="annotation.type.element.detail">

</a>
<h3>Element Detail</h3>
<a name="name--">

</a>
<ul class="blockList">
<li class="blockList">
<h4>name</h4>
<pre>public abstract&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name</pre>
<div class="block">The name of the bean to spy. If not specified the name will either be generated or,
if the spy is for an existing bean, the existing name will be used.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the name of the bean</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>""</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="value--">

</a>
<ul class="blockList">
<li class="blockList">
<h4>value</h4>
<pre><a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/core/annotation/AliasFor.html?is-external=true" title="class or interface in org.springframework.core.annotation">@AliasFor</a>(<a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/core/annotation/AliasFor.html?is-external=true#value--" title="class or interface in org.springframework.core.annotation">value</a>="classes")
public abstract&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;[]&nbsp;value</pre>
<div class="block">The classes to spy. This is an alias of <a href="SpyBean.html#classes--"><code>classes()</code></a> which can be used for
brevity if no other attributes are defined. See <a href="SpyBean.html#classes--"><code>classes()</code></a> for details.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the classes to spy</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="classes--">

</a>
<ul class="blockList">
<li class="blockList">
<h4>classes</h4>
<pre><a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/core/annotation/AliasFor.html?is-external=true" title="class or interface in org.springframework.core.annotation">@AliasFor</a>(<a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/core/annotation/AliasFor.html?is-external=true#value--" title="class or interface in org.springframework.core.annotation">value</a>="value")
public abstract&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;[]&nbsp;classes</pre>
<div class="block">The classes to spy. Each class specified here will result in a spy being applied.
Classes can be omitted when the annotation is used on a field.
<p>
When <code>@SpyBean</code> also defines a <code>name</code> this attribute can only contain a
single value.
<p>
If this is the only specified attribute consider using the <code>value</code> alias
instead.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the classes to spy</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="reset--">

</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public abstract&nbsp;<a href="MockReset.html" title="enum in org.springframework.boot.test.mock.mockito">MockReset</a>&nbsp;reset</pre>
<div class="block">The reset mode to apply to the spied bean. The default is <a href="MockReset.html#AFTER"><code>MockReset.AFTER</code></a>
meaning that spies are automatically reset after each test method is invoked.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the reset mode</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>org.springframework.boot.test.mock.mockito.MockReset.AFTER</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="proxyTargetAware--">

</a>
<ul class="blockListLast">
<li class="blockList">
<h4>proxyTargetAware</h4>
<pre>public abstract&nbsp;boolean&nbsp;proxyTargetAware</pre>
<div class="block">Indicates that Mockito methods such as <code>verify(mock)</code>
should use the <code>target</code> of AOP advised beans, rather than the proxy itself.
If set to <code>false</code> you may need to use the result of
<a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/test/util/AopTestUtils.html?is-external=true#getUltimateTargetObject-java.lang.Object-" title="class or interface in org.springframework.test.util"><code>AopTestUtils.getUltimateTargetObject(...)</code></a> when calling Mockito methods.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the target of AOP advised beans is used or <code>false</code> if
the proxy is used directly</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>true</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>


<div class="bottomNav"><a name="navbar.bottom">

</a>
<div class="skipNav"><a href="SpyBean.html#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">

</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SpyBean.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="SpringBootMockResolver.html" title="class in org.springframework.boot.test.mock.mockito"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="SpyBeans.html" title="annotation in org.springframework.boot.test.mock.mockito"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html%3Forg%252Fspringframework%252Fboot%252Ftest%252Fmock%252Fmockito%252FSpyBean.html" target="_top">Frames</a></li>
<li><a href="SpyBean.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="SpyBean.html#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="SpyBean.html#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">

</a></div>

<script>if (window.parent == window) {(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-2728886-23', 'auto', {'siteSpeedSampleRate': 100});ga('send', 'pageview');}</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js/v652eace1692a40cfa3763df669d7439c1639079717194" integrity="sha512-Gi7xpJR8tSkrpF7aordPZQlW2DLtzUlZcumS8dMQjwDHEnw9I7ZLyiOj/6tZStRBGtGgN6ceN6cMH8z7etPGlw==" data-cf-beacon='{"rayId":"6d1fcdbf1ffe7c27","token":"bffcb8a918ae4755926f76178bfbd26b","version":"2021.12.0","si":100}' crossorigin="anonymous"></script>
</body>
</html>
