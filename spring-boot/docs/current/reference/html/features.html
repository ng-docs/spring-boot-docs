<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>核心功能</title>
<link rel="stylesheet" href="css/site.css">
<script src="js/setup.js"></script><script defer="" src="js/site.js"></script>
<script type="application/json" id="anchor-rewrite">
{
"actuator-properties":"application-properties.actuator",
"auto-configuration-classes-from-actuator":"auto-configuration-classes.actuator",
"auto-configuration-classes-from-autoconfigure-module":"auto-configuration-classes.core",
"boot-documentation":"documentation",
"boot-documentation-about":"documentation.about",
"boot-documentation-advanced":"documentation.advanced",
"boot-documentation-first-steps":"documentation.first-steps",
"boot-documentation-getting-help":"documentation.getting-help",
"boot-documentation-learning":"documentation.features",
"boot-documentation-production":"documentation.actuator",
"boot-documentation-upgrading":"documentation.upgrading",
"boot-documentation-workingwith":"documentation.using",
"boot-features":"features",
"boot-features-activemq":"features.messaging.jms.activemq",
"boot-features-adding-active-profiles":"features.profiles.adding-active-profiles",
"boot-features-amqp":"features.messaging.amqp",
"boot-features-application-admin":"features.spring-application.admin",
"boot-features-application-arguments":"features.spring-application.application-arguments",
"boot-features-application-availability":"features.spring-application.application-availability",
"boot-features-application-availability-liveness-state":"features.spring-application.application-availability.liveness",
"boot-features-application-availability-managing":"features.spring-application.application-availability.managing",
"boot-features-application-availability-readiness-state":"features.spring-application.application-availability.readiness",
"boot-features-application-events-and-listeners":"features.spring-application.application-events-and-listeners",
"boot-features-application-exit":"features.spring-application.application-exit",
"boot-features-application-startup-tracking":"features.spring-application.startup-tracking",
"boot-features-artemis":"features.messaging.jms.artemis",
"boot-features-banner":"features.spring-application.banner",
"boot-features-bean-conditions":"features.developing-auto-configuration.condition-annotations.bean-conditions",
"boot-features-caching":"features.caching",
"boot-features-caching-provider":"features.caching.provider",
"boot-features-caching-provider-caffeine":"features.caching.provider.caffeine",
"boot-features-caching-provider-couchbase":"features.caching.provider.couchbase",
"boot-features-caching-provider-ehcache2":"features.caching.provider.ehcache2",
"boot-features-caching-provider-generic":"features.caching.provider.generic",
"boot-features-caching-provider-hazelcast":"features.caching.provider.hazelcast",
"boot-features-caching-provider-infinispan":"features.caching.provider.infinispan",
"boot-features-caching-provider-jcache":"features.caching.provider.jcache",
"boot-features-caching-provider-none":"features.caching.provider.none",
"boot-features-caching-provider-redis":"features.caching.provider.redis",
"boot-features-caching-provider-simple":"features.caching.provider.simple",
"boot-features-cassandra":"features.nosql.cassandra",
"boot-features-class-conditions":"features.developing-auto-configuration.condition-annotations.class-conditions",
"boot-features-command-line-runner":"features.spring-application.command-line-runner",
"boot-features-condition-annotations":"features.developing-auto-configuration.condition-annotations",
"boot-features-configfileapplicationcontextinitializer-test-utility":"features.testing.utilities.config-data-application-context-initializer",
"boot-features-configure-datasource":"features.sql.datasource",
"boot-features-connect-to-production-database":"features.sql.datasource.production",
"boot-features-connect-to-production-database-configuration":"features.sql.datasource.configuration",
"boot-features-connect-to-production-database-connection-pool":"features.sql.datasource.connection-pool",
"boot-features-connecting-to-a-jndi-datasource":"features.sql.datasource.jndi",
"boot-features-connecting-to-cassandra":"features.nosql.cassandra.connecting",
"boot-features-connecting-to-couchbase":"features.nosql.couchbase.connecting",
"boot-features-connecting-to-elasticsearch-reactive-rest":"features.nosql.elasticsearch.connecting-using-reactive-rest",
"boot-features-connecting-to-elasticsearch-rest":"features.nosql.elasticsearch.connecting-using-rest",
"boot-features-connecting-to-elasticsearch-spring-data":"features.nosql.elasticsearch.connecting-using-spring-data",
"boot-features-connecting-to-influxdb":"features.nosql.influxdb.connecting",
"boot-features-connecting-to-mongodb":"features.nosql.mongodb.connecting",
"boot-features-connecting-to-neo4j":"features.nosql.neo4j.connecting",
"boot-features-connecting-to-redis":"features.nosql.redis.connecting",
"boot-features-connecting-to-solr":"features.nosql.solr.connecting",
"boot-features-container-images":"features.container-images",
"boot-features-container-images-building":"features.container-images.building",
"boot-features-container-images-buildpacks":"features.container-images.building.buildpacks",
"boot-features-container-images-docker":"features.container-images.building.dockerfiles",
"boot-features-cors":"features.developing-web-applications.spring-mvc.cors",
"boot-features-couchbase":"features.nosql.couchbase",
"boot-features-creating-and-dropping-jpa-databases":"features.sql.jpa-and-spring-data.creating-and-dropping",
"boot-features-custom-log-configuration":"features.logging.custom-log-configuration",
"boot-features-custom-log-groups":"features.logging.log-groups",
"boot-features-custom-log-levels":"features.logging.log-levels",
"boot-features-custom-starter":"features.developing-auto-configuration.custom-starter",
"boot-features-custom-starter-configuration-keys":"features.developing-auto-configuration.custom-starter.configuration-keys",
"boot-features-custom-starter-module-autoconfigure":"features.developing-auto-configuration.custom-starter.autoconfigure-module",
"boot-features-custom-starter-module-starter":"features.developing-auto-configuration.custom-starter.starter-module",
"boot-features-custom-starter-naming":"features.developing-auto-configuration.custom-starter.naming",
"boot-features-customizing-configurableservletwebserverfactory-directly":"features.developing-web-applications.embedded-container.customizing.direct",
"boot-features-customizing-embedded-containers":"features.developing-web-applications.embedded-container.customizing",
"boot-features-customizing-spring-application":"features.spring-application.customizing-spring-application",
"boot-features-data-jdbc":"features.sql.jdbc",
"boot-features-developing-auto-configuration":"features.developing-auto-configuration",
"boot-features-developing-web-applications":"features.developing-web-applications",
"boot-features-elasticsearch":"features.nosql.elasticsearch",
"boot-features-email":"features.email",
"boot-features-embedded-container":"features.developing-web-applications.embedded-container",
"boot-features-embedded-container-application-context":"features.developing-web-applications.embedded-container.application-context",
"boot-features-embedded-container-context-initializer":"features.developing-web-applications.embedded-container.context-initializer",
"boot-features-embedded-container-servlets-filters-listeners":"features.developing-web-applications.embedded-container.servlets-filters-listeners",
"boot-features-embedded-container-servlets-filters-listeners-beans":"features.developing-web-applications.embedded-container.servlets-filters-listeners.beans",
"boot-features-embedded-container-servlets-filters-listeners-scanning":"features.developing-web-applications.embedded-container.context-initializer.scanning",
"boot-features-embedded-database-support":"features.sql.datasource.embedded",
"boot-features-embedded-kafka":"features.messaging.kafka.embedded",
"boot-features-encrypting-properties":"features.external-config.encrypting",
"boot-features-entity-classes":"features.sql.jpa-and-spring-data.entity-classes",
"boot-features-error-handling":"features.developing-web-applications.spring-mvc.error-handling",
"boot-features-error-handling-custom-error-pages":"features.developing-web-applications.spring-mvc.error-handling.error-pages",
"boot-features-error-handling-mapping-error-pages-without-mvc":"features.developing-web-applications.spring-mvc.error-handling.error-pages-without-spring-mvc",
"boot-features-error-handling-war-deployment":"features.developing-web-applications.spring-mvc.error-handling.in-a-war-deployment",
"boot-features-external-config":"features.external-config",
"boot-features-external-config-3rd-party-configuration":"features.external-config.typesafe-configuration-properties.third-party-configuration",
"boot-features-external-config-application-json":"features.external-config.application-json",
"boot-features-external-config-application-property-files":"features.external-config.files",
"boot-features-external-config-command-line-args":"features.external-config.command-line-args",
"boot-features-external-config-complex-type-merge":"features.external-config.typesafe-configuration-properties.merging-complex-types",
"boot-features-external-config-constructor-binding":"features.external-config.typesafe-configuration-properties.constructor-binding",
"boot-features-external-config-conversion":"features.external-config.typesafe-configuration-properties.conversion",
"boot-features-external-config-conversion-datasize":"features.external-config.typesafe-configuration-properties.conversion.data-sizes",
"boot-features-external-config-conversion-duration":"features.external-config.typesafe-configuration-properties.conversion.durations",
"boot-features-external-config-conversion-period":"features.external-config.typesafe-configuration-properties.conversion.periods",
"boot-features-external-config-enabling":"features.external-config.typesafe-configuration-properties.enabling-annotated-types",
"boot-features-external-config-exposing-yaml-to-spring":"features.external-config.yaml.directly-loading",
"boot-features-external-config-file-activation-properties":"features.external-config.files.activation-properties",
"boot-features-external-config-files":"features.external-config.files",
"boot-features-external-config-files-configtree":"features.external-config.files.configtree",
"boot-features-external-config-files-importing":"features.external-config.files.importing",
"boot-features-external-config-files-importing-extensionless":"features.external-config.file.importing-extensionless",
"boot-features-external-config-files-multi-document":"features.external-config.files.multi-document",
"boot-features-external-config-files-profile-specific":"features.external-config.files.profile-specific",
"boot-features-external-config-files-wildcards":"features.external-config.files.wildcard-locations",
"boot-features-external-config-java-bean-binding":"features.external-config.typesafe-configuration-properties.java-bean-binding",
"boot-features-external-config-loading-yaml":"features.external-config.yaml.directly-loading",
"boot-features-external-config-optional-prefix":"features.external-config.files.optional-prefix",
"boot-features-external-config-placeholders-in-properties":"features.external-config.files.property-placeholders",
"boot-features-external-config-random-values":"features.external-config.random-values",
"boot-features-external-config-relaxed-binding":"features.external-config.typesafe-configuration-properties.relaxed-binding",
"boot-features-external-config-relaxed-binding-from-environment-variables":"features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables",
"boot-features-external-config-relaxed-binding-maps":"features.external-config.typesafe-configuration-properties.relaxed-binding.maps",
"boot-features-external-config-system-environment":"features.external-config.system-environment",
"boot-features-external-config-typesafe-configuration-properties":"features.external-config.typesafe-configuration-properties",
"boot-features-external-config-using":"features.external-config.typesafe-configuration-properties.using-annotated-types",
"boot-features-external-config-validation":"features.external-config.typesafe-configuration-properties.validation",
"boot-features-external-config-vs-value":"features.external-config.typesafe-configuration-properties.vs-value-annotation",
"boot-features-external-config-yaml":"features.external-config.yaml",
"boot-features-external-config-yaml-to-properties":"features.external-config.yaml.mapping-to-properties",
"boot-features-fluent-builder-api":"features.spring-application.fluent-builder-api",
"boot-features-graceful-shutdown":"features.graceful-shutdown",
"boot-features-hazelcast":"features.hazelcast",
"boot-features-influxdb":"features.nosql.influxdb",
"boot-features-integration":"features.spring-integration",
"boot-features-internationalization":"features.internationalization",
"boot-features-jersey":"features.developing-web-applications.jersey",
"boot-features-jms":"features.messaging.jms",
"boot-features-jms-jndi":"features.messaging.jms.jndi",
"boot-features-jmx":"features.jmx",
"boot-features-jooq":"features.sql.jooq",
"boot-features-jooq-codegen":"features.sql.jooq.codegen",
"boot-features-jooq-customizing":"features.sql.jooq.customizing",
"boot-features-jooq-dslcontext":"features.sql.jooq.dslcontext",
"boot-features-jooq-sqldialect":"features.sql.jooq.sqldialect",
"boot-features-jpa-and-spring-data":"features.sql.jpa-and-spring-data",
"boot-features-jpa-in-web-environment":"features.sql.jpa-and-spring-data.open-entity-manager-in-view",
"boot-features-json":"features.json",
"boot-features-json-components":"features.developing-web-applications.spring-mvc.json",
"boot-features-json-gson":"features.json.gson",
"boot-features-json-jackson":"features.json.jackson",
"boot-features-json-json-b":"features.json.json-b",
"boot-features-jsp-limitations":"features.developing-web-applications.embedded-container.jsp-limitations",
"boot-features-jta":"features.jta",
"boot-features-jta-atomikos":"features.jta.atomikos",
"boot-features-jta-javaee":"features.jta.javaee",
"boot-features-jta-mixed-jms":"features.jta.mixing-xa-and-non-xa-connections",
"boot-features-jta-supporting-alternative-embedded":"features.jta.supporting-alternative-embedded-transaction-manager",
"boot-features-kafka":"features.messaging.kafka",
"boot-features-kafka-extra-props":"features.messaging.kafka.additional-properties",
"boot-features-kafka-receiving-a-message":"features.messaging.kafka.receiving",
"boot-features-kafka-sending-a-message":"features.messaging.kafka.sending",
"boot-features-kafka-streams":"features.messaging.kafka.streams",
"boot-features-kotlin":"features.kotlin",
"boot-features-kotlin-api":"features.kotlin.api",
"boot-features-kotlin-api-extensions":"features.kotlin.api.extensions",
"boot-features-kotlin-api-runapplication":"features.kotlin.api.run-application",
"boot-features-kotlin-configuration-properties":"features.kotlin.configuration-properties",
"boot-features-kotlin-dependency-management":"features.kotlin.dependency-management",
"boot-features-kotlin-null-safety":"features.kotlin.null-safety",
"boot-features-kotlin-requirements":"features.kotlin.requirements",
"boot-features-kotlin-resources":"features.kotlin.resources",
"boot-features-kotlin-resources-examples":"features.kotlin.resources.examples",
"boot-features-kotlin-resources-further-reading":"features.kotlin.resources.further-reading",
"boot-features-kotlin-testing":"features.kotlin.testing",
"boot-features-lazy-initialization":"features.spring-application.lazy-initialization",
"boot-features-ldap":"features.nosql.ldap",
"boot-features-ldap-connecting":"features.nosql.ldap.connecting",
"boot-features-ldap-embedded":"features.nosql.ldap.embedded",
"boot-features-ldap-spring-data-repositories":"features.nosql.ldap.repositories",
"boot-features-locating-auto-configuration-candidates":"features.developing-auto-configuration.locating-auto-configuration-candidates",
"boot-features-log-shutdown-hook":"features.logging.shutdown-hook",
"boot-features-logback-environment-properties":"features.logging.logback-extensions.environment-properties",
"boot-features-logback-extensions":"features.logging.logback-extensions",
"boot-features-logback-extensions-profile-specific":"features.logging.logback-extensions.profile-specific",
"boot-features-logging":"features.logging",
"boot-features-logging-color-coded-output":"features.logging.console-output.color-coded",
"boot-features-logging-console-output":"features.logging.console-output",
"boot-features-logging-file-output":"features.logging.file-output",
"boot-features-logging-file-rotation":"features.logging.file-rotation",
"boot-features-logging-format":"features.logging.log-format",
"boot-features-messaging":"features.messaging",
"boot-features-mongo-embedded":"features.nosql.mongodb.embedded",
"boot-features-mongo-template":"features.nosql.mongodb.template",
"boot-features-mongodb":"features.nosql.mongodb",
"boot-features-neo4j":"features.nosql.neo4j",
"boot-features-nosql":"features.nosql",
"boot-features-output-capture-test-utility":"features.testing.utilities.output-capture",
"boot-features-profile-specific-configuration":"features.profiles.profile-specific-configuration-files",
"boot-features-profiles":"features.profiles",
"boot-features-profiles-groups":"features.profiles.groups",
"boot-features-programmatic-embedded-container-customization":"features.developing-web-applications.embedded-container.customizing.programmatic",
"boot-features-programmatically-setting-profiles":"features.profiles.programmatically-setting-profiles",
"boot-features-property-conditions":"features.developing-auto-configuration.condition-annotations.property-conditions",
"boot-features-quartz":"features.quartz",
"boot-features-r2dbc":"features.sql.r2dbc",
"boot-features-r2dbc-embedded-database":"features.sql.r2dbc.embedded",
"boot-features-r2dbc-using-database-client":"features.sql.r2dbc.using-database-client",
"boot-features-rabbitmq":"features.messaging.amqp.rabbitmq",
"boot-features-reactive-server":"features.developing-web-applications.reactive-server",
"boot-features-reactive-server-resources":"features.developing-web-applications.reactive-server-resources-configuration",
"boot-features-redis":"features.nosql.redis",
"boot-features-resource-conditions":"features.developing-auto-configuration.condition-annotations.resource-conditions",
"boot-features-rest-templates-test-utility":"features.testing.utilities.test-rest-template",
"boot-features-resttemplate":"features.resttemplate",
"boot-features-resttemplate-customization":"features.resttemplate.customization",
"boot-features-rsocket":"features.rsocket",
"boot-features-rsocket-messaging":"features.rsocket.messaging",
"boot-features-rsocket-requester":"features.rsocket.requester",
"boot-features-rsocket-server-auto-configuration":"features.rsocket.server-auto-configuration",
"boot-features-rsocket-strategies-auto-configuration":"features.rsocket.strategies-auto-configuration",
"boot-features-security":"features.security",
"boot-features-security-actuator":"features.security.actuator",
"boot-features-security-authorization-server":"features.security.oauth2.authorization-server",
"boot-features-security-csrf":"features.security.actuator.csrf",
"boot-features-security-mvc":"features.security.spring-mvc",
"boot-features-security-oauth2":"features.security.oauth2",
"boot-features-security-oauth2-client":"features.security.oauth2.client",
"boot-features-security-oauth2-common-providers":"features.security.oauth2.client.common-providers",
"boot-features-security-oauth2-server":"features.security.oauth2.server",
"boot-features-security-saml":"features.security.saml2",
"boot-features-security-saml2-relying-party":"features.security.saml2.relying-party",
"boot-features-security-webflux":"features.security.spring-webflux",
"boot-features-session":"features.spring-session",
"boot-features-solr":"features.nosql.solr",
"boot-features-spel-conditions":"features.developing-auto-configuration.condition-annotations.spel-conditions",
"boot-features-spring-application":"features.spring-application",
"boot-features-spring-data-cassandra-repositories":"features.nosql.cassandra.repositories",
"boot-features-spring-data-couchbase-repositories":"features.nosql.couchbase.repositories",
"boot-features-spring-data-elasticsearch-repositories":"features.nosql.elasticsearch.repositories",
"boot-features-spring-data-jpa-repositories":"features.sql.jpa-and-spring-data.repositories",
"boot-features-spring-data-mongo-repositories":"features.nosql.mongodb.repositories",
"boot-features-spring-data-mongodb-repositories":"features.nosql.mongodb.repositories",
"boot-features-spring-data-neo4j-repositories":"features.nosql.neo4j.repositories",
"boot-features-spring-data-r2dbc-repositories":"features.sql.r2dbc.repositories",
"boot-features-spring-hateoas":"features.developing-web-applications.spring-mvc.spring-hateoas",
"boot-features-spring-message-codes":"features.developing-web-applications.spring-mvc.message-codes",
"boot-features-spring-mvc":"features.developing-web-applications.spring-mvc",
"boot-features-spring-mvc-auto-configuration":"features.developing-web-applications.spring-mvc.auto-configuration",
"boot-features-spring-mvc-message-converters":"features.developing-web-applications.spring-mvc.message-converters",
"boot-features-spring-mvc-pathmatch":"features.developing-web-applications.spring-mvc.content-negotiation",
"boot-features-spring-mvc-static-content":"features.developing-web-applications.spring-mvc.static-content",
"boot-features-spring-mvc-template-engines":"features.developing-web-applications.spring-mvc.template-engines",
"boot-features-spring-mvc-web-binding-initializer":"features.developing-web-applications.spring-mvc.binding-initializer",
"boot-features-spring-mvc-welcome-page":"features.developing-web-applications.spring-mvc.welcome-page",
"boot-features-sql":"features.sql",
"boot-features-sql-h2-console":"features.sql.h2-web-console",
"boot-features-sql-h2-console-custom-path":"features.sql.h2-web-console.custom-path",
"boot-features-startup-failure":"features.spring-application.startup-failure",
"boot-features-task-execution-scheduling":"features.task-execution-and-scheduling",
"boot-features-test-autoconfig":"features.developing-auto-configuration.testing",
"boot-features-test-autoconfig-overriding-classpath":"features.developing-auto-configuration.testing.overriding-classpath",
"boot-features-test-autoconfig-simulating-web-context":"features.developing-auto-configuration.testing.simulating-a-web-context",
"boot-features-test-property-values":"features.testing.utilities.test-property-values",
"boot-features-test-scope-dependencies":"features.testing.test-scope-dependencies",
"boot-features-test-utilities":"features.testing.utilities",
"boot-features-testing":"features.testing",
"boot-features-testing-spring-applications":"features.testing.spring-applications",
"boot-features-testing-spring-boot-application-arguments":"features.testing.spring-boot-applications.using-application-arguments",
"boot-features-testing-spring-boot-applications":"features.testing.spring-boot-applications",
"boot-features-testing-spring-boot-applications-customizing-web-test-client":"features.testing.spring-boot-applications.customizing-web-test-client",
"boot-features-testing-spring-boot-applications-detecting-config":"features.testing.spring-boot-applications.detecting-configuration",
"boot-features-testing-spring-boot-applications-detecting-web-app-type":"features.testing.spring-boot-applications.detecting-web-app-type",
"boot-features-testing-spring-boot-applications-excluding-config":"features.testing.spring-boot-applications.excluding-configuration",
"boot-features-testing-spring-boot-applications-jmx":"features.testing.spring-boot-applications.jmx",
"boot-features-testing-spring-boot-applications-metrics":"features.testing.spring-boot-applications.metrics",
"boot-features-testing-spring-boot-applications-mocking-beans":"features.testing.spring-boot-applications.mocking-beans",
"boot-features-testing-spring-boot-applications-testing-auto-configured-additional-auto-config":"features.testing.spring-boot-applications.additional-autoconfiguration-and-slicing",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-cassandra-test":"features.testing.spring-boot-applications.autoconfigured-spring-data-cassandra",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-data-jdbc-test":"features.testing.spring-boot-applications.autoconfigured-spring-data-jdbc",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-jdbc-test":"features.testing.spring-boot-applications.autoconfigured-jdbc",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-jooq-test":"features.testing.spring-boot-applications.autoconfigured-jooq",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-jpa-test":"features.testing.spring-boot-applications.autoconfigured-spring-data-jpa",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-json-tests":"features.testing.spring-boot-applications.json-tests",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-ldap-test":"features.testing.spring-boot-applications.autoconfigured-spring-data-ldap",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-mongo-test":"features.testing.spring-boot-applications.autoconfigured-spring-data-mongodb",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-mvc-tests":"features.testing.spring-boot-applications.spring-mvc-tests",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-neo4j-test":"features.testing.spring-boot-applications.autoconfigured-spring-data-neo4j",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-redis-test":"features.testing.spring-boot-applications.autoconfigured-spring-data-redis",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-rest-client":"features.testing.spring-boot-applications.autoconfigured-rest-client",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-rest-docs":"features.testing.spring-boot-applications.autoconfigured-spring-restdocs",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-rest-docs-mock-mvc":"features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-mock-mvc",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-rest-docs-rest-assured":"features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-rest-assured",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-rest-docs-web-test-client":"features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-web-test-client",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-tests":"features.testing.spring-boot-applications.autoconfigured-tests",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-webflux-tests":"features.testing.spring-boot-applications.spring-webflux-tests",
"boot-features-testing-spring-boot-applications-testing-autoconfigured-webservices":"features.testing.spring-boot-applications.autoconfigured-webservices",
"boot-features-testing-spring-boot-applications-testing-user-configuration":"features.testing.spring-boot-applications.user-configuration-and-slicing",
"boot-features-testing-spring-boot-applications-testing-with-mock-environment":"features.testing.spring-boot-applications.with-mock-environment",
"boot-features-testing-spring-boot-applications-testing-with-running-server":"features.testing.spring-boot-applications.with-running-server",
"boot-features-testing-spring-boot-applications-with-spock":"features.testing.spring-boot-applications.spock",
"boot-features-understanding-auto-configured-beans":"features.developing-auto-configuration.understanding-auto-configured-beans",
"boot-features-using-amqp-receiving":"features.messaging.amqp.receiving",
"boot-features-using-amqp-sending":"features.messaging.amqp.sending",
"boot-features-using-jdbc-template":"features.sql.jdbc-template",
"boot-features-using-jms-receiving":"features.messaging.jms.receiving",
"boot-features-using-jms-sending":"features.messaging.jms.sending",
"boot-features-validation":"features.validation",
"boot-features-web-application-conditions":"features.developing-auto-configuration.condition-annotations.web-application-conditions",
"boot-features-web-environment":"features.spring-application.web-environment",
"boot-features-webclient":"features.webclient",
"boot-features-webclient-customization":"features.webclient.customization",
"boot-features-webclient-runtime":"features.webclient.runtime",
"boot-features-webflux":"features.developing-web-applications.spring-webflux",
"boot-features-webflux-auto-configuration":"features.developing-web-applications.spring-webflux.auto-configuration",
"boot-features-webflux-error-handling":"features.developing-web-applications.spring-webflux.error-handling",
"boot-features-webflux-error-handling-custom-error-pages":"features.developing-web-applications.spring-webflux.error-handling.error-pages",
"boot-features-webflux-httpcodecs":"features.developing-web-applications.spring-webflux.httpcodecs",
"boot-features-webflux-static-content":"features.developing-web-applications.spring-webflux.static-content",
"boot-features-webflux-template-engines":"features.developing-web-applications.spring-webflux.template-engines",
"boot-features-webflux-web-filters":"features.developing-web-applications.spring-webflux.web-filters",
"boot-features-webflux-welcome-page":"features.developing-web-applications.spring-webflux.welcome-page",
"boot-features-webservices":"features.webservices",
"boot-features-webservices-template":"features.webservices.template",
"boot-features-websockets":"features.websockets",
"boot-features-whats-next":"features.whats-next",
"boot-layering-docker-images":"features.container-images.layering",
"build-tool-plugins-antlib":"build-tool-plugins.antlib",
"build-tool-plugins-find-a-main-class":"build-tool-plugins.other-build-systems.finding-main-class",
"build-tool-plugins-gradle-plugin":"build-tool-plugins.gradle",
"build-tool-plugins-maven-plugin":"build-tool-plugins.maven",
"build-tool-plugins-nested-libraries":"build-tool-plugins.other-build-systems.nested-libraries",
"build-tool-plugins-other-build-systems":"build-tool-plugins.other-build-systems",
"build-tool-plugins-repackage-implementation":"build-tool-plugins.other-build-systems.example-repackage-implementation",
"build-tool-plugins-repackaging-archives":"build-tool-plugins.other-build-systems.repackaging-archives",
"build-tool-plugins-whats-next":"build-tool-plugins.whats-next",
"cache-properties":"application-properties.cache",
"cli-automatic-main-method":"cli.using-the-cli.run.automatic-main-method",
"cli-deduced-grab-annotations":"cli.using-the-cli.run.deduced-grab-annotations",
"cli-default-grab-deduced-coordinates":"cli.using-the-cli.run.deduced-grab-coordinates",
"cli-default-grab-deduced-coordinates-custom-dependency-management":"cli.using-the-cli.run.custom-dependency-management",
"cli-default-import-statements":"cli.using-the-cli.run.default-import-statements",
"cli-groovy-beans-dsl":"cli.groovy-beans-dsl",
"cli-init":"cli.using-the-cli.initialize-new-project",
"cli-install-uninstall":"cli.using-the-cli.extensions",
"cli-installation":"cli.installation",
"cli-jar":"cli.using-the-cli.packaging",
"cli-maven-settings":"cli.maven-setting",
"cli-multiple-source-files":"cli.using-the-cli.multiple-source-files",
"cli-run":"cli.using-the-cli.run",
"cli-shell":"cli.using-the-cli.embedded-shell",
"cli-using-the-cli":"cli.using-the-cli",
"cli-whats-next":"cli.whats-next",
"cloud-deployment":"deployment.cloud",
"cloud-deployment-aws":"deployment.cloud.aws",
"cloud-deployment-aws-beanstalk":"deployment.cloud.aws.beanstalk",
"cloud-deployment-aws-java-se-platform":"deployment.cloud.aws.beanstalk.java-se-platform",
"cloud-deployment-aws-summary":"deployment.cloud.aws.summary",
"cloud-deployment-aws-tomcat-platform":"deployment.cloud.aws.beanstalk.tomcat-platform",
"cloud-deployment-boxfuse":"deployment.cloud.boxfuse",
"cloud-deployment-cloud-foundry":"deployment.cloud.cloud-foundry",
"cloud-deployment-cloud-foundry-services":"deployment.cloud.cloud-foundry.binding-to-services",
"cloud-deployment-gae":"deployment.cloud.google",
"cloud-deployment-heroku":"deployment.cloud.heroku",
"cloud-deployment-kubernetes":"deployment.cloud.kubernetes",
"cloud-deployment-kubernetes-container-lifecycle":"deployment.cloud.kubernetes.container-lifecycle",
"cloud-deployment-openshift":"deployment.cloud.openshift",
"common-application-properties":"application-properties",
"common-application-properties-actuator":"application-properties.actuator",
"common-application-properties-cache":"application-properties.cache",
"common-application-properties-core":"application-properties.core",
"common-application-properties-data":"application-properties.data",
"common-application-properties-data-migration":"application-properties.data-migration",
"common-application-properties-devtools":"application-properties.devtools",
"common-application-properties-integration":"application-properties.integration",
"common-application-properties-json":"application-properties.json",
"common-application-properties-mail":"application-properties.mail",
"common-application-properties-rsocket":"application-properties.rsocket",
"common-application-properties-security":"application-properties.security",
"common-application-properties-server":"application-properties.server",
"common-application-properties-templating":"application-properties.templating",
"common-application-properties-testing":"application-properties.testing",
"common-application-properties-transaction":"application-properties.transaction",
"common-application-properties-web":"application-properties.web",
"configuration-metadata-additional-metadata":"configuration-metadata.annotation-processor.adding-additional-metadata",
"configuration-metadata-annotation-processor":"configuration-metadata.annotation-processor",
"configuration-metadata-annotation-processor-metadata-generation":"configuration-metadata.annotation-processor.automatic-metadata-generation",
"configuration-metadata-annotation-processor-metadata-generation-nested":"configuration-metadata.annotation-processor.automatic-metadata-generation.nested-properties",
"configuration-metadata-annotation-processor-setup":"configuration-metadata.annotation-processor.configuring",
"configuration-metadata-format":"configuration-metadata.format",
"configuration-metadata-group-attributes":"configuration-metadata.format.group",
"configuration-metadata-hints-attributes":"configuration-metadata.format.hints",
"configuration-metadata-property-attributes":"configuration-metadata.format.property",
"configuration-metadata-providing-manual-hints":"configuration-metadata.manual-hints",
"configuration-metadata-providing-manual-hints-any":"configuration-metadata.manual-hints.value-providers.any",
"configuration-metadata-providing-manual-hints-class-reference":"configuration-metadata.manual-hints.value-providers.class-reference",
"configuration-metadata-providing-manual-hints-handle-as":"configuration-metadata.manual-hints.value-providers.handle-as",
"configuration-metadata-providing-manual-hints-logger-name":"configuration-metadata.manual-hints.value-providers.logger-name",
"configuration-metadata-providing-manual-hints-spring-bean-reference":"configuration-metadata.manual-hints.value-providers.spring-bean-reference",
"configuration-metadata-providing-manual-hints-spring-profile-name":"configuration-metadata.manual-hints.value-providers.spring-profile-name",
"configuration-metadata-providing-manual-hints-value-hint":"configuration-metadata.manual-hints.value-hint",
"configuration-metadata-providing-manual-hints-value-providers":"configuration-metadata.manual-hints.value-providers",
"configuration-metadata-repeated-items":"configuration-metadata.format.repeated-items",
"configuring-file-system-watcher":"using.devtools.globalsettings.configuring-file-system-watcher",
"containers-deployment":"deployment.containers",
"core-properties":"application-properties.core",
"data-migration-properties":"application-properties.data-migration",
"data-properties":"application-properties.data",
"dependency-versions-coordinates":"dependency-versions.coordinates",
"dependency-versions-properties":"dependency-versions.properties",
"deployment-initd-service":"deployment.installing.nix-services.init-d",
"deployment-initd-service-securing":"deployment.installing.nix-services.init-d.securing",
"deployment-install":"deployment.installing",
"deployment-install-supported-operating-systems":"deployment.installing.supported-operating-systems",
"deployment-script-customization":"deployment.installing.nix-services.script-customization",
"deployment-script-customization-when-it-runs":"deployment.installing.nix-services.script-customization.when-running",
"deployment-script-customization-when-it-written":"deployment.installing.nix-services.script-customization.when-written",
"deployment-service":"deployment.installing.nix-services",
"deployment-systemd-service":"deployment.installing.nix-services.system-d",
"deployment-whats-next":"deployment.whats-next",
"deployment-windows":"deployment.installing.windows-services",
"deployment.containers":"container-images.efficient-images.unpacking",
"devtools-properties":"application-properties.devtools",
"executable-jar-alternatives":"executable-jar.alternatives",
"executable-jar-jar-file-structure":"executable-jar.nested-jars.jar-structure",
"executable-jar-jarfile":"executable-jar.jarfile-class",
"executable-jar-jarfile-compatibility":"executable-jar.jarfile-class.compatibility",
"executable-jar-launcher-manifest":"executable-jar.launching.manifest",
"executable-jar-launching":"executable-jar.launching",
"executable-jar-nested-jars":"executable-jar.nested-jars",
"executable-jar-property-launcher-features":"executable-jar.property-launcher",
"executable-jar-restrictions":"executable-jar.restrictions",
"executable-jar-war-file-structure":"executable-jar.nested-jars.war-structure",
"executable-jar-war-index-files":"executable-jar.nested-jars.index-files",
"executable-jar-war-index-files-classpath":"executable-jar.nested-jars.classpath-index",
"executable-jar-war-index-files-layers":"executable-jar.nested-jars.layer-index",
"features.caching":"io.caching",
"features.caching.provider":"io.caching.provider",
"features.caching.provider.caffeine":"io.caching.provider.caffeine",
"features.caching.provider.couchbase":"io.caching.provider.couchbase",
"features.caching.provider.ehcache2":"io.caching.provider.ehcache2",
"features.caching.provider.generic":"io.caching.provider.generic",
"features.caching.provider.hazelcast":"io.caching.provider.hazelcast",
"features.caching.provider.infinispan":"io.caching.provider.infinispan",
"features.caching.provider.jcache":"io.caching.provider.jcache",
"features.caching.provider.none":"io.caching.provider.none",
"features.caching.provider.redis":"io.caching.provider.redis",
"features.caching.provider.simple":"io.caching.provider.simple",
"features.container-images":"container-images.efficient-images",
"features.container-images.building":"container-images.efficient-images",
"features.container-images.building.buildpacks":"container-images.buildpacks",
"features.container-images.building.dockerfiles":"container-images.dockerfiles",
"features.container-images.layering":"container-images.efficient-images.layering",
"features.developing-web-applications":"web",
"features.developing-web-applications.embedded-container":"web.servlet.embedded-container",
"features.developing-web-applications.embedded-container.application-context":"web.servlet.embedded-container.application-context",
"features.developing-web-applications.embedded-container.context-initializer":"web.servlet.embedded-container.context-initializer",
"features.developing-web-applications.embedded-container.context-initializer.scanning":"web.servlet.embedded-container.context-initializer.scanning",
"features.developing-web-applications.embedded-container.customizing":"web.servlet.embedded-container.customizing",
"features.developing-web-applications.embedded-container.customizing.direct":"web.servlet.embedded-container.customizing.direct",
"features.developing-web-applications.embedded-container.customizing.programmatic":"web.servlet.embedded-container.customizing.programmatic",
"features.developing-web-applications.embedded-container.jsp-limitations":"web.servlet.embedded-container.jsp-limitations",
"features.developing-web-applications.embedded-container.servlets-filters-listeners":"web.servlet.embedded-container.servlets-filters-listeners",
"features.developing-web-applications.embedded-container.servlets-filters-listeners.beans":"web.servlet.embedded-container.servlets-filters-listeners.beans",
"features.developing-web-applications.jersey":"web.servlet.jersey",
"features.developing-web-applications.reactive-server":"web.reactive.reactive-server",
"features.developing-web-applications.reactive-server-resources-configuration":"web.reactive.reactive-server-resources-configuration",
"features.developing-web-applications.spring-mvc":"web.servlet.spring-mvc",
"features.developing-web-applications.spring-mvc.auto-configuration":"web.servlet.spring-mvc.auto-configuration",
"features.developing-web-applications.spring-mvc.binding-initializer":"web.servlet.spring-mvc.binding-initializer",
"features.developing-web-applications.spring-mvc.content-negotiation":"web.servlet.spring-mvc.content-negotiation",
"features.developing-web-applications.spring-mvc.cors":"web.servlet.spring-mvc.cors",
"features.developing-web-applications.spring-mvc.error-handling":"web.servlet.spring-mvc.error-handling",
"features.developing-web-applications.spring-mvc.error-handling.error-pages":"web.servlet.spring-mvc.error-handling.error-pages",
"features.developing-web-applications.spring-mvc.error-handling.error-pages-without-spring-mvc":"web.servlet.spring-mvc.error-handling.error-pages-without-spring-mvc",
"features.developing-web-applications.spring-mvc.error-handling.in-a-war-deployment":"web.servlet.spring-mvc.error-handling.in-a-war-deployment",
"features.developing-web-applications.spring-mvc.json":"web.servlet.spring-mvc.json",
"features.developing-web-applications.spring-mvc.message-codes":"web.servlet.spring-mvc.message-codes",
"features.developing-web-applications.spring-mvc.message-converters":"web.servlet.spring-mvc.message-converters",
"features.developing-web-applications.spring-mvc.static-content":"web.servlet.spring-mvc.static-content",
"features.developing-web-applications.spring-mvc.template-engines":"web.servlet.spring-mvc.template-engines",
"features.developing-web-applications.spring-mvc.welcome-page":"web.servlet.spring-mvc.welcome-page",
"features.developing-web-applications.spring-webflux":"web.reactive.webflux",
"features.developing-web-applications.spring-webflux.auto-configuration":"web.reactive.webflux.auto-configuration",
"features.developing-web-applications.spring-webflux.error-handling":"web.reactive.webflux.error-handling",
"features.developing-web-applications.spring-webflux.error-pages":"web.reactive.webflux.error-handling.error-pages",
"features.developing-web-applications.spring-webflux.httpcodecs":"web.reactive.webflux.httpcodecs",
"features.developing-web-applications.spring-webflux.static-context":"web.reactive.webflux.static-content",
"features.developing-web-applications.spring-webflux.template-engines":"web.reactive.webflux.template-engines",
"features.developing-web-applications.spring-webflux.web-filters":"web.reactive.webflux.web-filters",
"features.developing-web-applications.spring-webflux.welcome-page":"web.reactive.webflux.welcome-page",
"features.email":"io.email",
"features.graceful-shutdown":"web.graceful-shutdown",
"features.jmx":"actuator.jmx",
"features.jta":"io.jta",
"features.jta.atomikos":"io.jta.atomikos",
"features.jta.javaee":"io.jta.javaee",
"features.jta.mixing-xa-and-non-xa-connections":"io.jta.mixing-xa-and-non-xa-connections",
"features.jta.supporting-alternative-embedded-transaction-manager":"io.jta.supporting-alternative-embedded-transaction-manager",
"features.messaging":"messaging",
"features.messaging.amqp":"messaging.amqp",
"features.messaging.amqp.rabbit":"messaging.amqp.rabbit",
"features.messaging.amqp.receiving":"messaging.amqp.receiving",
"features.messaging.amqp.sending":"messaging.amqp.sending",
"features.messaging.jms.activemq":"messaging.jms.activemq",
"features.messaging.jms.artemis":"messaging.jms.artemis",
"features.messaging.jms.jndi":"messaging.jms.jndi",
"features.messaging.jms.receiving":"messaging.jms.receiving",
"features.messaging.jms.sending":"messaging.jms.sending",
"features.messaging.kafka":"messaging.kafka",
"features.messaging.kafka.additional-properties":"messaging.kafka.additional-properties",
"features.messaging.kafka.embedded":"messaging.kafka.embedded",
"features.messaging.kafka.receiving":"messaging.kafka.receiving",
"features.messaging.kafka.sending":"messaging.kafka.sending",
"features.messaging.kafka.streams":"messaging.kafka.streams",
"features.nosql":"data.nosql",
"features.nosql.cassandra":"data.nosql.cassandra",
"features.nosql.cassandra.connecting":"data.nosql.cassandra.connecting",
"features.nosql.cassandra.repositories":"data.nosql.cassandra.repositories",
"features.nosql.couchbase":"data.nosql.couchbase",
"features.nosql.couchbase.connecting":"data.nosql.couchbase.connecting",
"features.nosql.couchbase.repositories":"data.nosql.couchbase.repositories",
"features.nosql.elasticsearch":"data.nosql.elasticsearch",
"features.nosql.elasticsearch.connecting-using-reactive-rest":"data.nosql.elasticsearch.connecting-using-reactive-rest",
"features.nosql.elasticsearch.connecting-using-rest":"data.nosql.elasticsearch.connecting-using-rest",
"features.nosql.elasticsearch.connecting-using-spring-data":"data.nosql.elasticsearch.connecting-using-spring-data",
"features.nosql.elasticsearch.repositories":"data.nosql.elasticsearch.repositories",
"features.nosql.influxdb":"data.nosql.influxdb",
"features.nosql.influxdb.connecting":"data.nosql.influxdb.connecting",
"features.nosql.ldap":"data.nosql.ldap",
"features.nosql.ldap.connecting":"data.nosql.ldap.connecting",
"features.nosql.ldap.embedded":"data.nosql.ldap.embedded",
"features.nosql.ldap.repositories":"data.nosql.ldap.repositories",
"features.nosql.mongodb":"data.nosql.mongodb",
"features.nosql.mongodb.connecting":"data.nosql.mongodb.connecting",
"features.nosql.mongodb.embedded":"data.nosql.mongodb.embedded",
"features.nosql.mongodb.repositories":"data.nosql.mongodb.repositories",
"features.nosql.mongodb.template":"data.nosql.mongodb.template",
"features.nosql.neo4j":"data.nosql.neo4j",
"features.nosql.neo4j.connecting":"data.nosql.neo4j.connecting",
"features.nosql.neo4j.repositories":"data.nosql.neo4j.repositories",
"features.nosql.redis":"data.nosql.redis",
"features.nosql.redis.connecting":"data.nosql.redis.connecting",
"features.nosql.solr":"data.nosql.solr",
"features.nosql.solr.connecting":"data.nosql.solr.connecting",
"features.quartz":"io.quartz",
"features.resttemplate":"io.rest-client.resttemplate",
"features.resttemplate.customization":"io.rest-client.resttemplate.customization",
"features.rsocket":"messaging.rsocket",
"features.rsocket.messaging":"messaging.rsocket.messaging",
"features.rsocket.requester":"messaging.rsocket.requester",
"features.rsocket.server-auto-configuration":"messaging.rsocket.server-auto-configuration",
"features.rsocket.strategies-auto-configuration":"messaging.rsocket.strategies-auto-configuration",
"features.security":"web.security",
"features.security.actuator":"actuator.endpoints.security",
"features.security.actuator.csrf":"actuator.endpoints.security.csrf",
"features.security.authorization-server":"web.security.oauth2.authorization-server",
"features.security.oauth2":"web.security.oauth2",
"features.security.oauth2.client":"web.security.oauth2.client",
"features.security.oauth2.client.common-providers":"web.security.oauth2.client.common-providers",
"features.security.oauth2.server":"web.security.oauth2.server",
"features.security.saml2":"web.security.saml2",
"features.security.saml2.relying-party":"web.security.saml2.relying-party",
"features.security.spring-mvc":"web.security.spring-mvc",
"features.security.spring-webflux":"web.security.spring-webflux",
"features.spring-hateoas":"web.spring-hateoas",
"features.spring-integration":"messaging.spring-integration",
"features.spring-session":"web.spring-session",
"features.sql":"data.sql",
"features.sql.datasource":"data.sql.datasource",
"features.sql.datasource.configuration":"data.sql.datasource.configuration",
"features.sql.datasource.connection-pool":"data.sql.datasource.connection-pool",
"features.sql.datasource.embedded":"data.sql.datasource.embedded",
"features.sql.datasource.jndi":"data.sql.datasource.jndi",
"features.sql.datasource.production":"data.sql.datasource.production",
"features.sql.h2-web-console":"data.sql.h2-web-console",
"features.sql.h2-web-console.custom-path":"data.sql.h2-web-console.custom-path",
"features.sql.jdbc":"data.sql.jdbc",
"features.sql.jdbc-template":"data.sql.jdbc-template",
"features.sql.jooq":"data.sql.jooq",
"features.sql.jooq.codegen":"data.sql.jooq.codegen",
"features.sql.jooq.customizing":"data.sql.jooq.customizing",
"features.sql.jooq.dslcontext":"data.sql.jooq.dslcontext",
"features.sql.jooq.sqldialect":"data.sql.jooq.sqldialect",
"features.sql.jpa-and-spring-data":"data.sql.jpa-and-spring-data",
"features.sql.jpa-and-spring-data.creating-and-dropping":"data.sql.jpa-and-spring-data.creating-and-dropping",
"features.sql.jpa-and-spring-data.entity-classes":"data.sql.jpa-and-spring-data.entity-classes",
"features.sql.jpa-and-spring-data.envers-repositories":"data.sql.jpa-and-spring-data.envers-repositories",
"features.sql.jpa-and-spring-data.open-entity-manager-in-view":"data.sql.jpa-and-spring-data.open-entity-manager-in-view",
"features.sql.jpa-and-spring-data.repositories":"data.sql.jpa-and-spring-data.repositories",
"features.sql.r2dbc":"data.sql.r2dbc",
"features.sql.r2dbc.embedded":"data.sql.r2dbc.embedded",
"features.sql.r2dbc.repositories":"data.sql.r2dbc.repositories",
"features.sql.r2dbc.using-database-client":"data.sql.r2dbc.using-database-client",
"features.validation":"io.validation",
"features.webclient":"io.rest-client.webclient",
"features.webclient.customization":"io.rest-client.webclient.customization",
"features.webclient.runtime":"io.rest-client.webclient.runtime",
"features.webservices":"io.webservices",
"features.webservices.template":"io.webservices.template",
"features.websockets":"messaging.websockets",
"getting-started-cli-command-line-completion":"getting-started.installing.cli.completion",
"getting-started-cli-example":"getting-started.installing.cli.quick-start",
"getting-started-first-application":"getting-started.first-application",
"getting-started-first-application-annotations":"getting-started.first-application.code.mvc-annotations",
"getting-started-first-application-auto-configuration":"getting-started.first-application.code.enable-auto-configuration",
"getting-started-first-application-code":"getting-started.first-application.code",
"getting-started-first-application-dependencies":"getting-started.first-application.dependencies",
"getting-started-first-application-executable-jar":"getting-started.first-application.executable-jar",
"getting-started-first-application-main-method":"getting-started.first-application.code.main-method",
"getting-started-first-application-pom":"getting-started.first-application.pom",
"getting-started-first-application-run":"getting-started.first-application.run",
"getting-started-gradle-installation":"getting-started.installing.java.gradle",
"getting-started-homebrew-cli-installation":"getting-started.installing.cli.homebrew",
"getting-started-installation-instructions-for-java":"getting-started.installing.java",
"getting-started-installing-spring-boot":"getting-started.installing",
"getting-started-installing-the-cli":"getting-started.installing.cli",
"getting-started-introducing-spring-boot":"getting-started.introducing-spring-boot",
"getting-started-macports-cli-installation":"getting-started.installing.cli.macports",
"getting-started-manual-cli-installation":"getting-started.installing.cli.manual-installation",
"getting-started-maven-installation":"getting-started.installing.java.maven",
"getting-started-scoop-cli-installation":"getting-started.installing.cli.scoop",
"getting-started-sdkman-cli-installation":"getting-started.installing.cli.sdkman",
"getting-started-system-requirements":"getting-started.system-requirements",
"getting-started-system-requirements-servlet-containers":"getting-started.system-requirements.servlet-containers",
"getting-started-upgrading-from-an-earlier-version":"getting-started.installing.upgrading",
"getting-started-whats-next":"getting-started.whats-next",
"how-to-enable-http-response-compression":"howto.webserver.enable-response-compression",
"howto-actuator":"howto.actuator",
"howto-add-a-servlet-filter-or-listener":"howto.webserver.add-servlet-filter-listener",
"howto-add-a-servlet-filter-or-listener-as-spring-bean":"howto.webserver.add-servlet-filter-listener.spring-bean",
"howto-add-a-servlet-filter-or-listener-using-scanning":"howto.webserver.add-servlet-filter-listener.using-scanning",
"howto-automatic-expansion":"howto.properties-and-configuration.expand-properties",
"howto-automatic-expansion-gradle":"howto.properties-and-configuration.expand-properties.gradle",
"howto-automatic-expansion-maven":"howto.properties-and-configuration.expand-properties.maven",
"howto-batch-applications":"howto.batch",
"howto-build":"howto.build",
"howto-build-an-application-context-hierarchy":"howto.application.context-hierarchy",
"howto-build-an-executable-archive-with-ant":"howto.build.build-an-executable-archive-with-ant-without-using-spring-boot-antlib",
"howto-build-info":"howto.build.generate-info",
"howto-change-configuration-depending-on-the-environment":"howto.properties-and-configuration.change-configuration-depending-on-the-environment",
"howto-change-the-http-port":"howto.webserver.change-port",
"howto-change-the-http-port-or-address-of-the-actuator-endpoints":"howto.actuator.change-http-port-or-address",
"howto-change-the-location-of-external-properties":"howto.properties-and-configuration.external-properties-location",
"howto-change-the-user-details-service-and-add-user-accounts":"howto.security.change-user-details-service-and-add-user-accounts",
"howto-configure-a-component-that-is-used-by-JPA":"howto.data-access.configure-a-component-that-is-used-by-jpa",
"howto-configure-a-datasource":"howto.data-access.configure-custom-datasource",
"howto-configure-accesslogs":"howto.webserver.configure-access-logs",
"howto-configure-hibernate-naming-strategy":"howto.data-access.configure-hibernate-naming-strategy",
"howto-configure-hibernate-second-level-caching":"howto.data-access.configure-hibernate-second-level-caching",
"howto-configure-http2":"howto.webserver.configure-http2",
"howto-configure-http2-jetty":"howto.webserver.configure-http2.jetty",
"howto-configure-http2-netty":"howto.webserver.configure-http2.netty",
"howto-configure-http2-tomcat":"howto.webserver.configure-http2.tomcat",
"howto-configure-http2-undertow":"howto.webserver.configure-http2.undertow",
"howto-configure-jOOQ-with-multiple-datasources":"howto.data-access.configure-jooq-with-multiple-datasources",
"howto-configure-jpa-properties":"howto.data-access.jpa-properties",
"howto-configure-log4j-for-logging":"howto.logging.log4j",
"howto-configure-log4j-for-logging-yaml-or-json-config":"howto.logging.log4j.yaml-or-json-config",
"howto-configure-logback-for-logging":"howto.logging.logback",
"howto-configure-logback-for-logging-fileonly":"howto.logging.logback.file-only-output",
"howto-configure-ssl":"howto.webserver.configure-ssl",
"howto-configure-webserver":"howto.webserver.configure",
"howto-convert-an-existing-application-to-spring-boot":"howto.traditional-deployment.convert-existing-application",
"howto-create-a-deployable-war-file":"howto.traditional-deployment.war",
"howto-create-a-non-web-application":"howto.application.non-web-application",
"howto-create-a-nonexecutable-jar":"howto.build.create-a-nonexecutable-jar",
"howto-create-an-additional-executable-jar":"howto.build.use-a-spring-boot-application-as-dependency",
"howto-create-an-executable-jar-with-maven":"howto.build.create-an-executable-jar-with-maven",
"howto-create-websocket-endpoints-using-serverendpoint":"howto.webserver.create-websocket-endpoints-using-serverendpoint",
"howto-customize-dependency-versions":"howto.build.customize-dependency-versions",
"howto-customize-the-environment-or-application-context":"howto.application.customize-the-environment-or-application-context",
"howto-customize-the-jackson-objectmapper":"howto.spring-mvc.customize-jackson-objectmapper",
"howto-customize-the-responsebody-rendering":"howto.spring-mvc.customize-responsebody-rendering",
"howto-customize-the-whitelabel-error-page":"howto.actuator.customize-whitelabel-error-page",
"howto-customize-tomcat-behind-a-proxy-server":"howto.webserver.use-behind-a-proxy-server.tomcat",
"howto-customize-view-resolvers":"howto.spring-mvc.customize-view-resolvers",
"howto-data-access":"howto.data-access",
"howto-database-initialization":"howto.data-initialization",
"howto-disable-registration-of-a-servlet-or-filter":"howto.webserver.add-servlet-filter-listener.spring-bean.disable",
"howto-disable-web-server":"howto.webserver.disable",
"howto-discover-build-in-options-for-external-properties":"howto.properties-and-configuration.discover-build-in-options-for-external-properties",
"howto-discover-the-http-port-at-runtime":"howto.webserver.discover-port",
"howto-embedded-web-servers":"howto.webserver",
"howto-enable-https":"howto.security.enable-https",
"howto-enable-multiple-connectors-in-tomcat":"howto.webserver.enable-multiple-connectors-in-tomcat",
"howto-enable-multiple-listeners-in-undertow":"howto.webserver.enable-multiple-listeners-in-undertow",
"howto-enable-tomcat-mbean-registry":"howto.webserver.enable-tomcat-mbean-registry",
"howto-execute-flyway-database-migrations-on-startup":"howto.data-initialization.migration-tool.flyway",
"howto-execute-liquibase-database-migrations-on-startup":"howto.data-initialization.migration-tool.liquibase",
"howto-externalize-configuration":"howto.properties-and-configuration.externalize-configuration",
"howto-extract-specific-libraries-when-an-executable-jar-runs":"howto.build.extract-specific-libraries-when-an-executable-jar-runs",
"howto-failure-analyzer":"howto.application.failure-analyzer",
"howto-git-info":"howto.build.generate-git-info",
"howto-hotswapping":"howto.hotswapping",
"howto-http-clients":"howto.http-clients",
"howto-http-clients-proxy-configuration":"howto.http-clients.rest-template-proxy-configuration",
"howto-initialize-a-database-configuring-dependencies":"howto.data-initialization.dependencies",
"howto-initialize-a-database-configuring-dependencies-depends-on-initialization-detection":"howto.data-initialization.dependencies.depends-on-initialization-detection",
"howto-initialize-a-database-configuring-dependencies-initializer-detection":"howto.data-initialization.dependencies.initializer-detection",
"howto-initialize-a-database-using-basic-scripts":"howto.data-initialization.using-basic-sql-scripts",
"howto-initialize-a-database-using-hibernate":"howto.data-initialization.using-hibernate",
"howto-initialize-a-database-using-jpa":"howto.data-initialization.using-jpa",
"howto-initialize-a-spring-batch-database":"howto.data-initialization.batch",
"howto-jersey":"howto.jersey",
"howto-jersey-alongside-another-web-framework":"howto.jersey.alongside-another-web-framework",
"howto-jersey-spring-security":"howto.jersey.spring-security",
"howto-jms-disable-transaction":"howto.messaging.disable-transacted-jms-session",
"howto-logging":"howto.logging",
"howto-map-health-indicators-to-metrics":"howto.actuator.map-health-indicators-to-metrics",
"howto-messaging":"howto.messaging",
"howto-multipart-file-upload-configuration":"howto.spring-mvc.multipart-file-uploads",
"howto-properties-and-configuration":"howto.properties-and-configuration",
"howto-reload-fast-restart":"howto.hotswapping.fast-application-restarts",
"howto-reload-freemarker-content":"howto.hotswapping.reload-templates.freemarker",
"howto-reload-groovy-template-content":"howto.hotswapping.reload-templates.groovy",
"howto-reload-java-classes-without-restarting":"howto.hotswapping.reload-java-classes-without-restarting",
"howto-reload-static-content":"howto.hotswapping.reload-static-content",
"howto-reload-thymeleaf-content":"howto.hotswapping.reload-templates.thymeleaf",
"howto-reload-thymeleaf-template-content":"howto.hotswapping.reload-templates",
"howto-remote-debug-maven-run":"howto.build.remote-debug-maven",
"howto-sanitize-sensible-values":"howto.actuator.sanitize-sensitive-values",
"howto-sanitize-sensitive-values":"howto.actuator.sanitize-sensitive-values",
"howto-security":"howto.security",
"howto-separate-entity-definitions-from-spring-configuration":"howto.data-access.separate-entity-definitions-from-spring-configuration",
"howto-set-active-spring-profiles":"howto.properties-and-configuration.set-active-spring-profiles",
"howto-spring-batch-running-command-line":"howto.batch.running-from-the-command-line",
"howto-spring-batch-running-jobs-on-startup":"howto.batch.running-jobs-on-startup",
"howto-spring-batch-specifying-a-data-source":"howto.batch.specifying-a-data-source",
"howto-spring-batch-storing-job-repository":"howto.batch.storing-job-repository",
"howto-spring-boot-application":"howto.application",
"howto-spring-mvc":"howto.spring-mvc",
"howto-switch-off-default-mvc-configuration":"howto.spring-mvc.switch-off-default-configuration",
"howto-switch-off-spring-boot-security-configuration":"howto.security.switch-off-spring-boot-configuration",
"howto-switch-off-the-spring-mvc-dispatcherservlet":"howto.spring-mvc.switch-off-dispatcherservlet",
"howto-testcontainers":"howto.testing.testcontainers",
"howto-traditional-deployment":"howto.traditional-deployment",
"howto-troubleshoot-auto-configuration":"howto.application.troubleshoot-auto-configuration",
"howto-two-datasources":"howto.data-access.configure-two-datasources",
"howto-use-a-higher-level-database-migration-tool":"howto.data-initialization.migration-tool",
"howto-use-another-web-server":"howto.webserver.use-another",
"howto-use-behind-a-proxy-server":"howto.webserver.use-behind-a-proxy-server",
"howto-use-custom-entity-manager":"howto.data-access.use-custom-entity-manager",
"howto-use-customize-spring-datas-web-support":"howto.data-access.customize-spring-data-web-support",
"howto-use-dependency-injection-hibernate-components":"howto.data-access.dependency-injection-in-hibernate-components",
"howto-use-exposing-spring-data-repositories-rest-endpoint":"howto.data-access.exposing-spring-data-repositories-as-rest",
"howto-use-jedis-instead-of-lettuce":"howto.nosql.jedis-instead-of-lettuce",
"howto-use-multiple-entity-managers":"howto.data-access.use-multiple-entity-managers",
"howto-use-short-command-line-arguments":"howto.properties-and-configuration.short-command-line-arguments",
"howto-use-spring-data-jpa--and-mongo-repositories":"howto.data-access.use-spring-data-jpa-and-mongo-repositories",
"howto-use-spring-data-repositories":"howto.data-access.spring-data-repositories",
"howto-use-test-with-spring-security":"howto.spring-mvc.testing.with-spring-security",
"howto-use-tomcat-legacycookieprocessor":"howto.webserver.use-tomcat-legacycookieprocessor",
"howto-use-traditional-persistence-xml":"howto.data-access.use-traditional-persistence-xml",
"howto-use-two-entity-managers":"howto.data-access.use-multiple-entity-managers",
"howto-use-yaml-for-external-properties":"howto.properties-and-configuration.yaml",
"howto-user-a-random-unassigned-http-port":"howto.webserver.use-random-port",
"howto-webclient-reactor-netty-customization":"howto.http-clients.webclient-reactor-netty-customization",
"howto-weblogic":"howto.traditional-deployment.weblogic",
"howto-write-a-json-rest-service":"howto.spring-mvc.write-json-rest-service",
"howto-write-an-xml-rest-service":"howto.spring-mvc.write-xml-rest-service",
"integration-properties":"application-properties.integration",
"json-properties":"application-properties.json",
"mail-properties":"application-properties.mail",
"production-ready":"actuator",
"production-ready-application-info":"actuator.endpoints.info",
"production-ready-application-info-autoconfigure":"actuator.endpoints.info.auto-configured-info-contributors",
"production-ready-application-info-build":"actuator.endpoints.info.build-information",
"production-ready-application-info-custom":"actuator.endpoints.info.writing-custom-info-contributors",
"production-ready-application-info-env":"actuator.endpoints.info.custom-application-information",
"production-ready-application-info-git":"actuator.endpoints.info.git-commit-information",
"production-ready-auditing":"actuator.auditing",
"production-ready-auditing-custom":"actuator.auditing.custom",
"production-ready-cloudfoundry":"actuator.cloud-foundry",
"production-ready-cloudfoundry-disable":"actuator.cloud-foundry.disable",
"production-ready-cloudfoundry-ssl":"actuator.cloud-foundry.ssl",
"production-ready-custom-context-path":"actuator.cloud-foundry.custom-context-path",
"production-ready-custom-mbean-names":"actuator.jmx.custom-mbean-names",
"production-ready-customizing-jolokia":"actuator.jmx.jolokia.customizing",
"production-ready-customizing-management-server-address":"actuator.monitoring.customizing-management-server-address",
"production-ready-customizing-management-server-context-path":"actuator.monitoring.customizing-management-server-context-path",
"production-ready-customizing-management-server-port":"actuator.monitoring.customizing-management-server-port",
"production-ready-disable-jmx-endpoints":"actuator.jmx.disable-jmx-endpoints",
"production-ready-disabling-http-endpoints":"actuator.monitoring.disabling-http-endpoints",
"production-ready-disabling-jolokia":"actuator.jmx.jolokia.disabling",
"production-ready-enabling":"actuator.enabling",
"production-ready-endpoints":"actuator.endpoints",
"production-ready-endpoints-caching":"actuator.endpoints.caching",
"production-ready-endpoints-cors":"actuator.endpoints.cors",
"production-ready-endpoints-custom":"actuator.endpoints.implementing-custom",
"production-ready-endpoints-custom-controller":"actuator.endpoints.implementing-custom.controller",
"production-ready-endpoints-custom-input":"actuator.endpoints.implementing-custom.input",
"production-ready-endpoints-custom-input-conversion":"actuator.endpoints.implementing-custom.input.conversion",
"production-ready-endpoints-custom-servlet":"actuator.endpoints.implementing-custom.servlet",
"production-ready-endpoints-custom-web":"actuator.endpoints.implementing-custom.web",
"production-ready-endpoints-custom-web-predicate":"actuator.endpoints.implementing-custom.web.request-predicates",
"production-ready-endpoints-custom-web-predicate-consumes":"actuator.endpoints.implementing-custom.web.consumes-predicates",
"production-ready-endpoints-custom-web-predicate-http-method":"actuator.endpoints.implementing-custom.web.method-predicates",
"production-ready-endpoints-custom-web-predicate-path":"actuator.endpoints.implementing-custom.web.path-predicates",
"production-ready-endpoints-custom-web-predicate-produces":"actuator.endpoints.implementing-custom.web.produces-predicates",
"production-ready-endpoints-custom-web-range-requests":"actuator.endpoints.implementing-custom.web.range-requests",
"production-ready-endpoints-custom-web-response-status":"actuator.endpoints.implementing-custom.web.response-status",
"production-ready-endpoints-custom-web-security":"actuator.endpoints.implementing-custom.web.security",
"production-ready-endpoints-enabling-endpoints":"actuator.endpoints.enabling",
"production-ready-endpoints-exposing-endpoints":"actuator.endpoints.exposing",
"production-ready-endpoints-hypermedia":"actuator.endpoints.hypermedia",
"production-ready-endpoints-security":"actuator.endpoints.security",
"production-ready-health":"actuator.endpoints.health",
"production-ready-health-datasource":"actuator.endpoints.health.datasource",
"production-ready-health-groups":"actuator.endpoints.health.groups",
"production-ready-health-indicators":"actuator.endpoints.health.auto-configured-health-indicators",
"production-ready-health-indicators-writing":"actuator.endpoints.health.writing-custom-health-indicators",
"production-ready-http-tracing":"actuator.tracing",
"production-ready-http-tracing-custom":"actuator.tracing.custom",
"production-ready-jmx":"actuator.jmx",
"production-ready-jolokia":"actuator.jmx.jolokia",
"production-ready-kubernetes-probes":"actuator.endpoints.kubernetes-probes",
"production-ready-kubernetes-probes-external-state":"actuator.endpoints.kubernetes-probes.external-state",
"production-ready-kubernetes-probes-lifecycle":"actuator.endpoints.kubernetes-probes.lifecycle",
"production-ready-logger-configuration":"actuator.loggers.configure",
"production-ready-loggers":"actuator.loggers",
"production-ready-management-specific-ssl":"actuator.monitoring.management-specific-ssl",
"production-ready-metrics":"actuator.metrics",
"production-ready-metrics-cache":"actuator.metrics.supported.cache",
"production-ready-metrics-common-tags":"actuator.metrics.customizing.common-tags",
"production-ready-metrics-custom":"actuator.metrics.registering-custom",
"production-ready-metrics-customizing":"actuator.metrics.customizing",
"production-ready-metrics-data-repository":"actuator.metrics.supported.spring-data-repository",
"production-ready-metrics-endpoint":"actuator.metrics.endpoint",
"production-ready-metrics-export":"actuator.metrics.export",
"production-ready-metrics-export-appoptics":"actuator.metrics.export.appoptics",
"production-ready-metrics-export-atlas":"actuator.metrics.export.atlas",
"production-ready-metrics-export-datadog":"actuator.metrics.export.datadog",
"production-ready-metrics-export-dynatrace":"actuator.metrics.export.dynatrace",
"production-ready-metrics-export-elastic":"actuator.metrics.export.elastic",
"production-ready-metrics-export-ganglia":"actuator.metrics.export.ganglia",
"production-ready-metrics-export-graphite":"actuator.metrics.export.graphite",
"production-ready-metrics-export-humio":"actuator.metrics.export.humio",
"production-ready-metrics-export-influx":"actuator.metrics.export.influx",
"production-ready-metrics-export-jmx":"actuator.metrics.export.jmx",
"production-ready-metrics-export-kairos":"actuator.metrics.export.kairos",
"production-ready-metrics-export-newrelic":"actuator.metrics.export.newrelic",
"production-ready-metrics-export-prometheus":"actuator.metrics.export.prometheus",
"production-ready-metrics-export-signalfx":"actuator.metrics.export.signalfx",
"production-ready-metrics-export-simple":"actuator.metrics.export.simple",
"production-ready-metrics-export-stackdriver":"actuator.metrics.export.stackdriver",
"production-ready-metrics-export-statsd":"actuator.metrics.export.statsd",
"production-ready-metrics-export-wavefront":"actuator.metrics.export.wavefront",
"production-ready-metrics-getting-started":"actuator.metrics.getting-started",
"production-ready-metrics-hibernate":"actuator.metrics.supported.hibernate",
"production-ready-metrics-http-clients":"actuator.metrics.supported.http-clients",
"production-ready-metrics-integration":"actuator.metrics.supported.spring-integration",
"production-ready-metrics-jdbc":"actuator.metrics.supported.jdbc",
"production-ready-metrics-jersey-server":"actuator.metrics.supported.jersey",
"production-ready-metrics-jvm":"actuator.metrics.supported.jvm",
"production-ready-metrics-kafka":"actuator.metrics.supported.kafka",
"production-ready-metrics-logger":"actuator.metrics.supported.logger",
"production-ready-metrics-meter":"actuator.metrics.supported",
"production-ready-metrics-mongodb":"actuator.metrics.supported.mongodb",
"production-ready-metrics-mongodb-command":"actuator.metrics.supported.mongodb.command",
"production-ready-metrics-mongodb-connectionpool":"actuator.metrics.supported.mongodb.connection-pool",
"production-ready-metrics-per-meter-properties":"actuator.metrics.customizing.per-meter-properties",
"production-ready-metrics-rabbitmq":"actuator.metrics.supported.rabbitmq",
"production-ready-metrics-spring-mvc":"actuator.metrics.supported.spring-mvc",
"production-ready-metrics-system":"actuator.metrics.supported.system",
"production-ready-metrics-timed-annotation":"actuator.metrics.supported.timed-annotation",
"production-ready-metrics-tomcat":"actuator.metrics.supported.tomcat",
"production-ready-metrics-web-flux":"actuator.metrics.supported.spring-webflux",
"production-ready-monitoring":"actuator.monitoring",
"production-ready-process-monitoring":"actuator.process-monitoring",
"production-ready-process-monitoring-configuration":"actuator.process-monitoring.configuration",
"production-ready-process-monitoring-programmatically":"actuator.process-monitoring.programmatically",
"production-ready-whats-next":"actuator.whats-next",
"reactive-health-indicators":"actuator.endpoints.health.reactive-health-indicators",
"reactive-health-indicators-autoconfigured":"actuator.endpoints.health.auto-configured-reactive-health-indicators",
"rsocket-properties":"application-properties.rsocket",
"running-remote-client-application":"using.devtools.remote-applications.client",
"security-properties":"application-properties.security",
"server-properties":"application-properties.server",
"spring-boot-ant-exejar":"build-tool-plugins.antlib.tasks.exejar",
"spring-boot-ant-exejar-examples":"build-tool-plugins.antlib.tasks.examples",
"spring-boot-ant-findmainclass":"build-tool-plugins.antlib.findmainclass",
"spring-boot-ant-findmainclass-examples":"build-tool-plugins.antlib.findmainclass.examples",
"spring-boot-ant-tasks":"build-tool-plugins.antlib.tasks",
"spring-boot-reference-documentation":"index",
"templating-properties":"application-properties.templating",
"test-auto-configuration-slices":"test-auto-configuration.slices",
"testing-properties":"application-properties.testing",
"transaction-properties":"application-properties.transaction",
"using-boot":"using",
"using-boot-ant":"using.build-systems.ant",
"using-boot-auto-configuration":"using.auto-configuration",
"using-boot-build-systems":"using.build-systems",
"using-boot-configuration-classes":"using.configuration-classes",
"using-boot-dependency-management":"using.build-systems.dependency-management",
"using-boot-devtools":"using.devtools",
"using-boot-devtools-customizing-classload":"using.devtools.restart.customizing-the-classload",
"using-boot-devtools-globalsettings":"using.devtools.globalsettings",
"using-boot-devtools-known-restart-limitations":"using.devtools.restart.limitations",
"using-boot-devtools-livereload":"using.devtools.livereload",
"using-boot-devtools-property-defaults":"using.devtools.property-defaults",
"using-boot-devtools-remote":"using.devtools.remote-applications",
"using-boot-devtools-remote-update":"using.devtools.remote-applications.update",
"using-boot-devtools-restart":"using.devtools.restart",
"using-boot-devtools-restart-additional-paths":"using.devtools.restart.watching-additional-paths",
"using-boot-devtools-restart-disable":"using.devtools.restart.disable",
"using-boot-devtools-restart-exclude":"using.devtools.restart.excluding-resources",
"using-boot-devtools-restart-logging-condition-delta":"using.devtools.restart.logging-condition-delta",
"using-boot-devtools-restart-triggerfile":"using.devtools.restart.triggerfile",
"using-boot-disabling-specific-auto-configuration":"using.auto-configuration.disabling-specific",
"using-boot-gradle":"using.build-systems.gradle",
"using-boot-hot-swapping":"using.running-your-application.hot-swapping",
"using-boot-importing-configuration":"using.configuration-classes.importing-additional-configuration",
"using-boot-importing-xml-configuration":"using.configuration-classes.importing-xml-configuration",
"using-boot-locating-the-main-class":"using.structuring-your-code.locating-the-main-class",
"using-boot-maven":"using.build-systems.maven",
"using-boot-packaging-for-production":"using.packaging-for-production",
"using-boot-replacing-auto-configuration":"using.auto-configuration.replacing",
"using-boot-running-as-a-packaged-application":"using.running-your-application.as-a-packaged-application",
"using-boot-running-from-an-ide":"using.running-your-application.from-an-ide",
"using-boot-running-with-the-gradle-plugin":"using.running-your-application.with-the-gradle-plugin",
"using-boot-running-with-the-maven-plugin":"using.running-your-application.with-the-maven-plugin",
"using-boot-running-your-application":"using.running-your-application",
"using-boot-spring-beans-and-dependency-injection":"using.spring-beans-and-dependency-injection",
"using-boot-starter":"using.build-systems.starters",
"using-boot-structuring-your-code":"using.structuring-your-code",
"using-boot-using-springbootapplication-annotation":"using.using-the-springbootapplication-annotation",
"using-boot-using-the-default-package":"using.structuring-your-code.using-the-default-package",
"using-boot-whats-next":"using.whats-next",
"using-spring-boot-restart-vs-reload":"using.devtools.restart.restart-vs-reload",
"web-properties":"application-properties.web"
}
</script>
</head>
<body id="features" class="book toc2 toc-left"><div id="banner-container" class="container" role="banner">
<div id="banner" class="contained" role="banner">
<div id="switch-theme">
<input type="checkbox" id="switch-theme-checkbox">
<label for="switch-theme-checkbox">暗黑模式</label>
</div>
</div>
</div>
<div id="tocbar-container" class="container" role="navigation">
<div id="tocbar" class="contained" role="navigation">
<button id="toggle-toc"></button>
</div>
</div>
<div id="main-container" class="container">
<div id="main" class="contained">
<div id="doc" class="doc">
<div id="header">
<h1 translation-result="on">核心功能</h1>
<h1 translation-origin="off">Core Features</h1>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<span id="back-to-index"><a href="index.html">返回索引页</a></span><ul class="sectlevel1">
<li>
  <p><a href="features.html#features.spring-application">1. SpringApplication</a></p>
<ul class="sectlevel2">
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.startup-failure">1.1. 启动失败</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.startup-failure">1.1. Startup Failure</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.lazy-initialization">1.2. 延迟初始化</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.lazy-initialization">1.2. Lazy Initialization</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.banner">1.3. 自定义横幅</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.banner">1.3. Customizing the Banner</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.customizing-spring-application">1.4. 自定义 SpringApplication</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.customizing-spring-application">1.4. Customizing SpringApplication</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.fluent-builder-api">1.5. 流畅的构建器 API</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.fluent-builder-api">1.5. Fluent Builder API</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.application-availability">1.6. 应用程序可用性</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.application-availability">1.6. Application Availability</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.application-availability.liveness">1.6.1. 活跃状态</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.application-availability.liveness">1.6.1. Liveness State</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.application-availability.readiness">1.6.2. 准备状态</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.application-availability.readiness">1.6.2. Readiness State</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.application-availability.managing">1.6.3. 管理应用程序可用性状态</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.application-availability.managing">1.6.3. Managing the Application Availability State</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.application-events-and-listeners">1.7. 应用程序事件和监听器</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.application-events-and-listeners">1.7. Application Events and Listeners</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.web-environment">1.8. 网络环境</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.web-environment">1.8. Web Environment</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.application-arguments">1.9. 访问应用程序参数</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.application-arguments">1.9. Accessing Application Arguments</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.command-line-runner">1.10. 使用 ApplicationRunner 或 CommandLineRunner</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.command-line-runner">1.10. Using the ApplicationRunner or CommandLineRunner</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.application-exit">1.11. 应用程序退出</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.application-exit">1.11. Application Exit</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.admin">1.12. 管理员功能</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.admin">1.12. Admin Features</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.spring-application.startup-tracking">1.13. 应用程序启动跟踪</a></p>
  <p translation-origin="off"><a href="features.html#features.spring-application.startup-tracking">1.13. Application Startup tracking</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config">2. 外化配置</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config">2. Externalized Configuration</a></p>
<ul class="sectlevel2">
<li>
  <p translation-result="on"><a href="features.html#features.external-config.command-line-args">2.1. 访问命令行属性</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.command-line-args">2.1. Accessing Command Line Properties</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.application-json">2.2. JSON 应用程序属性</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.application-json">2.2. JSON Application Properties</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files">2.3. 外部应用程序属性</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files">2.3. External Application Properties </a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files.optional-prefix">2.3.1. 可选位置</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files.optional-prefix">2.3.1. Optional Locations</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files.wildcard-locations">2.3.2. 通配符位置</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files.wildcard-locations">2.3.2. Wildcard Locations</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files.profile-specific">2.3.3. 配置文件特定文件</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files.profile-specific">2.3.3. Profile Specific Files</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files.importing">2.3.4. 导入附加数据</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files.importing">2.3.4. Importing Additional Data</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files.importing-extensionless">2.3.5. 导入无扩展名文件</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files.importing-extensionless">2.3.5. Importing Extensionless Files</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files.configtree">2.3.6. 使用配置树</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files.configtree">2.3.6. Using Configuration Trees</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files.property-placeholders">2.3.7. 属性占位符</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files.property-placeholders">2.3.7. Property Placeholders</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files.multi-document">2.3.8. 使用多文档文件</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files.multi-document">2.3.8. Working with Multi-Document Files</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.files.activation-properties">2.3.9. 激活属性</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.files.activation-properties">2.3.9. Activation Properties</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.encrypting">2.4. 加密属性</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.encrypting">2.4. Encrypting Properties</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.yaml">2.5. 使用 YAML</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.yaml">2.5. Working with YAML</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.external-config.yaml.mapping-to-properties">2.5.1. 将 YAML 映射到属性</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.yaml.mapping-to-properties">2.5.1. Mapping YAML to Properties</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.yaml.directly-loading">2.5.2. 直接加载 YAML</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.yaml.directly-loading">2.5.2. Directly Loading YAML</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.random-values">2.6. 配置随机值</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.random-values">2.6. Configuring Random Values</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.system-environment">2.7. 配置系统环境属性</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.system-environment">2.7. Configuring System Environment Properties</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties">2.8. 类型安全的配置属性</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties">2.8. Type-safe Configuration Properties</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.java-bean-binding">2.8.1. JavaBean 属性绑定</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.java-bean-binding">2.8.1. JavaBean properties binding</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.constructor-binding">2.8.2. 构造函数绑定</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.constructor-binding">2.8.2. Constructor binding</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.enabling-annotated-types">2.8.3. 启用 @ConfigurationProperties 注释类型</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.enabling-annotated-types">2.8.3. Enabling @ConfigurationProperties-annotated types</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.using-annotated-types">2.8.4. 使用 @ConfigurationProperties 注释的类型</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.using-annotated-types">2.8.4. Using @ConfigurationProperties-annotated types</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.third-party-configuration">2.8.5. 第三方配置</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.third-party-configuration">2.8.5. Third-party Configuration</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding">2.8.6. 轻松绑定</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding">2.8.6. Relaxed Binding</a></p>
<ul class="sectlevel4">
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.maps">绑定地图</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.maps">Binding Maps</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables">从环境变量绑定</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables">Binding from Environment Variables</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.merging-complex-types">2.8.7. 合并复杂类型</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.merging-complex-types">2.8.7. Merging Complex Types</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion">2.8.8. 属性转换</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion">2.8.8. Properties Conversion</a></p>
<ul class="sectlevel4">
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion.durations">转换持续时间</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion.durations">Converting Durations</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion.periods">转换期间</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion.periods">Converting periods</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion.data-sizes">转换数据大小</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion.data-sizes">Converting Data Sizes</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.validation">2.8.9.@ConfigurationProperties 验证</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.validation">2.8.9. @ConfigurationProperties Validation</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.vs-value-annotation">2.8.10.@ConfigurationProperties 与 @Value</a></p>
  <p translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.vs-value-annotation">2.8.10. @ConfigurationProperties vs. @Value</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.profiles">3. 简介</a></p>
  <p translation-origin="off"><a href="features.html#features.profiles">3. Profiles</a></p>
<ul class="sectlevel2">
<li>
  <p translation-result="on"><a href="features.html#features.profiles.adding-active-profiles">3.1. 添加活动配置文件</a></p>
  <p translation-origin="off"><a href="features.html#features.profiles.adding-active-profiles">3.1. Adding Active Profiles</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.profiles.groups">3.2. 配置文件组</a></p>
  <p translation-origin="off"><a href="features.html#features.profiles.groups">3.2. Profile Groups</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.profiles.programmatically-setting-profiles">3.3. 以编程方式设置配置文件</a></p>
  <p translation-origin="off"><a href="features.html#features.profiles.programmatically-setting-profiles">3.3. Programmatically Setting Profiles</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.profiles.profile-specific-configuration-files">3.4. 配置文件特定的配置文件</a></p>
  <p translation-origin="off"><a href="features.html#features.profiles.profile-specific-configuration-files">3.4. Profile-specific Configuration Files</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging">4. 记录</a></p>
  <p translation-origin="off"><a href="features.html#features.logging">4. Logging</a></p>
<ul class="sectlevel2">
<li>
  <p translation-result="on"><a href="features.html#features.logging.log-format">4.1. 日志格式</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.log-format">4.1. Log Format</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging.console-output">4.2. 控制台输出</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.console-output">4.2. Console Output</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.logging.console-output.color-coded">4.2.1. 颜色编码输出</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.console-output.color-coded">4.2.1. Color-coded Output</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging.file-output">4.3. 文件输出</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.file-output">4.3. File Output</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging.file-rotation">4.4. 文件轮换</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.file-rotation">4.4. File Rotation</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging.log-levels">4.5. 日志级别</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.log-levels">4.5. Log Levels</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging.log-groups">4.6. 日志组</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.log-groups">4.6. Log Groups</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging.shutdown-hook">4.7. 使用日志关闭挂钩</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.shutdown-hook">4.7. Using a Log Shutdown Hook</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging.custom-log-configuration">4.8. 自定义日志配置</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.custom-log-configuration">4.8. Custom Log Configuration</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging.logback-extensions">4.9. Logback 扩展</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.logback-extensions">4.9. Logback Extensions</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.logging.logback-extensions.profile-specific">4.9.1. 配置文件特定的配置</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.logback-extensions.profile-specific">4.9.1. Profile-specific Configuration</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.logging.logback-extensions.environment-properties">4.9.2. 环境属性</a></p>
  <p translation-origin="off"><a href="features.html#features.logging.logback-extensions.environment-properties">4.9.2. Environment Properties</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.internationalization">5. 国际化</a></p>
  <p translation-origin="off"><a href="features.html#features.internationalization">5. Internationalization</a></p>
</li>
<li>
  <p><a href="features.html#features.json">6. JSON</a></p>
<ul class="sectlevel2">
<li>
  <p translation-result="on"><a href="features.html#features.json.jackson">6.1. 杰克逊</a></p>
  <p translation-origin="off"><a href="features.html#features.json.jackson">6.1. Jackson</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.json.gson">6.2. 格森</a></p>
  <p translation-origin="off"><a href="features.html#features.json.gson">6.2. Gson</a></p>
</li>
<li>
  <p><a href="features.html#features.json.json-b">6.3. JSON-B</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.task-execution-and-scheduling">7. 任务执行与调度</a></p>
  <p translation-origin="off"><a href="features.html#features.task-execution-and-scheduling">7. Task Execution and Scheduling</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing">8. 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing">8. Testing</a></p>
<ul class="sectlevel2">
<li>
  <p translation-result="on"><a href="features.html#features.testing.test-scope-dependencies">8.1. 测试范围依赖</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.test-scope-dependencies">8.1. Test Scope Dependencies</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-applications">8.2. 测试 Spring 应用程序</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-applications">8.2. Testing Spring Applications</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications">8.3. 测试 Spring Boot 应用程序</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications">8.3. Testing Spring Boot Applications</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.detecting-web-app-type">8.3.1. 检测 Web 应用程序类型</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.detecting-web-app-type">8.3.1. Detecting Web Application Type</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.detecting-configuration">8.3.2. 检测测试配置</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.detecting-configuration">8.3.2. Detecting Test Configuration</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.excluding-configuration">8.3.3. 排除测试配置</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.excluding-configuration">8.3.3. Excluding Test Configuration</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.using-application-arguments">8.3.4. 使用应用程序参数</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.using-application-arguments">8.3.4. Using Application Arguments</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.with-mock-environment">8.3.5. 使用模拟环境进行测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.with-mock-environment">8.3.5. Testing with a mock environment</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.with-running-server">8.3.6. 使用正在运行的服务器进行测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.with-running-server">8.3.6. Testing with a running server</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.customizing-web-test-client">8.3.7. 自定义 WebTestClient</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.customizing-web-test-client">8.3.7. Customizing WebTestClient</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.jmx">8.3.8. 使用 JMX</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.jmx">8.3.8. Using JMX</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.metrics">8.3.9. 使用指标</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.metrics">8.3.9. Using Metrics</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.mocking-beans">8.3.10. 模拟和窥探 Bean</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.mocking-beans">8.3.10. Mocking and Spying Beans</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-tests">8.3.11. 自动配置的测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-tests">8.3.11. Auto-configured Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.json-tests">8.3.12. 自动配置的 JSON 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.json-tests">8.3.12. Auto-configured JSON Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.spring-mvc-tests">8.3.13. 自动配置的 Spring MVC 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.spring-mvc-tests">8.3.13. Auto-configured Spring MVC Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.spring-webflux-tests">8.3.14. 自动配置的 Spring WebFlux 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.spring-webflux-tests">8.3.14. Auto-configured Spring WebFlux Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-cassandra">8.3.15. 自动配置的数据 Cassandra 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-cassandra">8.3.15. Auto-configured Data Cassandra Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa">8.3.16. 自动配置的数据 JPA 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa">8.3.16. Auto-configured Data JPA Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-jdbc">8.3.17. 自动配置的 JDBC 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-jdbc">8.3.17. Auto-configured JDBC Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jdbc">8.3.18. 自动配置的数据 JDBC 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jdbc">8.3.18. Auto-configured Data JDBC Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-jooq">8.3.19. 自动配置的 jOOQ 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-jooq">8.3.19. Auto-configured jOOQ Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-mongodb">8.3.20. 自动配置数据 MongoDB 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-mongodb">8.3.20. Auto-configured Data MongoDB Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-neo4j">8.3.21. 自动配置的数据 Neo4j 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-neo4j">8.3.21. Auto-configured Data Neo4j Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-redis">8.3.22. 自动配置的数据 Redis 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-redis">8.3.22. Auto-configured Data Redis Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-ldap">8.3.23. 自动配置的数据 LDAP 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-ldap">8.3.23. Auto-configured Data LDAP Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-rest-client">8.3.24. 自动配置的 REST 客户端</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-rest-client">8.3.24. Auto-configured REST Clients</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs">8.3.25. 自动配置的 Spring REST 文档测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs">8.3.25. Auto-configured Spring REST Docs Tests</a></p>
<ul class="sectlevel4">
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-mock-mvc">使用 Mock MVC 自动配置 Spring REST 文档测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-mock-mvc">Auto-configured Spring REST Docs Tests with Mock MVC</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-web-test-client">使用 WebTestClient 自动配置 Spring REST 文档测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-web-test-client">Auto-configured Spring REST Docs Tests with WebTestClient</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-rest-assured">带有 REST Assured 的自动配置 Spring REST 文档测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-rest-assured">Auto-configured Spring REST Docs Tests with REST Assured</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices">8.3.26. 自动配置的 Spring Web 服务测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices">8.3.26. Auto-configured Spring Web Services Tests</a></p>
<ul class="sectlevel4">
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices.client">自动配置的 Spring Web 服务客户端测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices.client">Auto-configured Spring Web Services Client Tests</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices.server">自动配置的 Spring Web 服务服务器测试</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices.server">Auto-configured Spring Web Services Server Tests</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.additional-autoconfiguration-and-slicing">8.3.27. 额外的自动配置和切片</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.additional-autoconfiguration-and-slicing">8.3.27. Additional Auto-configuration and Slicing</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.user-configuration-and-slicing">8.3.28. 用户配置和切片</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.user-configuration-and-slicing">8.3.28. User Configuration and Slicing</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.spring-boot-applications.spock">8.3.29. 使用 Spock 测试 Spring Boot 应用程序</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.spring-boot-applications.spock">8.3.29. Using Spock to Test Spring Boot Applications</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.utilities">8.4. 测试工具</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.utilities">8.4. Test Utilities</a></p>
<ul class="sectlevel3">
<li>
  <p><a href="features.html#features.testing.utilities.config-data-application-context-initializer">8.4.1. ConfigDataApplicationContextInitializer</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.utilities.test-property-values">8.4.2. 测试属性值</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.utilities.test-property-values">8.4.2. TestPropertyValues</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.utilities.output-capture">8.4.3. 输出捕获</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.utilities.output-capture">8.4.3. OutputCapture</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.testing.utilities.test-rest-template">8.4.4. 测试休息模板</a></p>
  <p translation-origin="off"><a href="features.html#features.testing.utilities.test-rest-template">8.4.4. TestRestTemplate</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration">9. 创建你自己的自动配置</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration">9. Creating Your Own Auto-configuration</a></p>
<ul class="sectlevel2">
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.understanding-auto-configured-beans">9.1. 了解自动配置的 Bean</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.understanding-auto-configured-beans">9.1. Understanding Auto-configured Beans</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.locating-auto-configuration-candidates">9.2. 定位自动配置候选</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.locating-auto-configuration-candidates">9.2. Locating Auto-configuration Candidates</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations">9.3. 条件注释</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations">9.3. Condition Annotations</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.class-conditions">9.3.1. 班级条件</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.class-conditions">9.3.1. Class Conditions</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.bean-conditions">9.3.2. 豆条件</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.bean-conditions">9.3.2. Bean Conditions</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.property-conditions">9.3.3. 物业条件</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.property-conditions">9.3.3. Property Conditions</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.resource-conditions">9.3.4. 资源条件</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.resource-conditions">9.3.4. Resource Conditions</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.web-application-conditions">9.3.5. 网络申请条件</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.web-application-conditions">9.3.5. Web Application Conditions</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.spel-conditions">9.3.6. SpEL 表达条件</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.spel-conditions">9.3.6. SpEL Expression Conditions</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.testing">9.4. 测试你的自动配置</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.testing">9.4. Testing your Auto-configuration</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.testing.simulating-a-web-context">9.4.1. 模拟 Web 上下文</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.testing.simulating-a-web-context">9.4.1. Simulating a Web Context</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.testing.overriding-classpath">9.4.2. 覆盖类路径</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.testing.overriding-classpath">9.4.2. Overriding the Classpath</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter">9.5. 创建自己的启动器</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.custom-starter">9.5. Creating Your Own Starter</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter.naming">9.5.1. 命名</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.custom-starter.naming">9.5.1. Naming</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter.configuration-keys">9.5.2. 配置键</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.custom-starter.configuration-keys">9.5.2. Configuration keys</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter.autoconfigure-module">9.5.3.“自动配置”模块</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.custom-starter.autoconfigure-module">9.5.3. The “autoconfigure” Module</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter.starter-module">9.5.4. 入门模块</a></p>
  <p translation-origin="off"><a href="features.html#features.developing-auto-configuration.custom-starter.starter-module">9.5.4. Starter Module</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.kotlin">10. Kotlin 支持</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin">10. Kotlin support</a></p>
<ul class="sectlevel2">
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.requirements">10.1. 要求</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.requirements">10.1. Requirements</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.null-safety">10.2. 零安全</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.null-safety">10.2. Null-safety</a></p>
</li>
<li>
  <p><a href="features.html#features.kotlin.api">10.3. Kotlin API</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.api.run-application">10.3.1. 运行应用程序</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.api.run-application">10.3.1. runApplication</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.api.extensions">10.3.2. 扩展</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.api.extensions">10.3.2. Extensions</a></p>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.dependency-management">10.4. 依赖管理</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.dependency-management">10.4. Dependency management</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.configuration-properties">10.5.@ConfigurationProperties</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.configuration-properties">10.5. @ConfigurationProperties</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.testing">10.6. 测试</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.testing">10.6. Testing</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.resources">10.7. 资源</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.resources">10.7. Resources</a></p>
<ul class="sectlevel3">
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.resources.further-reading">10.7.1. 进一步阅读</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.resources.further-reading">10.7.1. Further reading</a></p>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.kotlin.resources.examples">10.7.2. 例子</a></p>
  <p translation-origin="off"><a href="features.html#features.kotlin.resources.examples">10.7.2. Examples</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
  <p translation-result="on"><a href="features.html#features.whats-next">11. 接下来要读什么</a></p>
  <p translation-origin="off"><a href="features.html#features.whats-next">11. What to Read Next</a></p>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">本节深入探讨 Spring Boot 的细节。在这里，你可以了解你可能想要使用和自定义的主要功能。如果你还没有这样做，你可能需要阅读“ <a href="getting-started.html#getting-started">getting-started.html</a> ”和“ <a href="using.html#using">using.html</a> ”部分，这样你就有了良好的基础知识。</p>
<p translation-origin="off">This section dives into the details of Spring Boot.
Here you can learn about the key features that you may want to use and customize.
If you have not already done so, you might want to read the "<a href="getting-started.html#getting-started">getting-started.html</a>" and "<a href="using.html#using">using.html</a>" sections, so that you have a good grounding of the basics.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.spring-application" translation-result="on"><a href="features.html#features.spring-application"></a>1. SpringApplication</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.spring-application"></a>1. SpringApplication</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on"><code>SpringApplication</code> 类提供了一种方便的方式来引导从 <code>main()</code> 方法启动的 Spring 应用程序。在许多情况下，你可以委托给静态 <code>SpringApplication.run</code> 方法，如下例所示：</p>
<p translation-origin="off">The <code>SpringApplication</code> class provides a convenient way to bootstrap a Spring application that is started from a <code>main()</code> method.
In many situations, you can delegate to the static <code>SpringApplication.run</code> method, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

</span><span class="fold-block">@SpringBootApplication
public class MyApplication {

    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">当你的应用程序启动时，你应该会看到类似于以下输出的内容：</p>
<p translation-origin="off">When your application starts, you should see something similar to the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::   v2.6.3

2021-02-03 10:33:25.224  INFO 17321 --- [           main] o.s.b.d.s.s.SpringApplicationExample    : Starting SpringApplicationExample using Java 1.8.0_232 on mycomputer with PID 17321 (/apps/myjar.jar started by pwebb)
2021-02-03 10:33:25.226  INFO 17900 --- [           main] o.s.b.d.s.s.SpringApplicationExample    : No active profile set, falling back to default profiles: default
2021-02-03 10:33:26.046  INFO 17321 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2021-02-03 10:33:26.054  INFO 17900 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-02-03 10:33:26.055  INFO 17900 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.41]
2021-02-03 10:33:26.097  INFO 17900 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2021-02-03 10:33:26.097  INFO 17900 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 821 ms
2021-02-03 10:33:26.144  INFO 17900 --- [           main] s.tomcat.SampleTomcatApplication         : ServletContext initialized
2021-02-03 10:33:26.376  INFO 17900 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2021-02-03 10:33:26.384  INFO 17900 --- [           main] o.s.b.d.s.s.SpringApplicationExample    : Started SampleTomcatApplication in 1.514 seconds (JVM running for 1.823)</pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">默认情况下，会显示 <code>INFO</code> 日志消息，包括一些相关的启动详细信息，例如启动应用程序的用户。如果你需要 <code>INFO</code> 以外的日志级别，你可以设置它，如<a href="features.html#features.logging.log-levels">日志级别</a>中所述。应用程序版本是使用主应用程序类包中的实现版本确定的。可以通过将 <code>spring.main.log-startup-info</code> 设置为 <code>false</code> 来关闭启动信息日志记录。这也将关闭应用程序活动配置文件的日志记录。</p>
<p translation-origin="off">By default, <code>INFO</code> logging messages are shown, including some relevant startup details, such as the user that launched the application.
If you need a log level other than <code>INFO</code>, you can set it, as described in <a href="features.html#features.logging.log-levels">Log Levels</a>.
The application version is determined using the implementation version from the main application class’s package.
Startup information logging can be turned off by setting <code>spring.main.log-startup-info</code> to <code>false</code>.
This will also turn off logging of the application’s active profiles.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">要在启动期间添加额外的日志记录，你可以在 SpringApplication 的子类中覆盖 <code>SpringApplication</code> <code>logStartupInfo(boolean)</code> 。</p>
<p translation-origin="off">To add additional logging during startup, you can override <code>logStartupInfo(boolean)</code> in a subclass of <code>SpringApplication</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="features.spring-application.startup-failure" translation-result="on"><a href="features.html#features.spring-application.startup-failure"></a>1.1. 启动失败</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.startup-failure"></a>1.1. Startup Failure</h3>
<div class="paragraph">
<p translation-result="on">如果你的应用程序无法启动，注册的 <code>FailureAnalyzers</code> 将有机会提供专门的错误消息和解决问题的具体操作。例如，如果你在端口 <code>8080</code> 上启动 Web 应用程序并且该端口已被使用，你应该会看到类似于以下消息的内容：</p>
<p translation-origin="off">If your application fails to start, registered <code>FailureAnalyzers</code> get a chance to provide a dedicated error message and a concrete action to fix the problem.
For instance, if you start a web application on port <code>8080</code> and that port is already in use, you should see something similar to the following message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>***************************
APPLICATION FAILED TO START
***************************

Description:

Embedded servlet container failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that is listening on port 8080 or configure this application to listen on another port.</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">Spring Boot 提供了许多 <code>FailureAnalyzer</code> 实现，你可以<a href="howto.html#howto.application.failure-analyzer">添加自己的</a>.</p>
<p translation-origin="off">Spring Boot provides numerous <code>FailureAnalyzer</code> implementations, and you can <a href="howto.html#howto.application.failure-analyzer">add your own</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果没有故障分析器能够处理异常，你仍然可以显示完整的条件报告以更好地了解问题所在。为此，你需要为 <code>org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener</code> <a href="features.html#features.external-config">启用 <code>debug</code> 属性</a>或<a href="features.html#features.logging.log-levels">启用 <code>DEBUG</code> 日志记录</a>。</p>
<p translation-origin="off">If no failure analyzers are able to handle the exception, you can still display the full conditions report to better understand what went wrong.
To do so, you need to <a href="features.html#features.external-config">enable the <code>debug</code> property</a> or <a href="features.html#features.logging.log-levels">enable <code>DEBUG</code> logging</a> for <code>org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，如果你使用 <code>java -jar</code> 运行应用程序，则可以启用 <code>debug</code> 属性，如下所示：</p>
<p translation-origin="off">For instance, if you are running your application by using <code>java -jar</code>, you can enable the <code>debug</code> property as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ java -jar myproject-0.0.1-SNAPSHOT.jar --debug</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.lazy-initialization" translation-result="on"><a href="features.html#features.spring-application.lazy-initialization"></a>1.2. 延迟初始化</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.lazy-initialization"></a>1.2. Lazy Initialization</h3>
<div class="paragraph">
<p translation-result="on"><code>SpringApplication</code> 允许延迟初始化应用程序。当启用延迟初始化时，bean 会在需要时创建，而不是在应用程序启动期间创建。因此，启用延迟初始化可以减少应用程序启动所需的时间。在 Web 应用程序中，启用延迟初始化将导致许多与 Web 相关的 bean 在收到 HTTP 请求之前不会被初始化。</p>
<p translation-origin="off"><code>SpringApplication</code> allows an application to be initialized lazily.
When lazy initialization is enabled, beans are created as they are needed rather than during application startup.
As a result, enabling lazy initialization can reduce the time that it takes your application to start.
In a web application, enabling lazy initialization will result in many web-related beans not being initialized until an HTTP request is received.</p>
</div>
<div class="paragraph">
<p translation-result="on">延迟初始化的一个缺点是它会延迟应用程序问题的发现。如果配置错误的 bean 被延迟初始化，则在启动期间将不再发生故障，并且只有在 bean 初始化时问题才会变得明显。还必须注意确保 JVM 有足够的内存来容纳应用程序的所有 bean，而不仅仅是那些在启动期间初始化的 bean。由于这些原因，默认情况下不启用延迟初始化，建议在启用延迟初始化之前对 JVM 的堆大小进行微调。</p>
<p translation-origin="off">A downside of lazy initialization is that it can delay the discovery of a problem with the application.
If a misconfigured bean is initialized lazily, a failure will no longer occur during startup and the problem will only become apparent when the bean is initialized.
Care must also be taken to ensure that the JVM has sufficient memory to accommodate all of the application’s beans and not just those that are initialized during startup.
For these reasons, lazy initialization is not enabled by default and it is recommended that fine-tuning of the JVM’s heap size is done before enabling lazy initialization.</p>
</div>
<div class="paragraph">
<p translation-result="on">可以使用 <code>lazyInitialization</code> 上的 <code>SpringApplicationBuilder</code> 方法或 <code>setLazyInitialization</code> 上的 <code>SpringApplication</code> 方法以编程方式启用延迟初始化。或者，可以使用 <code>spring.main.lazy-initialization</code> 属性启用它，如以下示例所示：</p>
<p translation-origin="off">Lazy initialization can be enabled programmatically using the <code>lazyInitialization</code> method on <code>SpringApplicationBuilder</code> or the <code>setLazyInitialization</code> method on <code>SpringApplication</code>.
Alternatively, it can be enabled using the <code>spring.main.lazy-initialization</code> property as shown in the following example:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.main.lazy-initialization=true</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  main:
    lazy-initialization: true</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你想在应用程序的其余部分使用延迟初始化的同时禁用某些 bean 的延迟初始化，你可以使用 <code>@Lazy(false)</code> 注释将它们的延迟属性显式设置为 false。</p>
<p translation-origin="off">If you want to disable lazy initialization for certain beans while using lazy initialization for the rest of the application, you can explicitly set their lazy attribute to false using the <code>@Lazy(false)</code> annotation.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.banner" translation-result="on"><a href="features.html#features.spring-application.banner"></a>1.3. 自定义横幅</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.banner"></a>1.3. Customizing the Banner</h3>
<div class="paragraph">
<p translation-result="on">可以通过将 <code>banner.txt</code> 文件添加到你的类路径或将 <code>spring.banner.location</code> 属性设置为此类文件的位置来更改启动时打印的横幅。如果文件的编码不是 UTF-8，则可以设置 <code>spring.banner.charset</code> 。除了文本文件之外，你还可以将 <code>banner.gif</code> 、 <code>banner.jpg</code> 或 <code>banner.png</code> 图像文件添加到你的类路径或设置 <code>spring.banner.image.location</code> 属性。图像被转换为 ASCII 艺术表示并打印在任何文本横幅上方。</p>
<p translation-origin="off">The banner that is printed on start up can be changed by adding a <code>banner.txt</code> file to your classpath or by setting the <code>spring.banner.location</code> property to the location of such a file.
If the file has an encoding other than UTF-8, you can set <code>spring.banner.charset</code>.
In addition to a text file, you can also add a <code>banner.gif</code>, <code>banner.jpg</code>, or <code>banner.png</code> image file to your classpath or set the <code>spring.banner.image.location</code> property.
Images are converted into an ASCII art representation and printed above any text banner.</p>
</div>
<div class="paragraph">
<p translation-result="on">在你的 <code>banner.txt</code> 文件中，你可以使用以下任何占位符：</p>
<p translation-origin="off">Inside your <code>banner.txt</code> file, you can use any of the following placeholders:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Banner variables</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">多变的</p>
  <p translation-origin="off">Variable</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">描述</p>
  <p translation-origin="off">Description</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${application.version}</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">你的应用程序的版本号，在 <code>MANIFEST.MF</code> 中声明。例如，<code>Implementation-Version: 1.0</code> 打印为 <code>1.0</code> 。</p><p class="tableblock" translation-origin="off">The version number of your application, as declared in <code>MANIFEST.MF</code>.
For example, <code>Implementation-Version: 1.0</code> is printed as <code>1.0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${application.formatted-version}</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">应用程序的版本号，在 <code>MANIFEST.MF</code> 中声明并格式化为显示（用括号括起来并以 <code>v</code> 为前缀）。例如 <code>(v1.0)</code> 。</p><p class="tableblock" translation-origin="off">The version number of your application, as declared in <code>MANIFEST.MF</code> and formatted for display (surrounded with brackets and prefixed with <code>v</code>).
For example <code>(v1.0)</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${spring-boot.version}</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">你正在使用的 Spring Boot 版本。例如 <code>2.6.3</code> 。</p><p class="tableblock" translation-origin="off">The Spring Boot version that you are using.
For example <code>2.6.3</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${spring-boot.formatted-version}</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">你正在使用的 Spring Boot 版本，已格式化以供显示（用括号括起来并以 <code>v</code> 为前缀）。例如 <code>(v2.6.3)</code> 。</p><p class="tableblock" translation-origin="off">The Spring Boot version that you are using, formatted for display (surrounded with brackets and prefixed with <code>v</code>).
For example <code>(v2.6.3)</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on"><code>${Ansi.NAME}</code> （或 <code>${AnsiColor.NAME}</code> ，<code>${AnsiBackground.NAME}</code> ，<code>${AnsiStyle.NAME}</code> ）</p><p class="tableblock" translation-origin="off"><code>${Ansi.NAME}</code> (or <code>${AnsiColor.NAME}</code>, <code>${AnsiBackground.NAME}</code>, <code>${AnsiStyle.NAME}</code>)</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">其中 <code>NAME</code> 是 ANSI 转义码的名称。有关详细信息，请参阅<a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/ansi/AnsiPropertySource.java"><code>AnsiPropertySource</code></a> 。</p><p class="tableblock" translation-origin="off">Where <code>NAME</code> is the name of an ANSI escape code.
See <a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/ansi/AnsiPropertySource.java"><code>AnsiPropertySource</code></a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${application.title}</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">在 <code>MANIFEST.MF</code> 中声明的应用程序的标题。例如 <code>Implementation-Title: MyApp</code> 打印为 <code>MyApp</code> 。</p><p class="tableblock" translation-origin="off">The title of your application, as declared in <code>MANIFEST.MF</code>.
For example <code>Implementation-Title: MyApp</code> is printed as <code>MyApp</code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你想以编程方式生成横幅，可以使用 <code>SpringApplication.setBanner(…​)</code> 方法。使用 <code>org.springframework.boot.Banner</code> 接口并实现你自己的 <code>printBanner()</code> 方法。</p>
<p translation-origin="off">The <code>SpringApplication.setBanner(…​)</code> method can be used if you want to generate a banner programmatically.
Use the <code>org.springframework.boot.Banner</code> interface and implement your own <code>printBanner()</code> method.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">你还可以使用 <code>spring.main.banner-mode</code> 属性来确定横幅是否必须打印在 <code>System.out</code> ( <code>console</code> )、发送到配置的记录器 ( <code>log</code> ) 或根本不生成 ( <code>off</code> )。</p>
<p translation-origin="off">You can also use the <code>spring.main.banner-mode</code> property to determine if the banner has to be printed on <code>System.out</code> (<code>console</code>), sent to the configured logger (<code>log</code>), or not produced at all (<code>off</code>).</p>
</div>
<div class="paragraph">
<p translation-result="on">打印的横幅被注册为以下名称的单例 bean： <code>springBootBanner</code> 。</p>
<p translation-origin="off">The printed banner is registered as a singleton bean under the following name: <code>springBootBanner</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on"><code>${application.version}</code> 和 <code>${application.formatted-version}</code> 属性仅在你使用 Spring Boot 启动器时可用。如果你正在运行解压缩的 jar 并使用 <code>java -cp &lt;classpath&gt; &lt;mainclass&gt;</code> 启动它，则不会解析这些值。</p>
<p translation-origin="off">The <code>${application.version}</code> and <code>${application.formatted-version}</code> properties are only available if you are using Spring Boot launchers.
The values will not be resolved if you are running an unpacked jar and starting it with <code>java -cp &lt;classpath&gt; &lt;mainclass&gt;</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">这就是为什么我们建议你始终使用 <code>java org.springframework.boot.loader.JarLauncher</code> 启动解压后的 jar。这将在构建类路径和启动应用程序之前初始化 <code>application.*</code> 横幅变量。</p>
<p translation-origin="off">This is why we recommend that you always launch unpacked jars using <code>java org.springframework.boot.loader.JarLauncher</code>.
This will initialize the <code>application.*</code> banner variables before building the classpath and launching your app.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.customizing-spring-application" translation-result="on"><a href="features.html#features.spring-application.customizing-spring-application"></a>1.4. 自定义 SpringApplication</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.customizing-spring-application"></a>1.4. Customizing SpringApplication</h3>
<div class="paragraph">
<p translation-result="on">如果 <code>SpringApplication</code> 默认值不符合你的口味，你可以创建一个本地实例并对其进行自定义。例如，要关闭横幅，你可以编写：</p>
<p translation-origin="off">If the <code>SpringApplication</code> defaults are not to your taste, you can instead create a local instance and customize it.
For example, to turn off the banner, you could write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.Banner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

</span><span class="fold-block">@SpringBootApplication
public class MyApplication {

    public static void main(String[] args) {
        SpringApplication application = new SpringApplication(MyApplication.class);
        application.setBannerMode(Banner.Mode.OFF);
        application.run(args);
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">传递给 <code>SpringApplication</code> 的构造函数参数是 Spring bean 的配置源。在大多数情况下，这些是对 <code>@Configuration</code> 类的引用，但它们也可以是直接引用 <code>@Component</code> 类。</p>
<p translation-origin="off">The constructor arguments passed to <code>SpringApplication</code> are configuration sources for Spring beans.
In most cases, these are references to <code>@Configuration</code> classes, but they could also be direct references <code>@Component</code> classes.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">也可以使用 <code>application.properties</code> 文件配置 <code>SpringApplication</code> 。有关详细信息，请参阅<em><a href="features.html#features.external-config">外部化配置</a></em>。</p>
<p translation-origin="off">It is also possible to configure the <code>SpringApplication</code> by using an <code>application.properties</code> file.
See <em><a href="features.html#features.external-config">Externalized Configuration</a></em> for details.</p>
</div>
<div class="paragraph">
<p translation-result="on">有关配置选项的完整列表，请参阅<a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/SpringApplication.html"><code>SpringApplication</code> Javadoc</a> 。</p>
<p translation-origin="off">For a complete list of the configuration options, see the <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/SpringApplication.html"><code>SpringApplication</code> Javadoc</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.fluent-builder-api" translation-result="on"><a href="features.html#features.spring-application.fluent-builder-api"></a>1.5. 流畅的构建器 API</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.fluent-builder-api"></a>1.5. Fluent Builder API</h3>
<div class="paragraph">
<p translation-result="on">如果你需要构建 <code>ApplicationContext</code> 层次结构（具有父/子关系的多个上下文），或者如果你更喜欢使用“流利的”构建器 API，则可以使用 <code>SpringApplicationBuilder</code> 。</p>
<p translation-origin="off">If you need to build an <code>ApplicationContext</code> hierarchy (multiple contexts with a parent/child relationship) or if you prefer using a “fluent” builder API, you can use the <code>SpringApplicationBuilder</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>SpringApplicationBuilder</code> 允许你将多个方法调用链接在一起，并包括允许你创建层次结构的 <code>parent</code> 方法和 <code>child</code> 方法，如以下示例所示：</p>
<p translation-origin="off">The <code>SpringApplicationBuilder</code> lets you chain together multiple method calls and includes <code>parent</code> and <code>child</code> methods that let you create a hierarchy, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">new SpringApplicationBuilder()
        .sources(Parent.class)
        .child(Application.class)
        .bannerMode(Banner.Mode.OFF)
        .run(args);
</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">创建 <code>ApplicationContext</code> 层次结构时有一些限制。例如，Web 组件<strong>必须</strong>包含在子上下文中，并且相同的 <code>Environment</code> 用于父上下文和子上下文。有关完整的详细信息，请参阅<a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/builder/SpringApplicationBuilder.html"><code>SpringApplicationBuilder</code> Javadoc</a> 。</p>
<p translation-origin="off">There are some restrictions when creating an <code>ApplicationContext</code> hierarchy.
For example, Web components <strong>must</strong> be contained within the child context, and the same <code>Environment</code> is used for both parent and child contexts.
See the <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/builder/SpringApplicationBuilder.html"><code>SpringApplicationBuilder</code> Javadoc</a> for full details.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.application-availability" translation-result="on"><a href="features.html#features.spring-application.application-availability"></a>1.6. 应用程序可用性</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.application-availability"></a>1.6. Application Availability</h3>
<div class="paragraph">
<p translation-result="on">当部署在平台上时，应用程序可以使用 <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/">Kubernetes Probes</a> 等基础设施向平台提供有关其可用性的信息。Spring Boot 包括对常用“liveness”和“readiness”可用性状态的开箱即用支持。如果你使用 Spring Boot 的“执行器”支持，那么这些状态将作为健康端点组公开。</p>
<p translation-origin="off">When deployed on platforms, applications can provide information about their availability to the platform using infrastructure such as <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/">Kubernetes Probes</a>.
Spring Boot includes out-of-the box support for the commonly used “liveness” and “readiness” availability states.
If you are using Spring Boot’s “actuator” support then these states are exposed as health endpoint groups.</p>
</div>
<div class="paragraph">
<p translation-result="on">此外，你还可以通过将 <code>ApplicationAvailability</code> 接口注入到你自己的 bean 中来获取可用性状态。</p>
<p translation-origin="off">In addition, you can also obtain availability states by injecting the <code>ApplicationAvailability</code> interface into your own beans.</p>
</div>
<div class="sect3">
<h4 id="features.spring-application.application-availability.liveness" translation-result="on"><a href="features.html#features.spring-application.application-availability.liveness"></a>1.6.1. 活跃状态</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.application-availability.liveness"></a>1.6.1. Liveness State</h4>
<div class="paragraph">
<p translation-result="on">应用程序的“活跃度”状态表明其内部状态是否允许其正常工作，或者如果当前失败则自行恢复。损坏的“活动”状态意味着应用程序处于无法恢复的状态，基础设施应重新启动应用程序。</p>
<p translation-origin="off">The “Liveness” state of an application tells whether its internal state allows it to work correctly, or recover by itself if it is currently failing.
A broken “Liveness” state means that the application is in a state that it cannot recover from, and the infrastructure should restart the application.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">一般来说，“Liveness”状态不应基于外部检查，例如 <a href="actuator.html#actuator.endpoints.health">Health 检查</a>。如果是这样，一个失败的外部系统（数据库、Web API、外部缓存）将触发大规模重启和跨平台的级联故障。</p>
<p translation-origin="off">In general, the "Liveness" state should not be based on external checks, such as <a href="actuator.html#actuator.endpoints.health">Health checks</a>.
If it did, a failing external system (a database, a Web API, an external cache) would trigger massive restarts and cascading failures across the platform.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 应用程序的内部状态主要由 Spring <code>ApplicationContext</code> 表示。如果应用程序上下文已成功启动，Spring Boot 假定应用程序处于有效状态。一旦上下文被刷新，应用程序就被认为是活动的，请参阅 <a href="features.html#features.spring-application.application-events-and-listeners">Spring Boot 应用程序生命周期和相关的应用程序事件</a>。</p>
<p translation-origin="off">The internal state of Spring Boot applications is mostly represented by the Spring <code>ApplicationContext</code>.
If the application context has started successfully, Spring Boot assumes that the application is in a valid state.
An application is considered live as soon as the context has been refreshed, see <a href="features.html#features.spring-application.application-events-and-listeners">Spring Boot application lifecycle and related Application Events</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.spring-application.application-availability.readiness" translation-result="on"><a href="features.html#features.spring-application.application-availability.readiness"></a>1.6.2. 准备状态</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.application-availability.readiness"></a>1.6.2. Readiness State</h4>
<div class="paragraph">
<p translation-result="on">应用程序的“就绪”状态表明应用程序是否已准备好处理流量。失败的“就绪”状态告诉平台它现在不应该将流量路由到应用程序。这通常发生在启动期间，同时 <code>CommandLineRunner</code> 和 <code>ApplicationRunner</code> 组件正在被处理，或者在应用程序决定它太忙而无法获得额外流量的任何时候。</p>
<p translation-origin="off">The “Readiness” state of an application tells whether the application is ready to handle traffic.
A failing “Readiness” state tells the platform that it should not route traffic to the application for now.
This typically happens during startup, while <code>CommandLineRunner</code> and <code>ApplicationRunner</code> components are being processed, or at any time if the application decides that it is too busy for additional traffic.</p>
</div>
<div class="paragraph">
<p translation-result="on">一旦调用了应用程序和命令行运行器，就认为应用程序已准备就绪，请参阅 <a href="features.html#features.spring-application.application-events-and-listeners">Spring Boot 应用程序生命周期和相关的应用程序事件</a>。</p>
<p translation-origin="off">An application is considered ready as soon as application and command-line runners have been called, see <a href="features.html#features.spring-application.application-events-and-listeners">Spring Boot application lifecycle and related Application Events</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">预计在启动期间运行的任务应该由 <code>CommandLineRunner</code> 和 <code>ApplicationRunner</code> 组件执行，而不是使用 Spring 组件生命周期回调，例如 <code>@PostConstruct</code> 。</p>
<p translation-origin="off">Tasks expected to run during startup should be executed by <code>CommandLineRunner</code> and <code>ApplicationRunner</code> components instead of using Spring component lifecycle callbacks such as <code>@PostConstruct</code>.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.spring-application.application-availability.managing" translation-result="on"><a href="features.html#features.spring-application.application-availability.managing"></a>1.6.3. 管理应用程序可用性状态</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.application-availability.managing"></a>1.6.3. Managing the Application Availability State</h4>
<div class="paragraph">
<p translation-result="on">应用程序组件可以随时检索当前的可用性状态，方法是注入 <code>ApplicationAvailability</code> 接口并在其上调用方法。更多时候，应用程序会想要监听状态更新或更新应用程序的状态。</p>
<p translation-origin="off">Application components can retrieve the current availability state at any time, by injecting the <code>ApplicationAvailability</code> interface and calling methods on it.
More often, applications will want to listen to state updates or update the state of the application.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，我们可以将应用程序的“Readiness”状态导出到一个文件中，以便 Kubernetes “exec Probe”可以查看这个文件：</p>
<p translation-origin="off">For example, we can export the "Readiness" state of the application to a file so that a Kubernetes "exec Probe" can look at this file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.availability.AvailabilityChangeEvent;
import org.springframework.boot.availability.ReadinessState;
import org.springframework.context.event.EventListener;
import org.springframework.stereotype.Component;

</span><span class="fold-block">@Component
public class MyReadinessStateExporter {

    @EventListener
    public void onStateChange(AvailabilityChangeEvent&lt;ReadinessState&gt; event) {
        switch (event.getState()) {
        case ACCEPTING_TRAFFIC:
            // create file /tmp/healthy
            break;
        case REFUSING_TRAFFIC:
            // remove file /tmp/healthy
            break;
        }
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">我们还可以在应用中断且无法恢复时更新应用的状态：</p>
<p translation-origin="off">We can also update the state of the application, when the application breaks and cannot recover:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.availability.AvailabilityChangeEvent;
import org.springframework.boot.availability.LivenessState;
import org.springframework.context.ApplicationEventPublisher;
import org.springframework.stereotype.Component;

</span><span class="fold-block">@Component
public class MyLocalCacheVerifier {

    private final ApplicationEventPublisher eventPublisher;

    public MyLocalCacheVerifier(ApplicationEventPublisher eventPublisher) {
        this.eventPublisher = eventPublisher;
    }

    public void checkLocalCache() {
        try {
            // ...
        }
        catch (CacheCompletelyBrokenException ex) {
            AvailabilityChangeEvent.publish(this.eventPublisher, ex, LivenessState.BROKEN);
        }
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot<a href="actuator.html#actuator.endpoints.kubernetes-probes">通过 Actuator Health Endpoints 为“Liveness”和“Readiness”提供 Kubernetes HTTP 探测</a>。你可以<a href="deployment.html#deployment.cloud.kubernetes">在专用部分中获得有关在 Kubernetes 上部署 Spring Boot 应用程序的</a>更多指导。</p>
<p translation-origin="off">Spring Boot provides <a href="actuator.html#actuator.endpoints.kubernetes-probes">Kubernetes HTTP probes for "Liveness" and "Readiness" with Actuator Health Endpoints</a>.
You can get more guidance about <a href="deployment.html#deployment.cloud.kubernetes">deploying Spring Boot applications on Kubernetes in the dedicated section</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.application-events-and-listeners" translation-result="on"><a href="features.html#features.spring-application.application-events-and-listeners"></a>1.7. 应用程序事件和监听器</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.application-events-and-listeners"></a>1.7. Application Events and Listeners</h3>
<div class="paragraph">
<p translation-result="on">除了常见的 Spring Framework 事件（例如<a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/context/event/ContextRefreshedEvent.html"><code>ContextRefreshedEvent</code></a> ）之外，<code>SpringApplication</code> 发送一些额外的应用程序事件。</p>
<p translation-origin="off">In addition to the usual Spring Framework events, such as <a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/context/event/ContextRefreshedEvent.html"><code>ContextRefreshedEvent</code></a>, a <code>SpringApplication</code> sends some additional application events.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">某些事件实际上是在 <code>ApplicationContext</code> 创建之前触发的，因此你不能在这些事件上将侦听器注册为 <code>@Bean</code> 。你可以使用 <code>SpringApplication.addListeners(…​)</code> 方法或 <code>SpringApplicationBuilder.listeners(…​)</code> 方法注册它们。</p>
<p translation-origin="off">Some events are actually triggered before the <code>ApplicationContext</code> is created, so you cannot register a listener on those as a <code>@Bean</code>.
You can register them with the <code>SpringApplication.addListeners(…​)</code> method or the <code>SpringApplicationBuilder.listeners(…​)</code> method.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你希望自动注册这些侦听器，无论应用程序的创建方式如何，你都可以将 <code>META-INF/spring.factories</code> 文件添加到你的项目中，并使用 <code>org.springframework.context.ApplicationListener</code> 键，如下例所示：</p>
<p translation-origin="off">If you want those listeners to be registered automatically, regardless of the way the application is created, you can add a <code>META-INF/spring.factories</code> file to your project and reference your listener(s) by using the <code>org.springframework.context.ApplicationListener</code> key, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.springframework.context.ApplicationListener=com.example.project.MyListener</pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">当你的应用程序运行时，应用程序事件按以下顺序发送：</p>
<p translation-origin="off">Application events are sent in the following order, as your application runs:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p translation-result="on"><code>ApplicationStartingEvent</code> 在运行开始但在任何处理之前发送，除了监听器和初始化程序的注册。</p>
<p translation-origin="off">An <code>ApplicationStartingEvent</code> is sent at the start of a run but before any processing, except for the registration of listeners and initializers.</p>
</li>
<li>
<p translation-result="on">当上下文中要使用的 <code>Environment</code> 已知但在创建上下文之前发送 <code>ApplicationEnvironmentPreparedEvent</code> 。</p>
<p translation-origin="off">An <code>ApplicationEnvironmentPreparedEvent</code> is sent when the <code>Environment</code> to be used in the context is known but before the context is created.</p>
</li>
<li>
<p translation-result="on"><code>ApplicationContextInitializedEvent</code> 在 <code>ApplicationContext</code> 准备好并且 ApplicationContextInitializers 已被调用但在加载任何 bean 定义之前发送。</p>
<p translation-origin="off">An <code>ApplicationContextInitializedEvent</code> is sent when the <code>ApplicationContext</code> is prepared and ApplicationContextInitializers have been called but before any bean definitions are loaded.</p>
</li>
<li>
<p translation-result="on"><code>ApplicationPreparedEvent</code> 在刷新开始之前但在加载 bean 定义之后发送。</p>
<p translation-origin="off">An <code>ApplicationPreparedEvent</code> is sent just before the refresh is started but after bean definitions have been loaded.</p>
</li>
<li>
<p translation-result="on"><code>ApplicationStartedEvent</code> 在上下文刷新之后但在调用任何应用程序和命令行运行程序之前发送。</p>
<p translation-origin="off">An <code>ApplicationStartedEvent</code> is sent after the context has been refreshed but before any application and command-line runners have been called.</p>
</li>
<li>
<p translation-result="on">在 <code>LivenessState.CORRECT</code> 之后立即发送一个 <code>AvailabilityChangeEvent</code> 以指示应用程序被认为是活动的。</p>
<p translation-origin="off">An <code>AvailabilityChangeEvent</code> is sent right after with <code>LivenessState.CORRECT</code> to indicate that the application is considered as live.</p>
</li>
<li>
<p translation-result="on"><code>ApplicationReadyEvent</code> 在任何<a href="features.html#features.spring-application.command-line-runner">应用程序和命令行运行程序</a>被调用后发送。</p>
<p translation-origin="off">An <code>ApplicationReadyEvent</code> is sent after any <a href="features.html#features.spring-application.command-line-runner">application and command-line runners</a> have been called.</p>
</li>
<li>
<p translation-result="on">在 <code>ReadinessState.ACCEPTING_TRAFFIC</code> 之后立即发送一个 <code>AvailabilityChangeEvent</code> 以指示应用程序已准备好为请求提供服务。</p>
<p translation-origin="off">An <code>AvailabilityChangeEvent</code> is sent right after with <code>ReadinessState.ACCEPTING_TRAFFIC</code> to indicate that the application is ready to service requests.</p>
</li>
<li>
<p translation-result="on">如果启动时出现异常，则会发送 <code>ApplicationFailedEvent</code> 。</p>
<p translation-origin="off">An <code>ApplicationFailedEvent</code> is sent if there is an exception on startup.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p translation-result="on">上面的列表仅包括与 <code>SpringApplicationEvent</code> 绑定的 <code>SpringApplication</code> 。除了这些之外，还会在 <code>ApplicationStartedEvent</code> 之后和 <code>ApplicationPreparedEvent</code> 之前发布以下事件：</p>
<p translation-origin="off">The above list only includes <code>SpringApplicationEvent</code>s that are tied to a <code>SpringApplication</code>.
In addition to these, the following events are also published after <code>ApplicationPreparedEvent</code> and before <code>ApplicationStartedEvent</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><code>WebServerInitializedEvent</code> 准备就绪后发送 <code>WebServer</code> 。<code>ServletWebServerInitializedEvent</code> 和 <code>ReactiveWebServerInitializedEvent</code> 分别是 servlet 和响应式变体。</p>
<p translation-origin="off">A <code>WebServerInitializedEvent</code> is sent after the <code>WebServer</code> is ready.
<code>ServletWebServerInitializedEvent</code> and <code>ReactiveWebServerInitializedEvent</code> are the servlet and reactive variants respectively.</p>
</li>
<li>
<p translation-result="on">刷新 <code>ApplicationContext</code> 时发送 <code>ContextRefreshedEvent</code> 。</p>
<p translation-origin="off">A <code>ContextRefreshedEvent</code> is sent when an <code>ApplicationContext</code> is refreshed.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">你通常不需要使用应用程序事件，但知道它们的存在会很方便。在内部，Spring Boot 使用事件来处理各种任务。</p>
<p translation-origin="off">You often need not use application events, but it can be handy to know that they exist.
Internally, Spring Boot uses events to handle a variety of tasks.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">默认情况下，事件侦听器不应运行可能冗长的任务，因为它们在同一线程中执行。考虑改用<a href="features.html#features.spring-application.command-line-runner">应用程序和命令行运行器</a>。</p>
<p translation-origin="off">Event listeners should not run potentially lengthy tasks as they execute in the same thread by default.
Consider using <a href="features.html#features.spring-application.command-line-runner">application and command-line runners</a> instead.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">应用程序事件是使用 Spring Framework 的事件发布机制发送的。该机制的一部分确保在子上下文中发布给侦听器的事件也发布给任何祖先上下文中的侦听器。因此，如果你的应用程序使用 <code>SpringApplication</code> 实例的层次结构，则侦听器可能会接收到相同类型的应用程序事件的多个实例。</p>
<p translation-origin="off">Application events are sent by using Spring Framework’s event publishing mechanism.
Part of this mechanism ensures that an event published to the listeners in a child context is also published to the listeners in any ancestor contexts.
As a result of this, if your application uses a hierarchy of <code>SpringApplication</code> instances, a listener may receive multiple instances of the same type of application event.</p>
</div>
<div class="paragraph">
<p translation-result="on">为了让你的侦听器区分其上下文的事件和后代上下文的事件，它应该请求注入其应用程序上下文，然后将注入的上下文与事件的上下文进行比较。可以通过实现 <code>ApplicationContextAware</code> 来注入上下文，或者，如果侦听器是 bean，则可以使用 <code>@Autowired</code> 来注入。</p>
<p translation-origin="off">To allow your listener to distinguish between an event for its context and an event for a descendant context, it should request that its application context is injected and then compare the injected context with the context of the event.
The context can be injected by implementing <code>ApplicationContextAware</code> or, if the listener is a bean, by using <code>@Autowired</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.web-environment" translation-result="on"><a href="features.html#features.spring-application.web-environment"></a>1.8. 网络环境</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.web-environment"></a>1.8. Web Environment</h3>
<div class="paragraph">
<p translation-result="on"><code>SpringApplication</code> 尝试代表你创建正确类型的 <code>ApplicationContext</code> 。用于确定 <code>WebApplicationType</code> 的算法如下：</p>
<p translation-origin="off">A <code>SpringApplication</code> attempts to create the right type of <code>ApplicationContext</code> on your behalf.
The algorithm used to determine a <code>WebApplicationType</code> is the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">如果存在 Spring MVC，则使用 <code>AnnotationConfigServletWebServerApplicationContext</code> </p>
<p translation-origin="off">If Spring MVC is present, an <code>AnnotationConfigServletWebServerApplicationContext</code> is used</p>
</li>
<li>
<p translation-result="on">如果 Spring MVC 不存在而 Spring WebFlux 存在，则使用 <code>AnnotationConfigReactiveWebServerApplicationContext</code> </p>
<p translation-origin="off">If Spring MVC is not present and Spring WebFlux is present, an <code>AnnotationConfigReactiveWebServerApplicationContext</code> is used</p>
</li>
<li>
<p translation-result="on">否则，使用 <code>AnnotationConfigApplicationContext</code> </p>
<p translation-origin="off">Otherwise, <code>AnnotationConfigApplicationContext</code> is used</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">这意味着如果你在同一个应用程序中使用 Spring MVC 和来自 Spring WebFlux 的新 <code>WebClient</code> ，则默认使用 Spring MVC。你可以通过调用 <code>setWebApplicationType(WebApplicationType)</code> 轻松覆盖它。</p>
<p translation-origin="off">This means that if you are using Spring MVC and the new <code>WebClient</code> from Spring WebFlux in the same application, Spring MVC will be used by default.
You can override that easily by calling <code>setWebApplicationType(WebApplicationType)</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">也可以通过调用 <code>setApplicationContextClass(…​)</code> 来完全控制所使用的 <code>ApplicationContext</code> 类型。</p>
<p translation-origin="off">It is also possible to take complete control of the <code>ApplicationContext</code> type that is used by calling <code>setApplicationContextClass(…​)</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">在 JUnit 测试中使用 <code>SpringApplication</code> 时，通常需要调用 <code>setWebApplicationType(WebApplicationType.NONE)</code> 。</p>
<p translation-origin="off">It is often desirable to call <code>setWebApplicationType(WebApplicationType.NONE)</code> when using <code>SpringApplication</code> within a JUnit test.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.application-arguments" translation-result="on"><a href="features.html#features.spring-application.application-arguments"></a>1.9. 访问应用程序参数</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.application-arguments"></a>1.9. Accessing Application Arguments</h3>
<div class="paragraph">
<p translation-result="on">如果你需要访问传递给 <code>SpringApplication.run(…​)</code> 的应用程序参数，你可以注入 <code>org.springframework.boot.ApplicationArguments</code> bean。<code>ApplicationArguments</code> 接口提供对原始 <code>String[]</code> 参数以及解析的 <code>option</code> 和 <code>non-option</code> 参数的访问，如以下示例所示：</p>
<p translation-origin="off">If you need to access the application arguments that were passed to <code>SpringApplication.run(…​)</code>, you can inject a <code>org.springframework.boot.ApplicationArguments</code> bean.
The <code>ApplicationArguments</code> interface provides access to both the raw <code>String[]</code> arguments as well as parsed <code>option</code> and <code>non-option</code> arguments, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.util.List;

import org.springframework.boot.ApplicationArguments;
import org.springframework.stereotype.Component;

</span><span class="fold-block">@Component
public class MyBean {

    public MyBean(ApplicationArguments args) {
        boolean debug = args.containsOption("debug");
        List&lt;String&gt; files = args.getNonOptionArgs();
        if (debug) {
            System.out.println(files);
        }
        // if run with "--debug logfile.txt" prints ["logfile.txt"]
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">Spring Boot 还向 Spring <code>Environment</code> 注册了一个 <code>CommandLinePropertySource</code> 。这使你还可以使用 <code>@Value</code> 注释注入单个应用程序参数。</p>
<p translation-origin="off">Spring Boot also registers a <code>CommandLinePropertySource</code> with the Spring <code>Environment</code>.
This lets you also inject single application arguments by using the <code>@Value</code> annotation.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.command-line-runner" translation-result="on"><a href="features.html#features.spring-application.command-line-runner"></a>1.10. 使用 ApplicationRunner 或 CommandLineRunner</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.command-line-runner"></a>1.10. Using the ApplicationRunner or CommandLineRunner</h3>
<div class="paragraph">
<p translation-result="on">如果你需要在 <code>SpringApplication</code> 启动后运行某些特定代码，你可以实现 <code>ApplicationRunner</code> 或 <code>CommandLineRunner</code> 接口。两个接口以相同的方式工作并提供一个 <code>run</code> 方法，该方法在 <code>SpringApplication.run(…​)</code> 完成之前调用。</p>
<p translation-origin="off">If you need to run some specific code once the <code>SpringApplication</code> has started, you can implement the <code>ApplicationRunner</code> or <code>CommandLineRunner</code> interfaces.
Both interfaces work in the same way and offer a single <code>run</code> method, which is called just before <code>SpringApplication.run(…​)</code> completes.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">该合约非常适合应在应用程序启动之后但开始接受流量之前运行的任务。</p>
<p translation-origin="off">This contract is well suited for tasks that should run after application startup but before it starts accepting traffic.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on"><code>CommandLineRunner</code> 接口以字符串数组的形式提供对应用程序参数的访问，而 <code>ApplicationRunner</code> 使用前面讨论的 <code>ApplicationArguments</code> 接口。以下示例显示了带有 <code>run</code> 方法的 <code>CommandLineRunner</code> ：</p>
<p translation-origin="off">The <code>CommandLineRunner</code> interfaces provides access to application arguments as a string array, whereas the <code>ApplicationRunner</code> uses the <code>ApplicationArguments</code> interface discussed earlier.
The following example shows a <code>CommandLineRunner</code> with a <code>run</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

</span><span class="fold-block">@Component
public class MyCommandLineRunner implements CommandLineRunner {

    @Override
    public void run(String... args) {
        // Do something...
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果定义了几个必须按特定顺序调用的 <code>CommandLineRunner</code> 或 <code>ApplicationRunner</code> bean，你可以另外实现 <code>org.springframework.core.Ordered</code> 接口或使用 <code>org.springframework.core.annotation.Order</code> 注释。</p>
<p translation-origin="off">If several <code>CommandLineRunner</code> or <code>ApplicationRunner</code> beans are defined that must be called in a specific order, you can additionally implement the <code>org.springframework.core.Ordered</code> interface or use the <code>org.springframework.core.annotation.Order</code> annotation.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.application-exit" translation-result="on"><a href="features.html#features.spring-application.application-exit"></a>1.11. 应用程序退出</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.application-exit"></a>1.11. Application Exit</h3>
<div class="paragraph">
<p translation-result="on">每个 <code>SpringApplication</code> 向 JVM 注册一个关闭钩子，以确保 <code>ApplicationContext</code> 在退出时正常关闭。可以使用所有标准的 Spring 生命周期回调（例如 <code>DisposableBean</code> 接口或 <code>@PreDestroy</code> 注解）。</p>
<p translation-origin="off">Each <code>SpringApplication</code> registers a shutdown hook with the JVM to ensure that the <code>ApplicationContext</code> closes gracefully on exit.
All the standard Spring lifecycle callbacks (such as the <code>DisposableBean</code> interface or the <code>@PreDestroy</code> annotation) can be used.</p>
</div>
<div class="paragraph">
<p translation-result="on">此外，如果希望在调用 <code>SpringApplication.exit()</code> 时返回特定的退出代码，bean 可以实现 <code>org.springframework.boot.ExitCodeGenerator</code> 接口。然后可以将此退出代码传递给 <code>System.exit()</code> 以将其作为状态代码返回，如以下示例所示：</p>
<p translation-origin="off">In addition, beans may implement the <code>org.springframework.boot.ExitCodeGenerator</code> interface if they wish to return a specific exit code when <code>SpringApplication.exit()</code> is called.
This exit code can then be passed to <code>System.exit()</code> to return it as a status code, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.ExitCodeGenerator;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;

</span><span class="fold-block">@SpringBootApplication
public class MyApplication {

    @Bean
    public ExitCodeGenerator exitCodeGenerator() {
        return () -&gt; 42;
    }

    public static void main(String[] args) {
        System.exit(SpringApplication.exit(SpringApplication.run(MyApplication.class, args)));
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">此外，<code>ExitCodeGenerator</code> 接口可能由异常实现。当遇到这样的异常时，Spring Boot 返回实现的 <code>getExitCode()</code> 方法提供的退出代码。</p>
<p translation-origin="off">Also, the <code>ExitCodeGenerator</code> interface may be implemented by exceptions.
When such an exception is encountered, Spring Boot returns the exit code provided by the implemented <code>getExitCode()</code> method.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.admin" translation-result="on"><a href="features.html#features.spring-application.admin"></a>1.12. 管理员功能</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.admin"></a>1.12. Admin Features</h3>
<div class="paragraph">
<p translation-result="on">可以通过指定 <code>spring.application.admin.enabled</code> 属性为应用程序启用与管理相关的功能。这会在平台 <code>MBeanServer</code> 上公开<a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/admin/SpringApplicationAdminMXBean.java"><code>SpringApplicationAdminMXBean</code></a> 。你可以使用此功能远程管理你的 Spring Boot 应用程序。此功能也可用于任何服务包装器实现。</p>
<p translation-origin="off">It is possible to enable admin-related features for the application by specifying the <code>spring.application.admin.enabled</code> property.
This exposes the <a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/admin/SpringApplicationAdminMXBean.java"><code>SpringApplicationAdminMXBean</code></a> on the platform <code>MBeanServer</code>.
You could use this feature to administer your Spring Boot application remotely.
This feature could also be useful for any service wrapper implementation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你想知道应用程序在哪个 HTTP 端口上运行，请使用 <code>local.server.port</code> 键获取属性。</p>
<p translation-origin="off">If you want to know on which HTTP port the application is running, get the property with a key of <code>local.server.port</code>.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.spring-application.startup-tracking" translation-result="on"><a href="features.html#features.spring-application.startup-tracking"></a>1.13. 应用程序启动跟踪</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.spring-application.startup-tracking"></a>1.13. Application Startup tracking</h3>
<div class="paragraph">
<p translation-result="on">在应用程序启动期间，<code>SpringApplication</code> 和 <code>ApplicationContext</code> 执行许多与应用程序生命周期、bean 生命周期甚至处理应用程序事件相关的任务。使用<a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/core/metrics/ApplicationStartup.html"><code>ApplicationStartup</code></a> ，Spring Framework <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/core.html#context-functionality-startup">允许你使用 <code>StartupStep</code> 对象跟踪应用程序启动顺序</a>。可以出于分析目的收集这些数据，或者只是为了更好地了解应用程序启动过程。</p>
<p translation-origin="off">During the application startup, the <code>SpringApplication</code> and the <code>ApplicationContext</code> perform many tasks related to the application lifecycle,
the beans lifecycle or even processing application events.
With <a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/core/metrics/ApplicationStartup.html"><code>ApplicationStartup</code></a>, Spring Framework <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/core.html#context-functionality-startup">allows you to track the application startup sequence with <code>StartupStep</code> objects</a>.
This data can be collected for profiling purposes, or just to have a better understanding of an application startup process.</p>
</div>
<div class="paragraph">
<p translation-result="on">你可以在设置 <code>SpringApplication</code> 实例时选择一个 <code>ApplicationStartup</code> 实现。例如，要使用 <code>BufferingApplicationStartup</code> ，你可以编写：</p>
<p translation-origin="off">You can choose an <code>ApplicationStartup</code> implementation when setting up the <code>SpringApplication</code> instance.
For example, to use the <code>BufferingApplicationStartup</code>, you could write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.context.metrics.buffering.BufferingApplicationStartup;

</span><span class="fold-block">@SpringBootApplication
public class MyApplication {

    public static void main(String[] args) {
        SpringApplication application = new SpringApplication(MyApplication.class);
        application.setApplicationStartup(new BufferingApplicationStartup(2048));
        application.run(args);
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">第一个可用的实现 <code>FlightRecorderApplicationStartup</code> 由 Spring Framework 提供。它将 Spring 特定的启动事件添加到 Java Flight Recorder 会话中，用于分析应用程序并将它们的 Spring 上下文生命周期与 JVM 事件（例如分配、GC、类加载……）相关联。配置完成后，你可以通过运行启用了 Flight Recorder 的应用程序来记录数据：</p>
<p translation-origin="off">The first available implementation, <code>FlightRecorderApplicationStartup</code> is provided by Spring Framework.
It adds Spring-specific startup events to a Java Flight Recorder session and is meant for profiling applications and correlating their Spring context lifecycle with JVM events (such as allocations, GCs, class loading…​).
Once configured, you can record data by running the application with the Flight Recorder enabled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ java -XX:StartFlightRecording:filename=recording.jfr,duration=10s -jar demo.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 附带 <code>BufferingApplicationStartup</code> 变体；此实现旨在缓冲启动步骤并将它们排入外部度量系统。应用程序可以在任何组件中请求 <code>BufferingApplicationStartup</code> 类型的 bean。</p>
<p translation-origin="off">Spring Boot ships with the <code>BufferingApplicationStartup</code> variant; this implementation is meant for buffering the startup steps and draining them into an external metrics system.
Applications can ask for the bean of type <code>BufferingApplicationStartup</code> in any component.</p>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 也可以配置为公开一个<a href="https://docs.spring.io/spring-boot/docs/2.6.3/actuator-api/htmlsingle/#startup"><code>startup</code> 端点</a>，该端点以 JSON 文档的形式提供此信息。</p>
<p translation-origin="off">Spring Boot can also be configured to expose a <a href="https://docs.spring.io/spring-boot/docs/2.6.3/actuator-api/htmlsingle/#startup"><code>startup</code> endpoint</a> that provides this information as a JSON document.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.external-config" translation-result="on"><a href="features.html#features.external-config"></a>2. 外化配置</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.external-config"></a>2. Externalized Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">Spring Boot 允许你将配置外部化，以便你可以在不同的环境中使用相同的应用程序代码。你可以使用各种外部配置源，包括 Java 属性文件、YAML 文件、环境变量和命令行参数。</p>
<p translation-origin="off">Spring Boot lets you externalize your configuration so that you can work with the same application code in different environments.
You can use a variety of external configuration sources, include Java properties files, YAML files, environment variables, and command-line arguments.</p>
</div>
<div class="paragraph">
<p translation-result="on">属性值可以通过使用 <code>@Value</code> 注释直接注入到你的 bean 中，通过 Spring 的 <code>Environment</code> 抽象访问，或者通过 <code>@ConfigurationProperties</code> <a href="features.html#features.external-config.typesafe-configuration-properties">绑定到结构化对象</a>。</p>
<p translation-origin="off">Property values can be injected directly into your beans by using the <code>@Value</code> annotation, accessed through Spring’s <code>Environment</code> abstraction, or be <a href="features.html#features.external-config.typesafe-configuration-properties">bound to structured objects</a> through <code>@ConfigurationProperties</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 使用一个非常特殊的 <code>PropertySource</code> 顺序，该顺序旨在允许明智地覆盖值。属性按以下顺序考虑（较低项目的值覆盖较早的项目）：</p>
<p translation-origin="off">Spring Boot uses a very particular <code>PropertySource</code> order that is designed to allow sensible overriding of values.
Properties are considered in the following order (with values from lower items overriding earlier ones):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p translation-result="on">默认属性（通过设置 <code>SpringApplication.setDefaultProperties</code> 指定）。</p>
<p translation-origin="off">Default properties (specified by setting <code>SpringApplication.setDefaultProperties</code>).</p>
</li>
<li>
<p translation-result="on"><code>@Configuration</code> 类上的<a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/context/annotation/PropertySource.html"><code>@PropertySource</code></a>注释。请注意，在刷新应用程序上下文之前，不会将此类属性源添加到 <code>Environment</code> 中。配置某些属性（例如 <code>logging.*</code> 和 <code>spring.main.*</code> 在刷新开始之前读取）为时已晚。</p>
<p translation-origin="off"><a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/context/annotation/PropertySource.html"><code>@PropertySource</code></a> annotations on your <code>@Configuration</code> classes.
Please note that such property sources are not added to the <code>Environment</code> until the application context is being refreshed.
This is too late to configure certain properties such as <code>logging.*</code> and <code>spring.main.*</code> which are read before refresh begins.</p>
</li>
<li>
<p translation-result="on">配置数据（例如 <code>application.properties</code> 文件）。</p>
<p translation-origin="off">Config data (such as <code>application.properties</code> files).</p>
</li>
<li>
<p translation-result="on">仅在 <code>random.*</code> 中具有属性的 <code>RandomValuePropertySource</code> 。</p>
<p translation-origin="off">A <code>RandomValuePropertySource</code> that has properties only in <code>random.*</code>.</p>
</li>
<li>
<p translation-result="on">操作系统环境变量。</p>
<p translation-origin="off">OS environment variables.</p>
</li>
<li>
<p translation-result="on">Java 系统属性 ( <code>System.getProperties()</code> )。</p>
<p translation-origin="off">Java System properties (<code>System.getProperties()</code>).</p>
</li>
<li>
<p translation-result="on">来自 <code>java:comp/env</code> 的 JNDI 属性。</p>
<p translation-origin="off">JNDI attributes from <code>java:comp/env</code>.</p>
</li>
<li>
<p translation-result="on"><code>ServletContext</code> 初始化参数。</p>
<p translation-origin="off"><code>ServletContext</code> init parameters.</p>
</li>
<li>
<p translation-result="on"><code>ServletConfig</code> 初始化参数。</p>
<p translation-origin="off"><code>ServletConfig</code> init parameters.</p>
</li>
<li>
<p translation-result="on">来自 <code>SPRING_APPLICATION_JSON</code> 的属性（嵌入在环境变量或系统属性中的内联 JSON）。</p>
<p translation-origin="off">Properties from <code>SPRING_APPLICATION_JSON</code> (inline JSON embedded in an environment variable or system property).</p>
</li>
<li>
<p translation-result="on">命令行参数。</p>
<p translation-origin="off">Command line arguments.</p>
</li>
<li>
<p translation-result="on">测试中的 <code>properties</code> 属性。在<a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/test/context/SpringBootTest.html"><code>@SpringBootTest</code></a>和<a href="features.html#features.testing.spring-boot-applications.autoconfigured-tests">用于测试应用程序特定部分的测试注释</a>上可用。</p>
<p translation-origin="off"><code>properties</code> attribute on your tests.
Available on <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/test/context/SpringBootTest.html"><code>@SpringBootTest</code></a> and the <a href="features.html#features.testing.spring-boot-applications.autoconfigured-tests">test annotations for testing a particular slice of your application</a>.</p>
</li>
<li>
<p translation-result="on">测试中的<a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/test/context/TestPropertySource.html"><code>@TestPropertySource</code></a>注释。</p>
<p translation-origin="off"><a href="https://docs.spring.io/spring-framework/docs/5.3.15/javadoc-api/org/springframework/test/context/TestPropertySource.html"><code>@TestPropertySource</code></a> annotations on your tests.</p>
</li>
<li>
<p translation-result="on">当 devtools 处于活动状态时，<code>$HOME/.config/spring-boot</code> 目录中的 <a href="using.html#using.devtools.globalsettings">Devtools 全局设置属性</a>。</p>
<p translation-origin="off"><a href="using.html#using.devtools.globalsettings">Devtools global settings properties</a> in the <code>$HOME/.config/spring-boot</code> directory when devtools is active.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p translation-result="on">配置数据文件按以下顺序考虑：</p>
<p translation-origin="off">Config data files are considered in the following order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p translation-result="on">打包在 jar 中的应用<a href="features.html#features.external-config.files">程序属性</a>（ <code>application.properties</code> 和 YAML 变体）。</p>
<p translation-origin="off"><a href="features.html#features.external-config.files">Application properties</a> packaged inside your jar (<code>application.properties</code> and YAML variants).</p>
</li>
<li>
<p translation-result="on">打包在 jar<a href="features.html#features.external-config.files.profile-specific">中的特定于配置文件的应用程序属性</a>（ <code>application-{profile}.properties</code> 和 YAML 变体）。</p>
<p translation-origin="off"><a href="features.html#features.external-config.files.profile-specific">Profile-specific application properties</a> packaged inside your jar (<code>application-{profile}.properties</code> and YAML variants).</p>
</li>
<li>
<p translation-result="on">打包 jar 之外的<a href="features.html#features.external-config.files">应用程序属性</a>（ <code>application.properties</code> 和 YAML 变体）。</p>
<p translation-origin="off"><a href="features.html#features.external-config.files">Application properties</a> outside of your packaged jar (<code>application.properties</code> and YAML variants).</p>
</li>
<li>
<p translation-result="on">打包 jar 之外的<a href="features.html#features.external-config.files.profile-specific">特定于配置文件的应用程序属性</a>（ <code>application-{profile}.properties</code> 和 YAML 变体）。</p>
<p translation-origin="off"><a href="features.html#features.external-config.files.profile-specific">Profile-specific application properties</a> outside of your packaged jar (<code>application-{profile}.properties</code> and YAML variants).</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">建议在整个应用程序中坚持使用一种格式。如果你在同一位置有 <code>.properties</code> 和 <code>.yml</code> 格式的配置文件，则 <code>.properties</code> 优先。</p>
<p translation-origin="off">It is recommended to stick with one format for your entire application.
If you have configuration files with both <code>.properties</code> and <code>.yml</code> format in the same location, <code>.properties</code> takes precedence.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">为了提供一个具体示例，假设你开发了一个使用 <code>name</code> 属性的 <code>@Component</code> ，如下例所示：</p>
<p translation-origin="off">To provide a concrete example, suppose you develop a <code>@Component</code> that uses a <code>name</code> property, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

</span><span class="fold-block">@Component
public class MyBean {

    @Value("${name}")
    private String name;

    // ...

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">在你的应用程序类路径上（例如，在你的 jar 中），你可以有一个 <code>application.properties</code> 文件，该文件为 <code>name</code> 提供合理的默认属性值。在新环境中运行时，可以在你的 jar 之外提供一个 <code>application.properties</code> 文件来覆盖 <code>name</code> 。对于一次性测试，你可以使用特定的命令行开关启动（例如 <code>java -jar app.jar --name="Spring"</code> ）。</p>
<p translation-origin="off">On your application classpath (for example, inside your jar) you can have an <code>application.properties</code> file that provides a sensible default property value for <code>name</code>.
When running in a new environment, an <code>application.properties</code> file can be provided outside of your jar that overrides the <code>name</code>.
For one-off testing, you can launch with a specific command line switch (for example, <code>java -jar app.jar --name="Spring"</code>).</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>env</code> 和 <code>configprops</code> 端点可用于确定属性为何具有特定值。你可以使用这两个端点来诊断意外的属性值。有关详细信息，请参阅“<a href="actuator.html#actuator.endpoints">生产就绪功能</a>”部分。</p>
<p translation-origin="off">The <code>env</code> and <code>configprops</code> endpoints can be useful in determining why a property has a particular value.
You can use these two endpoints to diagnose unexpected property values.
See the "<a href="actuator.html#actuator.endpoints">Production ready features</a>" section for details.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="features.external-config.command-line-args" translation-result="on"><a href="features.html#features.external-config.command-line-args"></a>2.1. 访问命令行属性</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.external-config.command-line-args"></a>2.1. Accessing Command Line Properties</h3>
<div class="paragraph">
<p translation-result="on">默认情况下，<code>SpringApplication</code> 将任何命令行选项参数（即以 <code>--</code> 开头的参数，例如 <code>--server.port=9000</code> ）转换为 <code>property</code> 并将它们添加到 Spring <code>Environment</code> 。如前所述，命令行属性始终优先于基于文件的属性源。</p>
<p translation-origin="off">By default, <code>SpringApplication</code> converts any command line option arguments (that is, arguments starting with <code>--</code>, such as <code>--server.port=9000</code>) to a <code>property</code> and adds them to the Spring <code>Environment</code>.
As mentioned previously, command line properties always take precedence over file-based property sources.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你不希望将命令行属性添加到 <code>Environment</code> ，可以使用 <code>SpringApplication.setAddCommandLineProperties(false)</code> 禁用它们。</p>
<p translation-origin="off">If you do not want command line properties to be added to the <code>Environment</code>, you can disable them by using <code>SpringApplication.setAddCommandLineProperties(false)</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.external-config.application-json" translation-result="on"><a href="features.html#features.external-config.application-json"></a>2.2. JSON 应用程序属性</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.external-config.application-json"></a>2.2. JSON Application Properties</h3>
<div class="paragraph">
<p translation-result="on">环境变量和系统属性通常有限制，这意味着某些属性名称不能使用。为了解决这个问题，Spring Boot 允许你将属性块编码为单个 JSON 结构。</p>
<p translation-origin="off">Environment variables and system properties often have restrictions that mean some property names cannot be used.
To help with this, Spring Boot allows you to encode a block of properties into a single JSON structure.</p>
</div>
<div class="paragraph">
<p translation-result="on">当你的应用程序启动时，任何 <code>spring.application.json</code> 或 <code>SPRING_APPLICATION_JSON</code> 属性都将被解析并添加到 <code>Environment</code> 。</p>
<p translation-origin="off">When your application starts, any <code>spring.application.json</code> or <code>SPRING_APPLICATION_JSON</code> properties will be parsed and added to the <code>Environment</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，可以在 UN*X shell 的命令行中将 <code>SPRING_APPLICATION_JSON</code> 属性作为环境变量提供：</p>
<p translation-origin="off">For example, the <code>SPRING_APPLICATION_JSON</code> property can be supplied on the command line in a UN*X shell as an environment variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ SPRING_APPLICATION_JSON='{"my":{"name":"test"}}' java -jar myapp.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">在前面的示例中，你最终会在 Spring <code>Environment</code> 中使用 <code>my.name=test</code> 。</p>
<p translation-origin="off">In the preceding example, you end up with <code>my.name=test</code> in the Spring <code>Environment</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">同样的 JSON 也可以作为系统属性提供：</p>
<p translation-origin="off">The same JSON can also be provided as a system property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ java -Dspring.application.json='{"my":{"name":"test"}}' -jar myapp.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">或者你可以使用命令行参数提供 JSON：</p>
<p translation-origin="off">Or you could supply the JSON by using a command line argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ java -jar myapp.jar --spring.application.json='{"my":{"name":"test"}}'</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果要部署到经典应用程序服务器，还可以使用名为 <code>java:comp/env/spring.application.json</code> 的 JNDI 变量。</p>
<p translation-origin="off">If you are deploying to a classic Application Server, you could also use a JNDI variable named <code>java:comp/env/spring.application.json</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">尽管 JSON 中的 <code>null</code> 值将添加到结果属性源，但 <code>PropertySourcesPropertyResolver</code> 将 <code>null</code> 属性视为缺失值。这意味着 JSON 不能使用 <code>null</code> 值覆盖来自低阶属性源的属性。</p>
<p translation-origin="off">Although <code>null</code> values from the JSON will be added to the resulting property source, the <code>PropertySourcesPropertyResolver</code> treats <code>null</code> properties as missing values.
This means that the JSON cannot override properties from lower order property sources with a <code>null</code> value.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.external-config.files" translation-result="on"><a href="features.html#features.external-config.files"></a>2.3. 外部应用程序属性</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files"></a>2.3. External Application Properties <a id="features.external-config.files"></a></h3>
<div class="paragraph">
<p translation-result="on">当你的应用程序启动时，Spring Boot 会自动从以下位置查找并加载 <code>application.properties</code> 和 <code>application.yaml</code> 文件：</p>
<p translation-origin="off">Spring Boot will automatically find and load <code>application.properties</code> and <code>application.yaml</code> files from the following locations when your application starts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p translation-result="on">从类路径</p>
<p translation-origin="off">From the classpath</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p translation-result="on">类路径根</p>
<p translation-origin="off">The classpath root</p>
</li>
<li>
<p translation-result="on">类路径 <code>/config</code> 包</p>
<p translation-origin="off">The classpath <code>/config</code> package</p>
</li>
</ol>
</div>
</li>
<li>
<p translation-result="on">从当前目录</p>
<p translation-origin="off">From the current directory</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p translation-result="on">当前目录</p>
<p translation-origin="off">The current directory</p>
</li>
<li>
<p translation-result="on">当前目录下的 <code>/config</code> 子目录</p>
<p translation-origin="off">The <code>/config</code> subdirectory in the current directory</p>
</li>
<li>
<p translation-result="on"><code>/config</code> 子目录的直接子目录</p>
<p translation-origin="off">Immediate child directories of the <code>/config</code> subdirectory</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p translation-result="on">该列表按优先级排序（较低项目的值覆盖较早的项目）。加载文件中的文档作为 <code>PropertySources</code> 添加到 Spring <code>Environment</code> 。</p>
<p translation-origin="off">The list is ordered by precedence (with values from lower items overriding earlier ones).
Documents from the loaded files are added as <code>PropertySources</code> to the Spring <code>Environment</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你不喜欢 <code>application</code> 作为配置文件名，你可以通过指定 <code>spring.config.name</code> 环境属性来切换到另一个文件名。例如，要查找 <code>myproject.properties</code> 和 <code>myproject.yaml</code> 文件，你可以按如下方式运行你的应用程序：</p>
<p translation-origin="off">If you do not like <code>application</code> as the configuration file name, you can switch to another file name by specifying a <code>spring.config.name</code> environment property.
For example, to look for <code>myproject.properties</code> and <code>myproject.yaml</code> files you can run your application as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ java -jar myproject.jar --spring.config.name=myproject</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">你还可以使用 <code>spring.config.location</code> 环境属性来引用显式位置。此属性接受要检查的一个或多个位置的逗号分隔列表。</p>
<p translation-origin="off">You can also refer to an explicit location by using the <code>spring.config.location</code> environment property.
This properties accepts a comma-separated list of one or more locations to check.</p>
</div>
<div class="paragraph">
<p translation-result="on">以下示例显示如何指定两个不同的文件：</p>
<p translation-origin="off">The following example shows how to specify two distinct files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ java -jar myproject.jar --spring.config.location=\
    optional:classpath:/default.properties,\
    optional:classpath:/override.properties</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">使用前缀 <code>optional:</code> 如果<a href="features.html#features.external-config.files.optional-prefix">位置是可选</a>的并且你不介意它们不存在。</p>
<p translation-origin="off">Use the prefix <code>optional:</code> if the <a href="features.html#features.external-config.files.optional-prefix">locations are optional</a> and you do not mind if they do not exist.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<p translation-result="on"><code>spring.config.name</code> 、 <code>spring.config.location</code> 和 <code>spring.config.additional-location</code> 很早就用于确定必须加载哪些文件。它们必须定义为环境属性（通常是操作系统环境变量、系统属性或命令行参数）。</p>
<p translation-origin="off"><code>spring.config.name</code>, <code>spring.config.location</code>, and <code>spring.config.additional-location</code> are used very early to determine which files have to be loaded.
They must be defined as an environment property (typically an OS environment variable, a system property, or a command-line argument).</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果 <code>spring.config.location</code> 包含目录（而不是文件），它们应该以 <code>/</code> 结尾。在运行时，它们将在加载之前附加从 <code>spring.config.name</code> 生成的名称。<code>spring.config.location</code> 中指定的文件直接导入。</p>
<p translation-origin="off">If <code>spring.config.location</code> contains directories (as opposed to files), they should end in <code>/</code>.
At runtime they will be appended with the names generated from <code>spring.config.name</code> before being loaded.
Files specified in <code>spring.config.location</code> are imported directly.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">目录和文件位置值也被扩展以检查<a href="features.html#features.external-config.files.profile-specific">特定于配置文件的文件</a>。例如，如果你有一个 <code>spring.config.location</code> 的 <code>classpath:myconfig.properties</code> ，你还会发现加载了适当的 <code>classpath:myconfig-&lt;profile&gt;.properties</code> 文件。</p>
<p translation-origin="off">Both directory and file location values are also expanded to check for <a href="features.html#features.external-config.files.profile-specific">profile-specific files</a>.
For example, if you have a <code>spring.config.location</code> of <code>classpath:myconfig.properties</code>, you will also find appropriate <code>classpath:myconfig-&lt;profile&gt;.properties</code> files are loaded.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">在大多数情况下，你添加的每个 <code>spring.config.location</code> 项都将引用单个文件或目录。位置按照定义的顺序进行处理，后面的位置可以覆盖早期位置的值。</p>
<p translation-origin="off">In most situations, each <code>spring.config.location</code> item you add will reference a single file or directory.
Locations are processed in the order that they are defined and later ones can override the values of earlier ones.</p>
</div>
<div id="features.external-config.files.location-groups" class="paragraph">
<p translation-result="on">如果你有一个复杂的位置设置，并且你使用特定于配置文件的配置文件，你可能需要提供进一步的提示，以便 Spring Boot 知道应该如何对它们进行分组。位置组是所有被视为同一级别的位置的集合。例如，你可能希望对所有类路径位置进行分组，然后对所有外部位置进行分组。位置组中的项目应使用 <code>;</code> 分隔。.有关详细信息，请参阅“<a href="features.html#features.external-config.files.profile-specific">配置文件特定文件</a>”部分中的示例。</p>
<p translation-origin="off">If you have a complex location setup, and you use profile-specific configuration files, you may need to provide further hints so that Spring Boot knows how they should be grouped.
A location group is a collection of locations that are all considered at the same level.
For example, you might want to group all classpath locations, then all external locations.
Items within a location group should be separated with <code>;</code>.
See the example in the “<a href="features.html#features.external-config.files.profile-specific">Profile Specific Files</a>” section for more details.</p>
</div>
<div class="paragraph">
<p translation-result="on">使用 <code>spring.config.location</code> 配置的位置替换默认位置。例如，如果 <code>spring.config.location</code> 配置了值 <code>optional:classpath:/custom-config/,optional:file:./custom-config/</code> ，则考虑的完整位置集是：</p>
<p translation-origin="off">Locations configured by using <code>spring.config.location</code> replace the default locations.
For example, if <code>spring.config.location</code> is configured with the value <code>optional:classpath:/custom-config/,optional:file:./custom-config/</code>, the complete set of locations considered is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>optional:classpath:custom-config/</code></p>
</li>
<li>
<p><code>optional:file:./custom-config/</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p translation-result="on">如果你更喜欢添加其他位置，而不是替换它们，你可以使用 <code>spring.config.additional-location</code> 。从其他位置加载的属性可以覆盖默认位置中的属性。例如，如果 <code>spring.config.additional-location</code> 配置了值 <code>optional:classpath:/custom-config/,optional:file:./custom-config/</code> ，则考虑的完整位置集是：</p>
<p translation-origin="off">If you prefer to add additional locations, rather than replacing them, you can use <code>spring.config.additional-location</code>.
Properties loaded from additional locations can override those in the default locations.
For example, if <code>spring.config.additional-location</code> is configured with the value <code>optional:classpath:/custom-config/,optional:file:./custom-config/</code>, the complete set of locations considered is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>optional:classpath:/;optional:classpath:/config/</code></p>
</li>
<li>
<p><code>optional:file:./;optional:file:./config/;optional:file:./config/*/</code></p>
</li>
<li>
<p><code>optional:classpath:custom-config/</code></p>
</li>
<li>
<p><code>optional:file:./custom-config/</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p translation-result="on">这种搜索顺序允许你在一个配置文件中指定默认值，然后在另一个配置文件中选择性地覆盖这些值。你可以在默认位置之一的 <code>application.properties</code> （或你使用 <code>spring.config.name</code> 选择的任何其他基本名称）中为你的应用程序提供默认值。然后可以在运行时使用位于自定义位置之一的不同文件覆盖这些默认值。</p>
<p translation-origin="off">This search ordering lets you specify default values in one configuration file and then selectively override those values in another.
You can provide default values for your application in <code>application.properties</code> (or whatever other basename you choose with <code>spring.config.name</code>) in one of the default locations.
These default values can then be overridden at runtime with a different file located in one of the custom locations.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">如果你使用环境变量而不是系统属性，大多数操作系统不允许使用句点分隔的键名，但你可以使用下划线代替（例如，使用 <code>SPRING_CONFIG_NAME</code> 代替 <code>spring.config.name</code> ）。有关详细信息，请参阅<a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables">从环境变量绑定</a>。</p>
<p translation-origin="off">If you use environment variables rather than system properties, most operating systems disallow period-separated key names, but you can use underscores instead (for example, <code>SPRING_CONFIG_NAME</code> instead of <code>spring.config.name</code>).
See <a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables">Binding from Environment Variables</a> for details.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">如果你的应用程序在 servlet 容器或应用程序服务器中运行，则可以使用 JNDI 属性（在 <code>java:comp/env</code> 中）或 servlet 上下文初始化参数来代替环境变量或系统属性，或者也可以使用环境变量或系统属性。</p>
<p translation-origin="off">If your application runs in a servlet container or application server, then JNDI properties (in <code>java:comp/env</code>) or servlet context initialization parameters can be used instead of, or as well as, environment variables or system properties.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="features.external-config.files.optional-prefix" translation-result="on"><a href="features.html#features.external-config.files.optional-prefix"></a>2.3.1. 可选位置</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files.optional-prefix"></a>2.3.1. Optional Locations</h4>
<div class="paragraph">
<p translation-result="on">默认情况下，当指定的配置数据位置不存在时，Spring Boot 将抛出 <code>ConfigDataLocationNotFoundException</code> 并且你的应用程序将不会启动。</p>
<p translation-origin="off">By default, when a specified config data location does not exist, Spring Boot will throw a <code>ConfigDataLocationNotFoundException</code> and your application will not start.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你想指定一个位置，但你不介意它不总是存在，你可以使用 <code>optional:</code> 前缀。你可以将此前缀与 <code>spring.config.location</code> 和 <code>spring.config.additional-location</code> 属性以及<a href="features.html#features.external-config.files.importing"><code>spring.config.import</code></a>声明一起使用。</p>
<p translation-origin="off">If you want to specify a location, but you do not mind if it does not always exist, you can use the <code>optional:</code> prefix.
You can use this prefix with the <code>spring.config.location</code> and <code>spring.config.additional-location</code> properties, as well as with <a href="features.html#features.external-config.files.importing"><code>spring.config.import</code></a> declarations.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，<code>optional:file:./myconfig.properties</code> 的 <code>spring.config.import</code> 值允许你的应用程序启动，即使 <code>myconfig.properties</code> 文件丢失。</p>
<p translation-origin="off">For example, a <code>spring.config.import</code> value of <code>optional:file:./myconfig.properties</code> allows your application to start, even if the <code>myconfig.properties</code> file is missing.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你想忽略所有 <code>ConfigDataLocationNotFoundExceptions</code> 并始终继续启动你的应用程序，你可以使用 <code>spring.config.on-not-found</code> 属性。使用 <code>SpringApplication.setDefaultProperties(…​)</code> 或使用系统/环境变量设置要 <code>ignore</code> 的值。</p>
<p translation-origin="off">If you want to ignore all <code>ConfigDataLocationNotFoundExceptions</code> and always continue to start your application, you can use the <code>spring.config.on-not-found</code> property.
Set the value to <code>ignore</code> using <code>SpringApplication.setDefaultProperties(…​)</code> or with a system/environment variable.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.files.wildcard-locations" translation-result="on"><a href="features.html#features.external-config.files.wildcard-locations"></a>2.3.2. 通配符位置</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files.wildcard-locations"></a>2.3.2. Wildcard Locations</h4>
<div class="paragraph">
<p translation-result="on">如果配置文件位置包含最后一个路径段的 <code>*</code> 字符，则将其视为通配符位置。加载配置时会扩展通配符，以便同时检查直接子目录。当有多个配置属性来源时，通配符位置在 Kubernetes 等环境中特别有用。</p>
<p translation-origin="off">If a config file location includes the <code>*</code> character for the last path segment, it is considered a wildcard location.
Wildcards are expanded when the config is loaded so that immediate subdirectories are also checked.
Wildcard locations are particularly useful in an environment such as Kubernetes when there are multiple sources of config properties.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，如果你有一些 Redis 配置和一些 MySQL 配置，你可能希望将这两个配置分开，同时要求它们都存在于 <code>application.properties</code> 文件中。这可能会导致两个单独的 <code>application.properties</code> 文件安装在不同的位置，例如 <code>/config/redis/application.properties</code> 和 <code>/config/mysql/application.properties</code> 。在这种情况下，具有 <code>config/*/</code> 的通配符位置将导致两个文件都被处理。</p>
<p translation-origin="off">For example, if you have some Redis configuration and some MySQL configuration, you might want to keep those two pieces of configuration separate, while requiring that both those are present in an <code>application.properties</code> file.
This might result in two separate <code>application.properties</code> files mounted at different locations such as <code>/config/redis/application.properties</code> and <code>/config/mysql/application.properties</code>.
In such a case, having a wildcard location of <code>config/*/</code>, will result in both files being processed.</p>
</div>
<div class="paragraph">
<p translation-result="on">默认情况下，Spring Boot 在默认搜索位置包含 <code>config/*/</code> 。这意味着将搜索 jar 之外的 <code>/config</code> 目录的所有子目录。</p>
<p translation-origin="off">By default, Spring Boot includes <code>config/*/</code> in the default search locations.
It means that all subdirectories of the <code>/config</code> directory outside of your jar will be searched.</p>
</div>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>spring.config.location</code> 和 <code>spring.config.additional-location</code> 属性自己使用通配符位置。</p>
<p translation-origin="off">You can use wildcard locations yourself with the <code>spring.config.location</code> and <code>spring.config.additional-location</code> properties.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">通配符位置必须仅包含一个 <code>*</code> 并以 <code>*/</code> 结尾（对于作为目录的搜索位置）或 <code>*/&lt;filename&gt;</code> 对于作为文件的搜索位置。带有通配符的位置根据文件名的绝对路径按字母顺序排序。</p>
<p translation-origin="off">A wildcard location must contain only one <code>*</code> and end with <code>*/</code> for search locations that are directories or <code>*/&lt;filename&gt;</code> for search locations that are files.
Locations with wildcards are sorted alphabetically based on the absolute path of the file names.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">通配符位置仅适用于外部目录。你不能在 <code>classpath:</code> 位置。</p>
<p translation-origin="off">Wildcard locations only work with external directories.
You cannot use a wildcard in a <code>classpath:</code> location.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.files.profile-specific" translation-result="on"><a href="features.html#features.external-config.files.profile-specific"></a>2.3.3. 配置文件特定文件</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files.profile-specific"></a>2.3.3. Profile Specific Files</h4>
<div class="paragraph">
<p translation-result="on">除了 <code>application</code> 属性文件，Spring Boot 还将尝试使用命名约定 <code>application-{profile}</code> 加载特定于配置文件的文件。例如，如果你的应用程序激活了一个名为 <code>prod</code> 的配置文件并使用 YAML 文件，那么 <code>application.yml</code> 和 <code>application-prod.yml</code> 都将被考虑。</p>
<p translation-origin="off">As well as <code>application</code> property files, Spring Boot will also attempt to load profile-specific files using the naming convention <code>application-{profile}</code>.
For example, if your application activates a profile named <code>prod</code> and uses YAML files, then both <code>application.yml</code> and <code>application-prod.yml</code> will be considered.</p>
</div>
<div class="paragraph">
<p translation-result="on">特定于配置文件的属性从与标准 <code>application.properties</code> 相同的位置加载，特定于配置文件的文件始终覆盖非特定文件。如果指定了多个配置文件，则应用最后获胜策略。例如，如果配置文件 <code>prod,live</code> 由 <code>spring.profiles.active</code> 属性指定，则 <code>application-live.properties</code> 中的值可以被 <code>application-prod.properties</code> 中的值覆盖。</p>
<p translation-origin="off">Profile-specific properties are loaded from the same locations as standard <code>application.properties</code>, with profile-specific files always overriding the non-specific ones.
If several profiles are specified, a last-wins strategy applies.
For example, if profiles <code>prod,live</code> are specified by the <code>spring.profiles.active</code> property, values in <code>application-prod.properties</code> can be overridden by those in <code>application-live.properties</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">最后获胜的策略适用于<a href="features.html#features.external-config.files.location-groups">营业地点组</a>级别。<code>classpath:/cfg/,classpath:/ext/</code> 的 <code>spring.config.location</code> 不会具有与 <code>classpath:/cfg/;classpath:/ext/</code> 相同的覆盖规则。</p>
<p translation-origin="off">The last-wins strategy applies at the <a href="features.html#features.external-config.files.location-groups">location group</a> level.
A <code>spring.config.location</code> of <code>classpath:/cfg/,classpath:/ext/</code> will not have the same override rules as <code>classpath:/cfg/;classpath:/ext/</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，继续上面的 <code>prod,live</code> 示例，我们可能有以下文件：</p>
<p translation-origin="off">For example, continuing our <code>prod,live</code> example above, we might have the following files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/cfg
  application-live.properties
/ext
  application-live.properties
  application-prod.properties</pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">当我们有一个 <code>classpath:/cfg/,classpath:/ext/</code> 的 <code>spring.config.location</code> 时，我们会在所有 <code>/ext</code> 文件之前处理所有 <code>/cfg</code> 文件：</p>
<p translation-origin="off">When we have a <code>spring.config.location</code> of <code>classpath:/cfg/,classpath:/ext/</code> we process all <code>/cfg</code> files before all <code>/ext</code> files:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>/cfg/application-live.properties</code></p>
</li>
<li>
<p><code>/ext/application-prod.properties</code></p>
</li>
<li>
<p><code>/ext/application-live.properties</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p translation-result="on">当我们有 <code>classpath:/cfg/;classpath:/ext/</code> 时（使用 <code>;</code> 分隔符），我们在同一级别处理 <code>/cfg</code> 和 <code>/ext</code> ：</p>
<p translation-origin="off">When we have <code>classpath:/cfg/;classpath:/ext/</code> instead (with a <code>;</code> delimiter) we process <code>/cfg</code> and <code>/ext</code> at the same level:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>/ext/application-prod.properties</code></p>
</li>
<li>
<p><code>/cfg/application-live.properties</code></p>
</li>
<li>
<p><code>/ext/application-live.properties</code></p>
</li>
</ol>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on"><code>Environment</code> 有一组默认配置文件（默认情况下，<code>[default]</code> ），如果没有设置活动配置文件，则使用这些配置文件。换句话说，如果没有显式激活配置文件，则考虑来自 <code>application-default</code> 的属性。</p>
<p translation-origin="off">The <code>Environment</code> has a set of default profiles (by default, <code>[default]</code>) that are used if no active profiles are set.
In other words, if no profiles are explicitly activated, then properties from <code>application-default</code> are considered.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">属性文件只加载一次。如果你已经直接<a href="features.html#features.external-config.files.importing">导入</a>了配置文件特定的属性文件，则不会再次导入它。</p>
<p translation-origin="off">Properties files are only ever loaded once.
If you have already directly <a href="features.html#features.external-config.files.importing">imported</a> a profile specific property files then it will not be imported a second time.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.files.importing" translation-result="on"><a href="features.html#features.external-config.files.importing"></a>2.3.4. 导入附加数据</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files.importing"></a>2.3.4. Importing Additional Data</h4>
<div class="paragraph">
<p translation-result="on">应用程序属性可以使用 <code>spring.config.import</code> 属性从其他位置导入更多配置数据。进口在发现时就被处理，并被视为紧接在声明进口的文件下方插入的附加文件。</p>
<p translation-origin="off">Application properties may import further config data from other locations using the <code>spring.config.import</code> property.
Imports are processed as they are discovered, and are treated as additional documents inserted immediately below the one that declares the import.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，你的类路径 <code>application.properties</code> 文件中可能包含以下内容：</p>
<p translation-origin="off">For example, you might have the following in your classpath <code>application.properties</code> file:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.application.name=myapp
spring.config.import=optional:file:./dev.properties</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  application:
    name: "myapp"
  config:
    import: "optional:file:./dev.properties"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">这将触发在当前目录中导入 <code>dev.properties</code> 文件（如果存在这样的文件）。导入的 <code>dev.properties</code> 中的值将优先于触发导入的文件。在上面的示例中，<code>dev.properties</code> 可以将 <code>spring.application.name</code> 重新定义为不同的值。</p>
<p translation-origin="off">This will trigger the import of a <code>dev.properties</code> file in current directory (if such a file exists).
Values from the imported <code>dev.properties</code> will take precedence over the file that triggered the import.
In the above example, the <code>dev.properties</code> could redefine <code>spring.application.name</code> to a different value.</p>
</div>
<div class="paragraph">
<p translation-result="on">无论声明多少次，导入都只会导入一次。在 properties/yaml 文件中的单个文档中定义导入的顺序无关紧要。例如，下面的两个示例产生相同的结果：</p>
<p translation-origin="off">An import will only be imported once no matter how many times it is declared.
The order an import is defined inside a single document within the properties/yaml file does not matter.
For instance, the two examples below produce the same result:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.config.import=my.properties
my.property=value</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  config:
    import: "my.properties"
my:
  property: "value"</code></pre>
</div>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">my.property=value
spring.config.import=my.properties</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">my:
  property: "value"
spring:
  config:
    import: "my.properties"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">在上述两个示例中，<code>my.properties</code> 文件中的值将优先于触发其导入的文件。</p>
<p translation-origin="off">In both of the above examples, the values from the <code>my.properties</code> file will take precedence over the file that triggered its import.</p>
</div>
<div class="paragraph">
<p translation-result="on">可以在单个 <code>spring.config.import</code> 键下指定多个位置。位置将按照定义的顺序进行处理，以后的导入优先。</p>
<p translation-origin="off">Several locations can be specified under a single <code>spring.config.import</code> key.
Locations will be processed in the order that they are defined, with later imports taking precedence.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">适当时，还会考虑导入<a href="features.html#features.external-config.files.profile-specific">特定于配置文件的变体</a>。上面的示例将导入 <code>my.properties</code> 以及任何 <code>my-&lt;profile&gt;.properties</code> 变体。</p>
<p translation-origin="off">When appropriate, <a href="features.html#features.external-config.files.profile-specific">Profile-specific variants</a> are also considered for import.
The example above would import both <code>my.properties</code> as well as any <code>my-&lt;profile&gt;.properties</code> variants.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">Spring Boot 包含可插入的 API，允许支持各种不同的位置地址。默认情况下，你可以导入 Java 属性、YAML 和“<a href="features.html#features.external-config.files.configtree">配置树</a>”。</p>
<p translation-origin="off">Spring Boot includes pluggable API that allows various different location addresses to be supported.
By default you can import Java Properties, YAML and “<a href="features.html#features.external-config.files.configtree">configuration trees</a>”.</p>
</div>
<div class="paragraph">
<p translation-result="on">第三方 jar 可以提供对其他技术的支持（不需要文件是本地的）。例如，你可以想象配置数据来自外部存储，例如 Consul、Apache ZooKeeper 或 Netflix Archaius。</p>
<p translation-origin="off">Third-party jars can offer support for additional technologies (there is no requirement for files to be local).
For example, you can imagine config data being from external stores such as Consul, Apache ZooKeeper or Netflix Archaius.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你想支持自己的位置，请参阅 <code>org.springframework.boot.context.config</code> 包中的 <code>ConfigDataLocationResolver</code> 和 <code>ConfigDataLoader</code> 类。</p>
<p translation-origin="off">If you want to support your own locations, see the <code>ConfigDataLocationResolver</code> and <code>ConfigDataLoader</code> classes in the <code>org.springframework.boot.context.config</code> package.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.files.importing-extensionless" translation-result="on"><a href="features.html#features.external-config.files.importing-extensionless"></a>2.3.5. 导入无扩展名文件</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files.importing-extensionless"></a>2.3.5. Importing Extensionless Files</h4>
<div class="paragraph">
<p translation-result="on">某些云平台无法为卷挂载文件添加文件扩展名。要导入这些无扩展名文件，你需要给 Spring Boot 一个提示，以便它知道如何加载它们。你可以通过将扩展提示放在方括号中来做到这一点。</p>
<p translation-origin="off">Some cloud platforms cannot add a file extension to volume mounted files.
To import these extensionless files, you need to give Spring Boot a hint so that it knows how to load them.
You can do this by putting an extension hint in square brackets.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，假设你有一个希望作为 yaml 导入的 <code>/etc/config/myconfig</code> 文件。你可以使用以下命令从你的 <code>application.properties</code> 导入它：</p>
<p translation-origin="off">For example, suppose you have a <code>/etc/config/myconfig</code> file that you wish to import as yaml.
You can import it from your <code>application.properties</code> using the following:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.config.import=file:/etc/config/myconfig[.yaml]</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  config:
    import: "file:/etc/config/myconfig[.yaml]"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.files.configtree" translation-result="on"><a href="features.html#features.external-config.files.configtree"></a>2.3.6. 使用配置树</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files.configtree"></a>2.3.6. Using Configuration Trees</h4>
<div class="paragraph">
<p translation-result="on">在云平台（例如 Kubernetes）上运行应用程序时，你通常需要读取平台提供的配置值。将环境变量用于此类目的并不少见，但这可能有缺点，尤其是在值应该保密的情况下。</p>
<p translation-origin="off">When running applications on a cloud platform (such as Kubernetes) you often need to read config values that the platform supplies.
It is not uncommon to use environment variables for such purposes, but this can have drawbacks, especially if the value is supposed to be kept secret.</p>
</div>
<div class="paragraph">
<p translation-result="on">作为环境变量的替代方案，许多云平台现在允许你将配置映射到挂载的数据卷。例如，Kubernetes 可以卷挂载<a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#populate-a-volume-with-data-stored-in-a-configmap"><code>ConfigMaps</code></a>和<a href="https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-files-from-a-pod"><code>Secrets</code></a> 。</p>
<p translation-origin="off">As an alternative to environment variables, many cloud platforms now allow you to map configuration into mounted data volumes.
For example, Kubernetes can volume mount both <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#populate-a-volume-with-data-stored-in-a-configmap"><code>ConfigMaps</code></a> and <a href="https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-files-from-a-pod"><code>Secrets</code></a>.</p>
</div>
<div class="paragraph">
<p translation-result="on">可以使用两种常见的卷挂载模式：</p>
<p translation-origin="off">There are two common volume mount patterns that can be used:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p translation-result="on">单个文件包含一组完整的属性（通常写为 YAML）。</p>
<p translation-origin="off">A single file contains a complete set of properties (usually written as YAML).</p>
</li>
<li>
<p translation-result="on">多个文件被写入目录树，文件名成为“键”，内容成为“值”。</p>
<p translation-origin="off">Multiple files are written to a directory tree, with the filename becoming the ‘key’ and the contents becoming the ‘value’.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p translation-result="on">对于第一种情况，你可以<a href="features.html#features.external-config.files.importing">如上所述</a>直接使用 <code>spring.config.import</code> 导入 YAML 或 Properties 文件。对于第二种情况，你需要使用 <code>configtree:</code> 前缀，以便 Spring Boot 知道它需要将所有文件公开为属性。</p>
<p translation-origin="off">For the first case, you can import the YAML or Properties file directly using <code>spring.config.import</code> as described <a href="features.html#features.external-config.files.importing">above</a>.
For the second case, you need to use the <code>configtree:</code> prefix so that Spring Boot knows it needs to expose all the files as properties.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，假设 Kubernetes 挂载了以下卷：</p>
<p translation-origin="off">As an example, let’s imagine that Kubernetes has mounted the following volume:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>etc/
  config/
    myapp/
      username
      password</pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on"><code>username</code> 文件的内容将是一个配置值，而 <code>password</code> 的内容将是一个秘密。</p>
<p translation-origin="off">The contents of the <code>username</code> file would be a config value, and the contents of <code>password</code> would be a secret.</p>
</div>
<div class="paragraph">
<p translation-result="on">要导入这些属性，你可以将以下内容添加到 <code>application.properties</code> 或 <code>application.yaml</code> 文件中：</p>
<p translation-origin="off">To import these properties, you can add the following to your <code>application.properties</code> or <code>application.yaml</code> file:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.config.import=optional:configtree:/etc/config/</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  config:
    import: "optional:configtree:/etc/config/"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">然后，你可以以通常的方式从 <code>Environment</code> 访问或注入 <code>myapp.username</code> 和 <code>myapp.password</code> 属性。</p>
<p translation-origin="off">You can then access or inject <code>myapp.username</code> and <code>myapp.password</code> properties from the <code>Environment</code> in the usual way.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">带有点符号的文件名也被正确映射。例如，在上面的示例中，<code>/etc/config</code> 中名为 <code>myapp.username</code> 的文件将导致 <code>Environment</code> 中的 <code>myapp.username</code> 属性。</p>
<p translation-origin="off">Filenames with dot notation are also correctly mapped.
For example, in the above example, a file named <code>myapp.username</code> in <code>/etc/config</code> would result in a <code>myapp.username</code> property in the <code>Environment</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">根据预期的内容，配置树值可以绑定到字符串 <code>String</code> 和 <code>byte[]</code> 类型。</p>
<p translation-origin="off">Configuration tree values can be bound to both string <code>String</code> and <code>byte[]</code> types depending on the contents expected.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果你要从同一个父文件夹导入多个配置树，则可以使用通配符快捷方式。任何以 <code>/*/</code> 结尾的 <code>configtree:</code> 位置都会将所有直接子项导入为配置树。</p>
<p translation-origin="off">If you have multiple config trees to import from the same parent folder you can use a wildcard shortcut.
Any <code>configtree:</code> location that ends with <code>/*/</code> will import all immediate children as config trees.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，给定以下卷：</p>
<p translation-origin="off">For example, given the following volume:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>etc/
  config/
    dbconfig/
      db/
        username
        password
    mqconfig/
      mq/
        username
        password</pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>configtree:/etc/config/*/</code> 作为导入位置：</p>
<p translation-origin="off">You can use <code>configtree:/etc/config/*/</code> as the import location:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.config.import=optional:configtree:/etc/config/*/</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  config:
    import: "optional:configtree:/etc/config/*/"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">这将添加 <code>db.username</code> 、 <code>db.password</code> 、 <code>mq.username</code> 和 <code>mq.password</code> 属性。</p>
<p translation-origin="off">This will add <code>db.username</code>, <code>db.password</code>, <code>mq.username</code> and <code>mq.password</code> properties.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">使用通配符加载的目录按字母顺序排序。如果你需要不同的订单，则应将每个位置列为单独的导入</p>
<p translation-origin="off">Directories loaded using a wildcard are sorted alphabetically.
If you need a different order, then you should list each location as a separate import</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">配置树也可用于 Docker 机密。当 Docker swarm 服务被授予对密钥的访问权限时，该密钥将被挂载到容器中。例如，如果一个名为 <code>db.password</code> 的秘密挂载在 <code>/run/secrets/</code> 位置，你可以使用以下命令使 <code>db.password</code> 可用于 Spring 环境：</p>
<p translation-origin="off">Configuration trees can also be used for Docker secrets.
When a Docker swarm service is granted access to a secret, the secret gets mounted into the container.
For example, if a secret named <code>db.password</code> is mounted at location <code>/run/secrets/</code>, you can make <code>db.password</code> available to the Spring environment using the following:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.config.import=optional:configtree:/run/secrets/</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  config:
    import: "optional:configtree:/run/secrets/"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.files.property-placeholders" translation-result="on"><a href="features.html#features.external-config.files.property-placeholders"></a>2.3.7. 属性占位符</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files.property-placeholders"></a>2.3.7. Property Placeholders</h4>
<div class="paragraph">
<p translation-result="on"><code>application.properties</code> 和 <code>application.yml</code> 中的值在使用时会通过现有 <code>Environment</code> 进行过滤，因此你可以参考以前定义的值（例如，来自系统属性）。标准的 <code>${name}</code> 属性占位符语法可以在值的任何地方使用。</p>
<p translation-origin="off">The values in <code>application.properties</code> and <code>application.yml</code> are filtered through the existing <code>Environment</code> when they are used, so you can refer back to previously defined values (for example, from System properties).
The standard <code>${name}</code> property-placeholder syntax can be used anywhere within a value.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，以下文件将 <code>app.description</code> 设置为“MyApp is a Spring Boot application”：</p>
<p translation-origin="off">For example, the following file will set <code>app.description</code> to “MyApp is a Spring Boot application”:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">app.name=MyApp
app.description=${app.name} is a Spring Boot application</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">app:
  name: "MyApp"
  description: "${app.name} is a Spring Boot application"</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">你还可以使用此技术创建现有 Spring Boot 属性的“短”变体。有关详细信息，请参阅<em><a href="howto.html#howto.properties-and-configuration.short-command-line-arguments">howto.html 操作</a></em>方法。</p>
<p translation-origin="off">You can also use this technique to create “short” variants of existing Spring Boot properties.
See the <em><a href="howto.html#howto.properties-and-configuration.short-command-line-arguments">howto.html</a></em> how-to for details.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.files.multi-document" translation-result="on"><a href="features.html#features.external-config.files.multi-document"></a>2.3.8. 使用多文档文件</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files.multi-document"></a>2.3.8. Working with Multi-Document Files</h4>
<div class="paragraph">
<p translation-result="on">Spring Boot 允许你将单个物理文件拆分为多个独立添加的逻辑文档。文档从上到下按顺序处理。后面的文档可以覆盖早期文档中定义的属性。</p>
<p translation-origin="off">Spring Boot allows you to split a single physical file into multiple logical documents which are each added independently.
Documents are processed in order, from top to bottom.
Later documents can override the properties defined in earlier ones.</p>
</div>
<div class="paragraph">
<p translation-result="on">对于 <code>application.yml</code> 文件，使用标准的 YAML 多文档语法。三个连续的连字符代表一个文档的结束，以及下一个文档的开始。</p>
<p translation-origin="off">For <code>application.yml</code> files, the standard YAML multi-document syntax is used.
Three consecutive hyphens represent the end of one document, and the start of the next.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，以下文件有两个逻辑文档：</p>
<p translation-origin="off">For example, the following file has two logical documents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  application:
    name: "MyApp"
---
spring:
  application:
    name: "MyCloudApp"
  config:
    activate:
      on-cloud-platform: "kubernetes"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">对于 <code>application.properties</code> 文件，特殊的 <code>#---</code> 注释用于标记文档拆分：</p>
<p translation-origin="off">For <code>application.properties</code> files a special <code>#---</code> comment is used to mark the document splits:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.application.name=MyApp
#---
spring.application.name=MyCloudApp
spring.config.activate.on-cloud-platform=kubernetes</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">属性文件分隔符不能有任何前导空格，并且必须正好有三个连字符。分隔符前后的行不能是注释。</p>
<p translation-origin="off">Property file separators must not have any leading whitespace and must have exactly three hyphen characters.
The lines immediately before and after the separator must not be comments.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">多文档属性文件通常与 <code>spring.config.activate.on-profile</code> 等激活属性结合使用。有关详细信息，请参阅<a href="features.html#features.external-config.files.activation-properties">下一节</a>。</p>
<p translation-origin="off">Multi-document property files are often used in conjunction with activation properties such as <code>spring.config.activate.on-profile</code>.
See the <a href="features.html#features.external-config.files.activation-properties">next section</a> for details.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<p translation-result="on">无法使用 <code>@PropertySource</code> 或 <code>@TestPropertySource</code> 注释加载多文档属性文件。</p>
<p translation-origin="off">Multi-document property files cannot be loaded by using the <code>@PropertySource</code> or <code>@TestPropertySource</code> annotations.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.files.activation-properties" translation-result="on"><a href="features.html#features.external-config.files.activation-properties"></a>2.3.9. 激活属性</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.files.activation-properties"></a>2.3.9. Activation Properties</h4>
<div class="paragraph">
<p translation-result="on">有时仅在满足某些条件时才激活给定的一组属性很有用。例如，你可能拥有仅在特定配置文件处于活动状态时才相关的属性。</p>
<p translation-origin="off">It is sometimes useful to only activate a given set of properties when certain conditions are met.
For example, you might have properties that are only relevant when a specific profile is active.</p>
</div>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>spring.config.activate.*</code> 有条件地激活属性文档。</p>
<p translation-origin="off">You can conditionally activate a properties document using <code>spring.config.activate.*</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">可以使用以下激活属性：</p>
<p translation-origin="off">The following activation properties are available:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. activation properties</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">财产</p>
  <p translation-origin="off">Property</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">笔记</p>
  <p translation-origin="off">Note</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on-profile</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">要使文档处于活动状态，必须匹配的配置文件表达式。</p><p class="tableblock" translation-origin="off">A profile expression that must match for the document to be active.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on-cloud-platform</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">要使文档处于活动状态，必须检测到 <code>CloudPlatform</code> 。</p><p class="tableblock" translation-origin="off">The <code>CloudPlatform</code> that must be detected for the document to be active.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p translation-result="on">例如，以下内容指定第二个文档仅在 Kubernetes 上运行时才处于活动状态，并且仅当“prod”或“staging”配置文件处于活动状态时：</p>
<p translation-origin="off">For example, the following specifies that the second document is only active when running on Kubernetes, and only when either the “prod” or “staging” profiles are active:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">myprop=always-set
#---
spring.config.activate.on-cloud-platform=kubernetes
spring.config.activate.on-profile=prod | staging
myotherprop=sometimes-set</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">myprop:
  "always-set"
---
spring:
  config:
    activate:
      on-cloud-platform: "kubernetes"
      on-profile: "prod | staging"
myotherprop: "sometimes-set"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.external-config.encrypting" translation-result="on"><a href="features.html#features.external-config.encrypting"></a>2.4. 加密属性</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.external-config.encrypting"></a>2.4. Encrypting Properties</h3>
<div class="paragraph">
<p translation-result="on">Spring Boot 不提供对加密属性值的任何内置支持，但是，它确实提供了修改 Spring <code>Environment</code> 中包含的值所需的挂钩点。<code>EnvironmentPostProcessor</code> 接口允许你在应用程序启动之前操作 <code>Environment</code> 。有关详细信息，请参阅 <a href="howto.html#howto.application.customize-the-environment-or-application-context">howto.html</a> 。</p>
<p translation-origin="off">Spring Boot does not provide any built in support for encrypting property values, however, it does provide the hook points necessary to modify values contained in the Spring <code>Environment</code>.
The <code>EnvironmentPostProcessor</code> interface allows you to manipulate the <code>Environment</code> before the application starts.
See <a href="howto.html#howto.application.customize-the-environment-or-application-context">howto.html</a> for details.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你需要一种安全的方式来存储凭据和密码，<a href="https://cloud.spring.io/spring-cloud-vault/">Spring Cloud Vault</a> 项目支持在 <a href="https://www.vaultproject.io/">HashiCorp Vault</a> 中存储外部化配置。</p>
<p translation-origin="off">If you need a secure way to store credentials and passwords, the <a href="https://cloud.spring.io/spring-cloud-vault/">Spring Cloud Vault</a> project provides support for storing externalized configuration in <a href="https://www.vaultproject.io/">HashiCorp Vault</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.external-config.yaml" translation-result="on"><a href="features.html#features.external-config.yaml"></a>2.5. 使用 YAML</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.external-config.yaml"></a>2.5. Working with YAML</h3>
<div class="paragraph">
<p translation-result="on"><a href="https://yaml.org">YAML</a> 是 JSON 的超集，因此是一种用于指定分层配置数据的便捷格式。只要你的类路径中有 <a href="https://bitbucket.org/asomov/snakeyaml">SnakeYAML</a> 库，<code>SpringApplication</code> 类就会自动支持 YAML 作为属性的替代方案。</p>
<p translation-origin="off"><a href="https://yaml.org">YAML</a> is a superset of JSON and, as such, is a convenient format for specifying hierarchical configuration data.
The <code>SpringApplication</code> class automatically supports YAML as an alternative to properties whenever you have the <a href="https://bitbucket.org/asomov/snakeyaml">SnakeYAML</a> library on your classpath.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">如果你使用“Starters”，则 SnakeYAML 由 <code>spring-boot-starter</code> 自动提供。</p>
<p translation-origin="off">If you use “Starters”, SnakeYAML is automatically provided by <code>spring-boot-starter</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="features.external-config.yaml.mapping-to-properties" translation-result="on"><a href="features.html#features.external-config.yaml.mapping-to-properties"></a>2.5.1. 将 YAML 映射到属性</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.yaml.mapping-to-properties"></a>2.5.1. Mapping YAML to Properties</h4>
<div class="paragraph">
<p translation-result="on">YAML 文档需要从其分层格式转换为可与 Spring <code>Environment</code> 一起使用的平面结构。例如，考虑以下 YAML 文档：</p>
<p translation-origin="off">YAML documents need to be converted from their hierarchical format to a flat structure that can be used with the Spring <code>Environment</code>.
For example, consider the following YAML document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">environments:
  dev:
    url: "https://dev.example.com"
    name: "Developer Setup"
  prod:
    url: "https://another.example.com"
    name: "My Cool App"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">为了从 <code>Environment</code> 访问这些属性，它们将被展平如下：</p>
<p translation-origin="off">In order to access these properties from the <code>Environment</code>, they would be flattened as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">environments.dev.url=https://dev.example.com
environments.dev.name=Developer Setup
environments.prod.url=https://another.example.com
environments.prod.name=My Cool App</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">同样，YAML 列表也需要展平。它们表示为带有 <code>[index]</code> 解引用器的属性键。例如，考虑以下 YAML：</p>
<p translation-origin="off">Likewise, YAML lists also need to be flattened.
They are represented as property keys with <code>[index]</code> dereferencers.
For example, consider the following YAML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">my:
 servers:
 - "dev.example.com"
 - "another.example.com"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">前面的示例将转换为以下属性：</p>
<p translation-origin="off">The preceding example would be transformed into these properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">my.servers[0]=dev.example.com
my.servers[1]=another.example.com</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">使用 <code>[index]</code> 表示法的属性可以使用 Spring Boot 的 <code>Binder</code> 类绑定到 Java <code>List</code> 或 <code>Set</code> 对象。有关更多详细信息，请参阅下面的“<a href="features.html#features.external-config.typesafe-configuration-properties">类型安全配置属性</a>”部分。</p>
<p translation-origin="off">Properties that use the <code>[index]</code> notation can be bound to Java <code>List</code> or <code>Set</code> objects using Spring Boot’s <code>Binder</code> class.
For more details see the “<a href="features.html#features.external-config.typesafe-configuration-properties">Type-safe Configuration Properties</a>” section below.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<p translation-result="on">无法使用 <code>@PropertySource</code> 或 <code>@TestPropertySource</code> 注解加载 YAML 文件。因此，如果你需要以这种方式加载值，则需要使用属性文件。</p>
<p translation-origin="off">YAML files cannot be loaded by using the <code>@PropertySource</code> or <code>@TestPropertySource</code> annotations.
So, in the case that you need to load values that way, you need to use a properties file.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.yaml.directly-loading" translation-result="on"><a href="features.html#features.external-config.yaml.directly-loading"></a>2.5.2. 直接加载 YAML</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.yaml.directly-loading"></a>2.5.2. Directly Loading YAML</h4>
<div class="paragraph">
<p translation-result="on">Spring Framework 提供了两个方便的类，可用于加载 YAML 文档。<code>YamlPropertiesFactoryBean</code> 将 YAML 作为 <code>Properties</code> 加载，<code>YamlMapFactoryBean</code> 将 YAML 作为 <code>Map</code> 加载。</p>
<p translation-origin="off">Spring Framework provides two convenient classes that can be used to load YAML documents.
The <code>YamlPropertiesFactoryBean</code> loads YAML as <code>Properties</code> and the <code>YamlMapFactoryBean</code> loads YAML as a <code>Map</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果要将 YAML 作为 Spring <code>PropertySource</code> 加载，还可以使用 <code>YamlPropertySourceLoader</code> 类。</p>
<p translation-origin="off">You can also use the <code>YamlPropertySourceLoader</code> class if you want to load YAML as a Spring <code>PropertySource</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.external-config.random-values" translation-result="on"><a href="features.html#features.external-config.random-values"></a>2.6. 配置随机值</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.external-config.random-values"></a>2.6. Configuring Random Values</h3>
<div class="paragraph">
<p translation-result="on"><code>RandomValuePropertySource</code> 可用于注入随机值（例如，注入机密或测试用例）。它可以生成整数、长整数、uuid 或字符串，如下例所示：</p>
<p translation-origin="off">The <code>RandomValuePropertySource</code> is useful for injecting random values (for example, into secrets or test cases).
It can produce integers, longs, uuids, or strings, as shown in the following example:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">my.secret=${random.value}
my.number=${random.int}
my.bignumber=${random.long}
my.uuid=${random.uuid}
my.number-less-than-ten=${random.int(10)}
my.number-in-range=${random.int[1024,65536]}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">my:
  secret: "${random.value}"
  number: "${random.int}"
  bignumber: "${random.long}"
  uuid: "${random.uuid}"
  number-less-than-ten: "${random.int(10)}"
  number-in-range: "${random.int[1024,65536]}"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on"><code>random.int*</code> 语法是 <code>OPEN value (,max) CLOSE</code> ，其中 <code>OPEN,CLOSE</code> 是任何字符，<code>value,max</code> 是整数。如果提供了 <code>max</code> ，则 <code>value</code> 是最小值，<code>max</code> 是最大值（不包括）。</p>
<p translation-origin="off">The <code>random.int*</code> syntax is <code>OPEN value (,max) CLOSE</code> where the <code>OPEN,CLOSE</code> are any character and <code>value,max</code> are integers.
If <code>max</code> is provided, then <code>value</code> is the minimum value and <code>max</code> is the maximum value (exclusive).</p>
</div>
</div>
<div class="sect2">
<h3 id="features.external-config.system-environment" translation-result="on"><a href="features.html#features.external-config.system-environment"></a>2.7. 配置系统环境属性</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.external-config.system-environment"></a>2.7. Configuring System Environment Properties</h3>
<div class="paragraph">
<p translation-result="on">Spring Boot 支持为环境属性设置前缀。如果系统环境由具有不同配置要求的多个 Spring Boot 应用程序共享，这将很有用。系统环境属性的前缀可以直接在 <code>SpringApplication</code> 上设置。</p>
<p translation-origin="off">Spring Boot supports setting a prefix for environment properties.
This is useful if the system environment is shared by multiple Spring Boot applications with different configuration requirements.
The prefix for system environment properties can be set directly on <code>SpringApplication</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，如果你将前缀设置为 <code>input</code> ，那么诸如 <code>remote.timeout</code> 类的属性在系统环境中也会被解析为 <code>input.remote.timeout</code> 。</p>
<p translation-origin="off">For example, if you set the prefix to <code>input</code>, a property such as <code>remote.timeout</code> will also be resolved as <code>input.remote.timeout</code> in the system environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.external-config.typesafe-configuration-properties" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties"></a>2.8. 类型安全的配置属性</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties"></a>2.8. Type-safe Configuration Properties</h3>
<div class="paragraph">
<p translation-result="on">使用 <code>@Value("${property}")</code> 注解注入配置属性有时会很麻烦，尤其是当你使用多个属性或数据本质上是分层的时。Spring Boot 提供了一种使用属性的替代方法，可以让强类型 bean 管理和验证应用程序的配置。</p>
<p translation-origin="off">Using the <code>@Value("${property}")</code> annotation to inject configuration properties can sometimes be cumbersome, especially if you are working with multiple properties or your data is hierarchical in nature.
Spring Boot provides an alternative method of working with properties that lets strongly typed beans govern and validate the configuration of your application.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">另请参阅<a href="features.html#features.external-config.typesafe-configuration-properties.vs-value-annotation"><code>@Value</code> 和类型安全配置属性之间的区别</a>。</p>
<p translation-origin="off">See also the <a href="features.html#features.external-config.typesafe-configuration-properties.vs-value-annotation">differences between <code>@Value</code> and type-safe configuration properties</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.java-bean-binding" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.java-bean-binding"></a> 2.8.1. JavaBean 属性绑定</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.java-bean-binding"></a>2.8.1. JavaBean properties binding</h4>
<div class="paragraph">
<p translation-result="on">可以绑定声明标准 JavaBean 属性的 bean，如下例所示：</p>
<p translation-origin="off">It is possible to bind a bean declaring standard JavaBean properties as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.net.InetAddress;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import org.springframework.boot.context.properties.ConfigurationProperties;

</span><span class="fold-block">@ConfigurationProperties("my.service")
public class MyProperties {

    private boolean enabled;

    private InetAddress remoteAddress;

    private final Security security = new Security();

</span><span class="fold-block hide-when-unfolded">    // getters / setters...

</span><span class="fold-block hide-when-folded">    public boolean isEnabled() {
        return this.enabled;
    }

    public void setEnabled(boolean enabled) {
        this.enabled = enabled;
    }

    public InetAddress getRemoteAddress() {
        return this.remoteAddress;
    }

    public void setRemoteAddress(InetAddress remoteAddress) {
        this.remoteAddress = remoteAddress;
    }

    public Security getSecurity() {
        return this.security;
    }

</span><span class="fold-block">    public static class Security {

        private String username;

        private String password;

        private List&lt;String&gt; roles = new ArrayList&lt;&gt;(Collections.singleton("USER"));

</span><span class="fold-block hide-when-unfolded">        // getters / setters...

</span><span class="fold-block hide-when-folded">        public String getUsername() {
            return this.username;
        }

        public void setUsername(String username) {
            this.username = username;
        }

        public String getPassword() {
            return this.password;
        }

        public void setPassword(String password) {
            this.password = password;
        }

        public List&lt;String&gt; getRoles() {
            return this.roles;
        }

        public void setRoles(List&lt;String&gt; roles) {
            this.roles = roles;
        }

</span><span class="fold-block">    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">前面的 POJO 定义了以下属性：</p>
<p translation-origin="off">The preceding POJO defines the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><code>my.service.enabled</code> ，默认值为 <code>false</code> 。</p>
<p translation-origin="off"><code>my.service.enabled</code>, with a value of <code>false</code> by default.</p>
</li>
<li>
<p translation-result="on"><code>my.service.remote-address</code> ，具有可以从 <code>String</code> 强制转换的类型。</p>
<p translation-origin="off"><code>my.service.remote-address</code>, with a type that can be coerced from <code>String</code>.</p>
</li>
<li>
<p translation-result="on"><code>my.service.security.username</code> ，具有嵌套的“安全”对象，其名称由属性名称确定。特别是，该类型根本没有使用，可能是 <code>SecurityProperties</code> 。</p>
<p translation-origin="off"><code>my.service.security.username</code>, with a nested "security" object whose name is determined by the name of the property.
In particular, the type is not used at all there and could have been <code>SecurityProperties</code>.</p>
</li>
<li>
<p translation-result="on"><code>my.service.security.password</code> 。</p>
<p translation-origin="off"><code>my.service.security.password</code>.</p>
</li>
<li>
<p translation-result="on"><code>my.service.security.roles</code> ，带有默认为 <code>USER</code> 的 <code>String</code> 集合。</p>
<p translation-origin="off"><code>my.service.security.roles</code>, with a collection of <code>String</code> that defaults to <code>USER</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">映射到 Spring Boot 中可用的 <code>@ConfigurationProperties</code> 类的属性，通过属性文件、YAML 文件、环境变量和其他机制配置，是公共 API，但类本身的访问器（getter/setter）并不意味着直接使用。</p>
<p translation-origin="off">The properties that map to <code>@ConfigurationProperties</code> classes available in Spring Boot, which are configured through properties files, YAML files, environment variables, and other mechanisms, are public API but the accessors (getters/setters) of the class itself are not meant to be used directly.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">这种安排依赖于默认的空构造函数，并且 getter 和 setter 通常是强制性的，因为绑定是通过标准 Java Beans 属性描述符进行的，就像在 Spring MVC 中一样。在以下情况下可以省略 setter：</p>
<p translation-origin="off">Such arrangement relies on a default empty constructor and getters and setters are usually mandatory, since binding is through standard Java Beans property descriptors, just like in Spring MVC.
A setter may be omitted in the following cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">映射，只要它们被初始化，就需要一个 getter 但不一定是一个 setter，因为它们可以被 binder 改变。</p>
<p translation-origin="off">Maps, as long as they are initialized, need a getter but not necessarily a setter, since they can be mutated by the binder.</p>
</li>
<li>
<p translation-result="on">可以通过索引（通常使用 YAML）或使用单个逗号分隔值（属性）来访问集合和数组。在后一种情况下，setter 是强制性的。我们建议始终为此类类型添加 setter。如果你初始化一个集合，请确保它不是不可变的（如前面的示例中所示）。</p>
<p translation-origin="off">Collections and arrays can be accessed either through an index (typically with YAML) or by using a single comma-separated value (properties).
In the latter case, a setter is mandatory.
We recommend to always add a setter for such types.
If you initialize a collection, make sure it is not immutable (as in the preceding example).</p>
</li>
<li>
<p translation-result="on">如果嵌套 POJO 属性已初始化（如前面示例中的 <code>Security</code> 字段），则不需要 setter。如果你希望活页夹使用其默认构造函数动态创建实例，则需要一个 setter。</p>
<p translation-origin="off">If nested POJO properties are initialized (like the <code>Security</code> field in the preceding example), a setter is not required.
If you want the binder to create the instance on the fly by using its default constructor, you need a setter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">有些人使用 Project Lombok 来自动添加 getter 和 setter。确保 Lombok 不会为此类类型生成任何特定的构造函数，因为容器会自动使用它来实例化对象。</p>
<p translation-origin="off">Some people use Project Lombok to add getters and setters automatically.
Make sure that Lombok does not generate any particular constructor for such a type, as it is used automatically by the container to instantiate the object.</p>
</div>
<div class="paragraph">
<p translation-result="on">最后，只考虑标准 Java Bean 属性，不支持对静态属性的绑定。</p>
<p translation-origin="off">Finally, only standard Java Bean properties are considered and binding on static properties is not supported.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.constructor-binding" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.constructor-binding"></a> 2.8.2.构造函数绑定</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.constructor-binding"></a>2.8.2. Constructor binding</h4>
<div class="paragraph">
<p translation-result="on">上一节中的示例可以以不可变的方式重写，如下例所示：</p>
<p translation-origin="off">The example in the previous section can be rewritten in an immutable fashion as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.net.InetAddress;
import java.util.List;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.context.properties.ConstructorBinding;
import org.springframework.boot.context.properties.bind.DefaultValue;

</span><span class="fold-block">@ConstructorBinding
@ConfigurationProperties("my.service")
public class MyProperties {

</span><span class="fold-block hide-when-unfolded">    // fields...

</span><span class="fold-block hide-when-folded">    private final boolean enabled;

    private final InetAddress remoteAddress;

    private final Security security;

</span><span class="fold-block">    public MyProperties(boolean enabled, InetAddress remoteAddress, Security security) {
        this.enabled = enabled;
        this.remoteAddress = remoteAddress;
        this.security = security;
    }

</span><span class="fold-block hide-when-unfolded">    // getters...

</span><span class="fold-block hide-when-folded">    public boolean isEnabled() {
        return this.enabled;
    }

    public InetAddress getRemoteAddress() {
        return this.remoteAddress;
    }

    public Security getSecurity() {
        return this.security;
    }

</span><span class="fold-block">    public static class Security {

</span><span class="fold-block hide-when-unfolded">        // fields...

</span><span class="fold-block hide-when-folded">        private final String username;

        private final String password;

        private final List&lt;String&gt; roles;

</span><span class="fold-block">        public Security(String username, String password, @DefaultValue("USER") List&lt;String&gt; roles) {
            this.username = username;
            this.password = password;
            this.roles = roles;
        }

</span><span class="fold-block hide-when-unfolded">        // getters...

</span><span class="fold-block hide-when-folded">        public String getUsername() {
            return this.username;
        }

        public String getPassword() {
            return this.password;
        }

        public List&lt;String&gt; getRoles() {
            return this.roles;
        }

</span><span class="fold-block">    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">在此设置中，<code>@ConstructorBinding</code> 注释用于指示应使用构造函数绑定。这意味着绑定器将期望找到具有你希望绑定的参数的构造函数。如果你使用的是 Java 16 或更高版本，则可以将构造函数绑定与记录一起使用。在这种情况下，除非你的记录有多个构造函数，否则不需要使用 <code>@ConstructorBinding</code> 。</p>
<p translation-origin="off">In this setup, the <code>@ConstructorBinding</code> annotation is used to indicate that constructor binding should be used.
This means that the binder will expect to find a constructor with the parameters that you wish to have bound.
If you are using Java 16 or later, constructor binding can be used with records.
In this case, unless your record has multiple constructors, there is no need to use <code>@ConstructorBinding</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>@ConstructorBinding</code> 类的嵌套成员（例如上面示例中的 <code>Security</code> ）也将通过其构造函数进行绑定。</p>
<p translation-origin="off">Nested members of a <code>@ConstructorBinding</code> class (such as <code>Security</code> in the example above) will also be bound through their constructor.</p>
</div>
<div class="paragraph">
<p translation-result="on">可以使用 <code>@DefaultValue</code> 指定默认值，并且将应用相同的转换服务将 <code>String</code> 值强制为缺失属性的目标类型。默认情况下，如果没有属性绑定到 <code>Security</code> ，则 <code>MyProperties</code> 实例将包含一个 <code>null</code> 值作为 <code>security</code> 。如果你希望即使没有绑定任何属性也返回一个非空的 <code>Security</code> 实例，你可以使用空的 <code>@DefaultValue</code> 注释来执行此操作：</p>
<p translation-origin="off">Default values can be specified using <code>@DefaultValue</code> and the same conversion service will be applied to coerce the <code>String</code> value to the target type of a missing property.
By default, if no properties are bound to <code>Security</code>, the <code>MyProperties</code> instance will contain a <code>null</code> value for <code>security</code>.
If you wish you return a non-null instance of <code>Security</code> even when no properties are bound to it, you can use an empty <code>@DefaultValue</code> annotation to do so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public MyProperties(boolean enabled, InetAddress remoteAddress, @DefaultValue Security security) {
    this.enabled = enabled;
    this.remoteAddress = remoteAddress;
    this.security = security;
}
</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">要使用构造函数绑定，必须使用 <code>@EnableConfigurationProperties</code> 或配置属性扫描启用该类。你不能对由常规 Spring 机制创建的 bean 使用构造函数绑定（例如 <code>@Component</code> beans、使用 <code>@Bean</code> 方法创建的 beans 或使用 <code>@Import</code> 加载的 beans）</p>
<p translation-origin="off">To use constructor binding the class must be enabled using <code>@EnableConfigurationProperties</code> or configuration property scanning.
You cannot use constructor binding with beans that are created by the regular Spring mechanisms (for example <code>@Component</code> beans, beans created by using <code>@Bean</code> methods or beans loaded by using <code>@Import</code>)</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你的类有多个构造函数，你也可以直接在应该绑定的构造函数上使用 <code>@ConstructorBinding</code> 。</p>
<p translation-origin="off">If you have more than one constructor for your class you can also use <code>@ConstructorBinding</code> directly on the constructor that should be bound.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">不建议将 <code>java.util.Optional</code> 与 <code>@ConfigurationProperties</code> 一起使用，因为它主要用作返回类型。因此，它不太适合配置属性注入。为了与其他类型的属性保持一致，如果你确实声明了 <code>Optional</code> 属性并且它没有值，则将绑定 <code>null</code> 而不是空的 <code>Optional</code> 。</p>
<p translation-origin="off">The use of <code>java.util.Optional</code> with <code>@ConfigurationProperties</code> is not recommended as it is primarily intended for use as a return type.
As such, it is not well-suited to configuration property injection.
For consistency with properties of other types, if you do declare an <code>Optional</code> property and it has no value, <code>null</code> rather than an empty <code>Optional</code> will be bound.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.enabling-annotated-types" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.enabling-annotated-types"></a> 2.8.3.启用 @ConfigurationProperties 注释类型</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.enabling-annotated-types"></a>2.8.3. Enabling @ConfigurationProperties-annotated types</h4>
<div class="paragraph">
<p translation-result="on">Spring Boot 提供了绑定 <code>@ConfigurationProperties</code> 类型并将它们注册为 bean 的基础设施。你可以按类启用配置属性，也可以启用与组件扫描类似的配置属性扫描。</p>
<p translation-origin="off">Spring Boot provides infrastructure to bind <code>@ConfigurationProperties</code> types and register them as beans.
You can either enable configuration properties on a class-by-class basis or enable configuration property scanning that works in a similar manner to component scanning.</p>
</div>
<div class="paragraph">
<p translation-result="on">有时，使用 <code>@ConfigurationProperties</code> 注释的类可能不适合扫描，例如，如果你正在开发自己的自动配置或者你想有条件地启用它们。在这些情况下，请使用 <code>@EnableConfigurationProperties</code> 注释指定要处理的类型列表。这可以在任何 <code>@Configuration</code> 类上完成，如下例所示：</p>
<p translation-origin="off">Sometimes, classes annotated with <code>@ConfigurationProperties</code> might not be suitable for scanning, for example, if you’re developing your own auto-configuration or you want to enable them conditionally.
In these cases, specify the list of types to process using the <code>@EnableConfigurationProperties</code> annotation.
This can be done on any <code>@Configuration</code> class, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Configuration;

</span><span class="fold-block">@Configuration(proxyBeanMethods = false)
@EnableConfigurationProperties(SomeProperties.class)
public class MyConfiguration {

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">要使用配置属性扫描，请将 <code>@ConfigurationPropertiesScan</code> 注释添加到你的应用程序。通常，它被添加到使用 <code>@SpringBootApplication</code> 注解的主应用程序类中，但它可以添加到任何 <code>@Configuration</code> 类中。默认情况下，扫描将从声明注解的类的包中进行。如果要定义要扫描的特定包，可以按照以下示例进行操作：</p>
<p translation-origin="off">To use configuration property scanning, add the <code>@ConfigurationPropertiesScan</code> annotation to your application.
Typically, it is added to the main application class that is annotated with <code>@SpringBootApplication</code> but it can be added to any <code>@Configuration</code> class.
By default, scanning will occur from the package of the class that declares the annotation.
If you want to define specific packages to scan, you can do so as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.context.properties.ConfigurationPropertiesScan;

</span><span class="fold-block">@SpringBootApplication
@ConfigurationPropertiesScan({ "com.example.app", "com.example.another" })
public class MyApplication {

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">当使用配置属性扫描或通过 <code>@EnableConfigurationProperties</code> 注册 <code>@ConfigurationProperties</code> bean 时，该 bean 具有常规名称： <code>&lt;prefix&gt;-&lt;fqn&gt;</code> ，其中 <code>&lt;prefix&gt;</code> 是在 <code>@ConfigurationProperties</code> 注释中指定的环境键前缀，<code>&lt;fqn&gt;</code> 是 bean 的完全限定名称。如果注解不提供任何前缀，则仅使用 bean 的完全限定名称。</p>
<p translation-origin="off">When the <code>@ConfigurationProperties</code> bean is registered using configuration property scanning or through <code>@EnableConfigurationProperties</code>, the bean has a conventional name: <code>&lt;prefix&gt;-&lt;fqn&gt;</code>, where <code>&lt;prefix&gt;</code> is the environment key prefix specified in the <code>@ConfigurationProperties</code> annotation and <code>&lt;fqn&gt;</code> is the fully qualified name of the bean.
If the annotation does not provide any prefix, only the fully qualified name of the bean is used.</p>
</div>
<div class="paragraph">
<p translation-result="on">上面示例中的 bean 名称是 <code>com.example.app-com.example.app.SomeProperties</code> 。</p>
<p translation-origin="off">The bean name in the example above is <code>com.example.app-com.example.app.SomeProperties</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">我们建议 <code>@ConfigurationProperties</code> 只处理环境，特别是不要从上下文中注入其他 bean。对于极端情况，可以使用 setter 注入或框架提供的任何 <code>*Aware</code> 接口（例如 <code>EnvironmentAware</code> 如果你需要访问 <code>Environment</code> ）。如果你仍然想使用构造函数注入其他 bean，则配置属性 bean 必须使用 <code>@Component</code> 注释并使用基于 JavaBean 的属性绑定。</p>
<p translation-origin="off">We recommend that <code>@ConfigurationProperties</code> only deal with the environment and, in particular, does not inject other beans from the context.
For corner cases, setter injection can be used or any of the <code>*Aware</code> interfaces provided by the framework (such as <code>EnvironmentAware</code> if you need access to the <code>Environment</code>).
If you still want to inject other beans using the constructor, the configuration properties bean must be annotated with <code>@Component</code> and use JavaBean-based property binding.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.using-annotated-types" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.using-annotated-types"></a> 2.8.4. 使用 @ConfigurationProperties 注释的类型</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.using-annotated-types"></a>2.8.4. Using @ConfigurationProperties-annotated types</h4>
<div class="paragraph">
<p translation-result="on">这种配置风格特别适用于 <code>SpringApplication</code> 外部 YAML 配置，如下例所示：</p>
<p translation-origin="off">This style of configuration works particularly well with the <code>SpringApplication</code> external YAML configuration, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">my:
  service:
    remote-address: 192.168.1.1
    security:
      username: "admin"
      roles:
      - "USER"
      - "ADMIN"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">要使用 <code>@ConfigurationProperties</code> bean，你可以像注入任何其他 bean 一样注入它们，如以下示例所示：</p>
<p translation-origin="off">To work with <code>@ConfigurationProperties</code> beans, you can inject them in the same way as any other bean, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.stereotype.Service;

</span><span class="fold-block">@Service
public class MyService {

    private final SomeProperties properties;

    public MyService(SomeProperties properties) {
        this.properties = properties;
    }

    public void openConnection() {
        Server server = new Server(this.properties.getRemoteAddress());
        server.start();
        // ...
    }

    // ...

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">使用 <code>@ConfigurationProperties</code> 还可以让你生成元数据文件，IDE 可以使用这些文件为你自己的密钥提供自动完成功能。详情见<a href="configuration-metadata.html#configuration-metadata">附录</a>。</p>
<p translation-origin="off">Using <code>@ConfigurationProperties</code> also lets you generate metadata files that can be used by IDEs to offer auto-completion for your own keys.
See the <a href="configuration-metadata.html#configuration-metadata">appendix</a> for details.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.third-party-configuration" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.third-party-configuration"></a> 2.8.5. 第三方配置</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.third-party-configuration"></a>2.8.5. Third-party Configuration</h4>
<div class="paragraph">
<p translation-result="on">除了使用 <code>@ConfigurationProperties</code> 来注释一个类，你还可以在公共 <code>@Bean</code> 方法上使用它。当你想要将属性绑定到你无法控制的第三方组件时，这样做会特别有用。</p>
<p translation-origin="off">As well as using <code>@ConfigurationProperties</code> to annotate a class, you can also use it on public <code>@Bean</code> methods.
Doing so can be particularly useful when you want to bind properties to third-party components that are outside of your control.</p>
</div>
<div class="paragraph">
<p translation-result="on">要从 <code>Environment</code> 属性配置 bean，请将 <code>@ConfigurationProperties</code> 添加到其 bean 注册中，如以下示例所示：</p>
<p translation-origin="off">To configure a bean from the <code>Environment</code> properties, add <code>@ConfigurationProperties</code> to its bean registration, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

</span><span class="fold-block">@Configuration(proxyBeanMethods = false)
public class ThirdPartyConfiguration {

    @Bean
    @ConfigurationProperties(prefix = "another")
    public AnotherComponent anotherComponent() {
        return new AnotherComponent();
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">使用 <code>another</code> 前缀定义的任何 JavaBean 属性都以类似于前面的 <code>SomeProperties</code> 示例的方式映射到该 <code>AnotherComponent</code> bean。</p>
<p translation-origin="off">Any JavaBean property defined with the <code>another</code> prefix is mapped onto that <code>AnotherComponent</code> bean in manner similar to the preceding <code>SomeProperties</code> example.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.relaxed-binding" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding"></a> 2.8.6. 轻松绑定</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding"></a>2.8.6. Relaxed Binding</h4>
<div class="paragraph">
<p translation-result="on">Spring Boot 使用一些宽松的规则将 <code>Environment</code> 属性绑定到 <code>@ConfigurationProperties</code> bean，因此 <code>Environment</code> 属性名称和 bean 属性名称之间不需要完全匹配。这很有用的常见示例包括破折号分隔的环境属性（例如，<code>context-path</code> 绑定到 <code>contextPath</code> ）和大写环境属性（例如，<code>PORT</code> 绑定到 <code>port</code> ）。</p>
<p translation-origin="off">Spring Boot uses some relaxed rules for binding <code>Environment</code> properties to <code>@ConfigurationProperties</code> beans, so there does not need to be an exact match between the <code>Environment</code> property name and the bean property name.
Common examples where this is useful include dash-separated environment properties (for example, <code>context-path</code> binds to <code>contextPath</code>), and capitalized environment properties (for example, <code>PORT</code> binds to <code>port</code>).</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，考虑以下 <code>@ConfigurationProperties</code> 类：</p>
<p translation-origin="off">As an example, consider the following <code>@ConfigurationProperties</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.context.properties.ConfigurationProperties;

</span><span class="fold-block">@ConfigurationProperties(prefix = "my.main-project.person")
public class MyPersonProperties {

    private String firstName;

    public String getFirstName() {
        return this.firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">使用上述代码，可以使用以下属性名称：</p>
<p translation-origin="off">With the preceding code, the following properties names can all be used:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. relaxed binding</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">财产</p>
  <p translation-origin="off">Property</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">笔记</p>
  <p translation-origin="off">Note</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>my.main-project.person.first-name</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">Kebab 案例，推荐用于 <code>.properties</code> 和 <code>.yml</code> 文件。</p><p class="tableblock" translation-origin="off">Kebab case, which is recommended for use in <code>.properties</code> and <code>.yml</code> files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>my.main-project.person.firstName</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">标准驼峰式语法。</p><p class="tableblock" translation-origin="off">Standard camel case syntax.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>my.main-project.person.first_name</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">下划线表示法，这是用于 <code>.properties</code> 和 <code>.yml</code> 文件的另一种格式。</p><p class="tableblock" translation-origin="off">Underscore notation, which is an alternative format for use in <code>.properties</code> and <code>.yml</code> files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MY_MAINPROJECT_PERSON_FIRSTNAME</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">大写格式，在使用系统环境变量时推荐使用。</p><p class="tableblock" translation-origin="off">Upper case format, which is recommended when using system environment variables.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">注释的 <code>prefix</code> 值<em>必须</em>是 kebab 大小写（小写并由 <code>-</code> 分隔，例如 <code>my.main-project.person</code> ）。</p>
<p translation-origin="off">The <code>prefix</code> value for the annotation <em>must</em> be in kebab case (lowercase and separated by <code>-</code>, such as <code>my.main-project.person</code>).</p>
</td>
</tr>
</tbody></table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. relaxed binding rules per property source</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">属性来源</p>
  <p translation-origin="off">Property Source</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">简单的</p>
  <p translation-origin="off">Simple</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">列表</p>
  <p translation-origin="off">List</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on">属性文件</p><p class="tableblock" translation-origin="off">Properties Files</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">Camel case、kebab case 或下划线表示法</p><p class="tableblock" translation-origin="off">Camel case, kebab case, or underscore notation</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">使用 <code>[ ]</code> 或逗号分隔值的标准列表语法</p><p class="tableblock" translation-origin="off">Standard list syntax using <code>[ ]</code> or comma-separated values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on">YAML 文件</p><p class="tableblock" translation-origin="off">YAML Files</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">Camel case、kebab case 或下划线表示法</p><p class="tableblock" translation-origin="off">Camel case, kebab case, or underscore notation</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">标准 YAML 列表语法或逗号分隔值</p><p class="tableblock" translation-origin="off">Standard YAML list syntax or comma-separated values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on">环境变量</p><p class="tableblock" translation-origin="off">Environment Variables</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">下划线作为分隔符的大写格式（请参阅<a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables">从环境变量绑定</a>）。</p><p class="tableblock" translation-origin="off">Upper case format with underscore as the delimiter (see <a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables">Binding from Environment Variables</a>).</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">下划线包围的数值（请参阅<a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables">从环境变量绑定</a>）</p><p class="tableblock" translation-origin="off">Numeric values surrounded by underscores (see <a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables">Binding from Environment Variables</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on">系统属性</p><p class="tableblock" translation-origin="off">System properties</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">Camel case、kebab case 或下划线表示法</p><p class="tableblock" translation-origin="off">Camel case, kebab case, or underscore notation</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">使用 <code>[ ]</code> 或逗号分隔值的标准列表语法</p><p class="tableblock" translation-origin="off">Standard list syntax using <code>[ ]</code> or comma-separated values</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">我们建议尽可能以小写的 kebab 格式存储属性，例如 <code>my.person.first-name=Rod</code> 。</p>
<p translation-origin="off">We recommend that, when possible, properties are stored in lower-case kebab format, such as <code>my.person.first-name=Rod</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="features.external-config.typesafe-configuration-properties.relaxed-binding.maps" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.maps"></a>绑定地图</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.maps"></a>Binding Maps</h5>
<div class="paragraph">
<p translation-result="on">绑定到 <code>Map</code> 属性时，你可能需要使用特殊的括号表示法，以便保留原始 <code>key</code> 。如果键没有被 <code>[]</code> 包围，则任何非字母数字字符，<code>-</code> 或 <code>.</code> 被删除。</p>
<p translation-origin="off">When binding to <code>Map</code> properties you may need to use a special bracket notation so that the original <code>key</code> value is preserved.
If the key is not surrounded by <code>[]</code>, any characters that are not alpha-numeric, <code>-</code> or <code>.</code> are removed.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，考虑将以下属性绑定到 <code>Map&lt;String,String&gt;</code> ：</p>
<p translation-origin="off">For example, consider binding the following properties to a <code>Map&lt;String,String&gt;</code>:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">my.map.[/key1]=value1
my.map.[/key2]=value2
my.map./key3=value3</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">my:
  map:
    "[/key1]": "value1"
    "[/key2]": "value2"
    "/key3": "value3"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">对于 YAML 文件，括号需要用引号括起来才能正确解析键。</p>
<p translation-origin="off">For YAML files, the brackets need to be surrounded by quotes for the keys to be parsed properly.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">上面的属性将绑定到以 <code>/key1</code> 、 <code>/key2</code> 和 <code>key3</code> 作为 <code>Map</code> 中的键的映射。斜线已从 <code>key3</code> 中删除，因为它没有被方括号包围。</p>
<p translation-origin="off">The properties above will bind to a <code>Map</code> with <code>/key1</code>, <code>/key2</code> and <code>key3</code> as the keys in the map.
The slash has been removed from <code>key3</code> because it was not surrounded by square brackets.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你的 <code>key</code> 包含 <code>.</code> 并且你绑定到非标量值。例如，将 <code>ab=c</code> 绑定到 <code>Map&lt;String, Object&gt;</code> 将返回带有条目 <code>{"a"={"b"="c"}}</code> 的 Map 而 <code>[ab]=c</code> 将返回带有条目 <code>{"ab"="c"}</code> 。</p>
<p translation-origin="off">You may also occasionally need to use the bracket notation if your <code>key</code> contains a <code>.</code> and you are binding to non-scalar value.
For example, binding <code>a.b=c</code> to <code>Map&lt;String, Object&gt;</code> will return a Map with the entry <code>{"a"={"b"="c"}}</code> whereas <code>[a.b]=c</code> will return a Map with the entry <code>{"a.b"="c"}</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables"></a>从环境变量绑定</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding.environment-variables"></a>Binding from Environment Variables</h5>
<div class="paragraph">
<p translation-result="on">大多数操作系统对可用于环境变量的名称施加了严格的规则。例如，Linux shell 变量只能包含字母（ <code>a</code> 到 <code>z</code> 或 <code>A</code> 到 <code>Z</code> ）、数字（ <code>0</code> 到 <code>9</code> ）或下划线字符 ( <code>_</code> )。按照惯例，Unix shell 变量的名称也将大写。</p>
<p translation-origin="off">Most operating systems impose strict rules around the names that can be used for environment variables.
For example, Linux shell variables can contain only letters (<code>a</code> to <code>z</code> or <code>A</code> to <code>Z</code>), numbers (<code>0</code> to <code>9</code>) or the underscore character (<code>_</code>).
By convention, Unix shell variables will also have their names in UPPERCASE.</p>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 宽松的绑定规则尽可能地与这些命名限制兼容。</p>
<p translation-origin="off">Spring Boot’s relaxed binding rules are, as much as possible, designed to be compatible with these naming restrictions.</p>
</div>
<div class="paragraph">
<p translation-result="on">要将规范形式的属性名称转换为环境变量名称，你可以遵循以下规则：</p>
<p translation-origin="off">To convert a property name in the canonical-form to an environment variable name you can follow these rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">将点 ( <code>.</code> ) 替换为下划线 ( <code>_</code> )。</p>
<p translation-origin="off">Replace dots (<code>.</code>) with underscores (<code>_</code>).</p>
</li>
<li>
<p translation-result="on">删除所有破折号 ( <code>-</code> )。</p>
<p translation-origin="off">Remove any dashes (<code>-</code>).</p>
</li>
<li>
<p translation-result="on">转换为大写。</p>
<p translation-origin="off">Convert to uppercase.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">例如，配置属性 <code>spring.main.log-startup-info</code> 将是一个名为 <code>SPRING_MAIN_LOGSTARTUPINFO</code> 的环境变量。</p>
<p translation-origin="off">For example, the configuration property <code>spring.main.log-startup-info</code> would be an environment variable named <code>SPRING_MAIN_LOGSTARTUPINFO</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">绑定到对象列表时也可以使用环境变量。要绑定到 <code>List</code> ，元素编号应在变量名中用下划线括起来。</p>
<p translation-origin="off">Environment variables can also be used when binding to object lists.
To bind to a <code>List</code>, the element number should be surrounded with underscores in the variable name.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，配置属性 <code>my.service[0].other</code> 将使用名为 <code>MY_SERVICE_0_OTHER</code> 的环境变量。</p>
<p translation-origin="off">For example, the configuration property <code>my.service[0].other</code> would use an environment variable named <code>MY_SERVICE_0_OTHER</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.merging-complex-types" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.merging-complex-types"></a> 2.8.7. 合并复杂类型</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.merging-complex-types"></a>2.8.7. Merging Complex Types</h4>
<div class="paragraph">
<p translation-result="on">当列表配置在多个位置时，覆盖通过替换整个列表来工作。</p>
<p translation-origin="off">When lists are configured in more than one place, overriding works by replacing the entire list.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，假设 <code>MyPojo</code> 对象的 <code>name</code> 和 <code>description</code> 属性默认为 <code>null</code> 。以下示例公开了 <code>MyProperties</code> 中的 <code>MyPojo</code> 对象列表：</p>
<p translation-origin="off">For example, assume a <code>MyPojo</code> object with <code>name</code> and <code>description</code> attributes that are <code>null</code> by default.
The following example exposes a list of <code>MyPojo</code> objects from <code>MyProperties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.util.ArrayList;
import java.util.List;

import org.springframework.boot.context.properties.ConfigurationProperties;

</span><span class="fold-block">@ConfigurationProperties("my")
public class MyProperties {

    private final List&lt;MyPojo&gt; list = new ArrayList&lt;&gt;();

    public List&lt;MyPojo&gt; getList() {
        return this.list;
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">考虑以下配置：</p>
<p translation-origin="off">Consider the following configuration:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">my.list[0].name=my name
my.list[0].description=my description
#---
spring.config.activate.on-profile=dev
my.list[0].name=my another name</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">my:
  list:
  - name: "my name"
    description: "my description"
---
spring:
  config:
    activate:
      on-profile: "dev"
my:
  list:
  - name: "my another name"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果 <code>dev</code> 配置文件未激活，则 <code>MyProperties.list</code> 包含一个 <code>MyPojo</code> 条目，如前所述。但是，如果启用了 <code>dev</code> 配置文件，该 <code>list</code> <em>仍然</em>只包含一个条目（名称为 <code>my another name</code> ，描述为 <code>null</code> ）。此配置<em>不会</em>将第二个 <code>MyPojo</code> 实例添加到列表中，并且不会合并项目。</p>
<p translation-origin="off">If the <code>dev</code> profile is not active, <code>MyProperties.list</code> contains one <code>MyPojo</code> entry, as previously defined.
If the <code>dev</code> profile is enabled, however, the <code>list</code> <em>still</em> contains only one entry (with a name of <code>my another name</code> and a description of <code>null</code>).
This configuration <em>does not</em> add a second <code>MyPojo</code> instance to the list, and it does not merge the items.</p>
</div>
<div class="paragraph">
<p translation-result="on">当在多个配置文件中指定一个 <code>List</code> 时，将使用具有最高优先级的一个（并且只有那个）。考虑以下示例：</p>
<p translation-origin="off">When a <code>List</code> is specified in multiple profiles, the one with the highest priority (and only that one) is used.
Consider the following example:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">my.list[0].name=my name
my.list[0].description=my description
my.list[1].name=another name
my.list[1].description=another description
#---
spring.config.activate.on-profile=dev
my.list[0].name=my another name</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">my:
  list:
  - name: "my name"
    description: "my description"
  - name: "another name"
    description: "another description"
---
spring:
  config:
    activate:
      on-profile: "dev"
my:
  list:
  - name: "my another name"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">在前面的示例中，如果 <code>dev</code> 配置文件处于活动状态，则 <code>MyProperties.list</code> 包含<em>一个</em><code>MyPojo</code> 条目（名称为 <code>my another name</code> ，描述为 <code>null</code> ）。对于 YAML，逗号分隔的列表和 YAML 列表都可用于完全覆盖列表的内容。</p>
<p translation-origin="off">In the preceding example, if the <code>dev</code> profile is active, <code>MyProperties.list</code> contains <em>one</em> <code>MyPojo</code> entry (with a name of <code>my another name</code> and a description of <code>null</code>).
For YAML, both comma-separated lists and YAML lists can be used for completely overriding the contents of the list.</p>
</div>
<div class="paragraph">
<p translation-result="on">对于 <code>Map</code> 属性，你可以绑定从多个来源提取的属性值。但是，对于多个源中的相同属性，将使用具有最高优先级的属性。以下示例从 <code>MyProperties</code> 公开 <code>Map&lt;String, MyPojo&gt;</code> ：</p>
<p translation-origin="off">For <code>Map</code> properties, you can bind with property values drawn from multiple sources.
However, for the same property in multiple sources, the one with the highest priority is used.
The following example exposes a <code>Map&lt;String, MyPojo&gt;</code> from <code>MyProperties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.util.LinkedHashMap;
import java.util.Map;

import org.springframework.boot.context.properties.ConfigurationProperties;

</span><span class="fold-block">@ConfigurationProperties("my")
public class MyProperties {

    private final Map&lt;String, MyPojo&gt; map = new LinkedHashMap&lt;&gt;();

    public Map&lt;String, MyPojo&gt; getMap() {
        return this.map;
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">考虑以下配置：</p>
<p translation-origin="off">Consider the following configuration:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">my.map.key1.name=my name 1
my.map.key1.description=my description 1
#---
spring.config.activate.on-profile=dev
my.map.key1.name=dev name 1
my.map.key2.name=dev name 2
my.map.key2.description=dev description 2</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">my:
  map:
    key1:
      name: "my name 1"
      description: "my description 1"
---
spring:
  config:
    activate:
      on-profile: "dev"
my:
  map:
    key1:
      name: "dev name 1"
    key2:
      name: "dev name 2"
      description: "dev description 2"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果 <code>dev</code> 配置文件未激活，则 <code>MyProperties.map</code> 包含一个带有键 <code>key1</code> 的条目（名称为 <code>my name 1</code> ，描述为 <code>my description 1</code> ）。但是，如果启用了 <code>dev</code> 配置文件，则 <code>map</code> 包含两个条目，其键为 <code>key1</code> （名称为 <code>dev name 1</code> ，描述为 <code>my description 1</code> ）和 <code>key2</code> （名称为 <code>dev name 2</code> ，描述为 <code>dev description 2</code> ） .</p>
<p translation-origin="off">If the <code>dev</code> profile is not active, <code>MyProperties.map</code> contains one entry with key <code>key1</code> (with a name of <code>my name 1</code> and a description of <code>my description 1</code>).
If the <code>dev</code> profile is enabled, however, <code>map</code> contains two entries with keys <code>key1</code> (with a name of <code>dev name 1</code> and a description of <code>my description 1</code>) and <code>key2</code> (with a name of <code>dev name 2</code> and a description of <code>dev description 2</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">上述合并规则适用于所有属性源的属性，而不仅仅是文件。</p>
<p translation-origin="off">The preceding merging rules apply to properties from all property sources, and not just files.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.conversion" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion"></a> 2.8.8. 属性转换</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.conversion"></a>2.8.8. Properties Conversion</h4>
<div class="paragraph">
<p translation-result="on">Spring Boot 在绑定到 <code>@ConfigurationProperties</code> bean 时尝试将外部应用程序属性强制转换为正确的类型。如果你需要自定义类型转换，你可以提供 <code>ConversionService</code> bean（带有名为 <code>conversionService</code> 的 bean）或自定义属性编辑器（通过 <code>CustomEditorConfigurer</code> bean）或自定义 <code>Converters</code> （带有注释为 <code>@ConfigurationPropertiesBinding</code> 的 bean 定义）。</p>
<p translation-origin="off">Spring Boot attempts to coerce the external application properties to the right type when it binds to the <code>@ConfigurationProperties</code> beans.
If you need custom type conversion, you can provide a <code>ConversionService</code> bean (with a bean named <code>conversionService</code>) or custom property editors (through a <code>CustomEditorConfigurer</code> bean) or custom <code>Converters</code> (with bean definitions annotated as <code>@ConfigurationPropertiesBinding</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">由于此 bean 在应用程序生命周期的早期被请求，因此请确保限制你的 <code>ConversionService</code> 正在使用的依赖项。通常，你需要的任何依赖项可能不会在创建时完全初始化。如果配置键强制不需要自定义 <code>ConversionService</code> 并且仅依赖使用 <code>@ConfigurationPropertiesBinding</code> 限定的自定义转换器，你可能需要重命名自定义 ConversionService。</p>
<p translation-origin="off">As this bean is requested very early during the application lifecycle, make sure to limit the dependencies that your <code>ConversionService</code> is using.
Typically, any dependency that you require may not be fully initialized at creation time.
You may want to rename your custom <code>ConversionService</code> if it is not required for configuration keys coercion and only rely on custom converters qualified with <code>@ConfigurationPropertiesBinding</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="features.external-config.typesafe-configuration-properties.conversion.durations" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion.durations"></a>转换持续时间</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.conversion.durations"></a>Converting Durations</h5>
<div class="paragraph">
<p translation-result="on">Spring Boot 专门支持表达持续时间。如果你公开 <code>java.time.Duration</code> 属性，则应用程序属性中的以下格式可用：</p>
<p translation-origin="off">Spring Boot has dedicated support for expressing durations.
If you expose a <code>java.time.Duration</code> property, the following formats in application properties are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">常规 <code>long</code> 表示（使用毫秒作为默认单位，除非已指定 <code>@DurationUnit</code> ）</p>
<p translation-origin="off">A regular <code>long</code> representation (using milliseconds as the default unit unless a <code>@DurationUnit</code> has been specified)</p>
</li>
<li>
<p translation-result="on"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-"><code>java.time.Duration</code> 使用</a>的标准 ISO-8601 格式</p>
<p translation-origin="off">The standard ISO-8601 format <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-">used by <code>java.time.Duration</code></a></p>
</li>
<li>
<p translation-result="on">一种更易读的格式，其中值和单位耦合（ <code>10s</code> 表示 10 秒）</p>
<p translation-origin="off">A more readable format where the value and the unit are coupled (<code>10s</code> means 10 seconds)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">考虑以下示例：</p>
<p translation-origin="off">Consider the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.time.Duration;
import java.time.temporal.ChronoUnit;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.convert.DurationUnit;

</span><span class="fold-block">@ConfigurationProperties("my")
public class MyProperties {

    @DurationUnit(ChronoUnit.SECONDS)
    private Duration sessionTimeout = Duration.ofSeconds(30);

    private Duration readTimeout = Duration.ofMillis(1000);

</span><span class="fold-block hide-when-unfolded">    // getters / setters...

</span><span class="fold-block hide-when-folded">    public Duration getSessionTimeout() {
        return this.sessionTimeout;
    }

    public void setSessionTimeout(Duration sessionTimeout) {
        this.sessionTimeout = sessionTimeout;
    }

    public Duration getReadTimeout() {
        return this.readTimeout;
    }

    public void setReadTimeout(Duration readTimeout) {
        this.readTimeout = readTimeout;
    }

</span><span class="fold-block">}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">要指定 30 秒的会话超时，<code>30</code> ，<code>PT30S</code> 和 <code>30s</code> 都是等效的。500ms 的读取超时可以用以下任何一种形式指定： <code>500</code> 、 <code>PT0.5S</code> 和 <code>500ms</code> 。</p>
<p translation-origin="off">To specify a session timeout of 30 seconds, <code>30</code>, <code>PT30S</code> and <code>30s</code> are all equivalent.
A read timeout of 500ms can be specified in any of the following form: <code>500</code>, <code>PT0.5S</code> and <code>500ms</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">你还可以使用任何受支持的单位。这些是：</p>
<p translation-origin="off">You can also use any of the supported units.
These are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><code>ns</code> 纳秒</p>
<p translation-origin="off"><code>ns</code> for nanoseconds</p>
</li>
<li>
<p translation-result="on"><code>us</code> 微秒</p>
<p translation-origin="off"><code>us</code> for microseconds</p>
</li>
<li>
<p translation-result="on"><code>ms</code> 为毫秒</p>
<p translation-origin="off"><code>ms</code> for milliseconds</p>
</li>
<li>
<p translation-result="on"><code>s</code> 秒</p>
<p translation-origin="off"><code>s</code> for seconds</p>
</li>
<li>
<p translation-result="on"><code>m</code> 分钟</p>
<p translation-origin="off"><code>m</code> for minutes</p>
</li>
<li>
<p translation-result="on"><code>h</code> 几个小时</p>
<p translation-origin="off"><code>h</code> for hours</p>
</li>
<li>
<p translation-result="on"><code>d</code> 几天</p>
<p translation-origin="off"><code>d</code> for days</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">默认单位是毫秒，可以使用 <code>@DurationUnit</code> 覆盖，如上面的示例所示。</p>
<p translation-origin="off">The default unit is milliseconds and can be overridden using <code>@DurationUnit</code> as illustrated in the sample above.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你更喜欢使用构造函数绑定，则可以公开相同的属性，如下例所示：</p>
<p translation-origin="off">If you prefer to use constructor binding, the same properties can be exposed, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.time.Duration;
import java.time.temporal.ChronoUnit;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.context.properties.ConstructorBinding;
import org.springframework.boot.context.properties.bind.DefaultValue;
import org.springframework.boot.convert.DurationUnit;

</span><span class="fold-block">@ConfigurationProperties("my")
@ConstructorBinding
public class MyProperties {

</span><span class="fold-block hide-when-unfolded">    // fields...

</span><span class="fold-block hide-when-folded">    private final Duration sessionTimeout;

    private final Duration readTimeout;

</span><span class="fold-block">    public MyProperties(@DurationUnit(ChronoUnit.SECONDS) @DefaultValue("30s") Duration sessionTimeout,
            @DefaultValue("1000ms") Duration readTimeout) {
        this.sessionTimeout = sessionTimeout;
        this.readTimeout = readTimeout;
    }

</span><span class="fold-block hide-when-unfolded">    // getters...

</span><span class="fold-block hide-when-folded">    public Duration getSessionTimeout() {
        return this.sessionTimeout;
    }

    public Duration getReadTimeout() {
        return this.readTimeout;
    }

</span><span class="fold-block">}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果要升级 <code>Long</code> 属性，请确保定义单位（使用 <code>@DurationUnit</code> ）如果它不是毫秒。这样做提供了一个透明的升级路径，同时支持更丰富的格式。</p>
<p translation-origin="off">If you are upgrading a <code>Long</code> property, make sure to define the unit (using <code>@DurationUnit</code>) if it is not milliseconds.
Doing so gives a transparent upgrade path while supporting a much richer format.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="features.external-config.typesafe-configuration-properties.conversion.periods" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion.periods"></a>转换期间</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.conversion.periods"></a>Converting periods</h5>
<div class="paragraph">
<p translation-result="on">除了持续时间，Spring Boot 还可以使用 <code>java.time.Period</code> 类型。以下格式可用于应用程序属性：</p>
<p translation-origin="off">In addition to durations, Spring Boot can also work with <code>java.time.Period</code> type.
The following formats can be used in application properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">常规的 <code>int</code> 表示（使用天作为默认单位，除非指定了 <code>@PeriodUnit</code> ）</p>
<p translation-origin="off">An regular <code>int</code> representation (using days as the default unit unless a <code>@PeriodUnit</code> has been specified)</p>
</li>
<li>
<p translation-result="on"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Period.html#parse-java.lang.CharSequence-"><code>java.time.Period</code> 使用</a>的标准 ISO-8601 格式</p>
<p translation-origin="off">The standard ISO-8601 format <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Period.html#parse-java.lang.CharSequence-">used by <code>java.time.Period</code></a></p>
</li>
<li>
<p translation-result="on">一种更简单的格式，其中值和单位对耦合（ <code>1y3d</code> 表示 1 年零 3 天）</p>
<p translation-origin="off">A simpler format where the value and the unit pairs are coupled (<code>1y3d</code> means 1 year and 3 days)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">简单格式支持以下单位：</p>
<p translation-origin="off">The following units are supported with the simple format:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><code>y</code></p>
<p translation-origin="off"><code>y</code> for years</p>
</li>
<li>
<p translation-result="on"><code>m</code> 几个月</p>
<p translation-origin="off"><code>m</code> for months</p>
</li>
<li>
<p translation-result="on"><code>w</code> 几周</p>
<p translation-origin="off"><code>w</code> for weeks</p>
</li>
<li>
<p translation-result="on"><code>d</code> 几天</p>
<p translation-origin="off"><code>d</code> for days</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on"><code>java.time.Period</code> 类型从不实际存储周数，它是一个表示“7 天”的快捷方式。</p>
<p translation-origin="off">The <code>java.time.Period</code> type never actually stores the number of weeks, it is a shortcut that means “7 days”.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="features.external-config.typesafe-configuration-properties.conversion.data-sizes" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.conversion.data-sizes"></a>转换数据大小</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.conversion.data-sizes"></a>Converting Data Sizes</h5>
<div class="paragraph">
<p translation-result="on">Spring Framework 有一个 <code>DataSize</code> 值类型，它以字节为单位表示大小。如果你公开 <code>DataSize</code> 属性，则应用程序属性中的以下格式可用：</p>
<p translation-origin="off">Spring Framework has a <code>DataSize</code> value type that expresses a size in bytes.
If you expose a <code>DataSize</code> property, the following formats in application properties are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">常规 <code>long</code> 表示（使用字节作为默认单位，除非已指定 <code>@DataSizeUnit</code> ）</p>
<p translation-origin="off">A regular <code>long</code> representation (using bytes as the default unit unless a <code>@DataSizeUnit</code> has been specified)</p>
</li>
<li>
<p translation-result="on">一种更易读的格式，其中值和单位是耦合的（ <code>10MB</code> 表示 10 兆字节）</p>
<p translation-origin="off">A more readable format where the value and the unit are coupled (<code>10MB</code> means 10 megabytes)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">考虑以下示例：</p>
<p translation-origin="off">Consider the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.convert.DataSizeUnit;
import org.springframework.util.unit.DataSize;
import org.springframework.util.unit.DataUnit;

</span><span class="fold-block">@ConfigurationProperties("my")
public class MyProperties {

    @DataSizeUnit(DataUnit.MEGABYTES)
    private DataSize bufferSize = DataSize.ofMegabytes(2);

    private DataSize sizeThreshold = DataSize.ofBytes(512);

</span><span class="fold-block hide-when-unfolded">    // getters/setters...

</span><span class="fold-block hide-when-folded">    public DataSize getBufferSize() {
        return this.bufferSize;
    }

    public void setBufferSize(DataSize bufferSize) {
        this.bufferSize = bufferSize;
    }

    public DataSize getSizeThreshold() {
        return this.sizeThreshold;
    }

    public void setSizeThreshold(DataSize sizeThreshold) {
        this.sizeThreshold = sizeThreshold;
    }

</span><span class="fold-block">}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">要指定 10 MB 的缓冲区大小，<code>10</code> 和 <code>10MB</code> 是等效的。可以将 256 字节的大小阈值指定为 <code>256</code> 或 <code>256B</code> 。</p>
<p translation-origin="off">To specify a buffer size of 10 megabytes, <code>10</code> and <code>10MB</code> are equivalent.
A size threshold of 256 bytes can be specified as <code>256</code> or <code>256B</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">你还可以使用任何受支持的单位。这些是：</p>
<p translation-origin="off">You can also use any of the supported units.
These are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><code>B</code> 代表字节</p>
<p translation-origin="off"><code>B</code> for bytes</p>
</li>
<li>
<p translation-result="on"><code>KB</code> 为千字节</p>
<p translation-origin="off"><code>KB</code> for kilobytes</p>
</li>
<li>
<p translation-result="on"><code>MB</code> 为兆字节</p>
<p translation-origin="off"><code>MB</code> for megabytes</p>
</li>
<li>
<p translation-result="on"><code>GB</code> 为千兆字节</p>
<p translation-origin="off"><code>GB</code> for gigabytes</p>
</li>
<li>
<p translation-result="on"><code>TB</code> 为 TB</p>
<p translation-origin="off"><code>TB</code> for terabytes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">默认单位是字节，可以使用 <code>@DataSizeUnit</code> 覆盖，如上面的示例所示。</p>
<p translation-origin="off">The default unit is bytes and can be overridden using <code>@DataSizeUnit</code> as illustrated in the sample above.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你更喜欢使用构造函数绑定，则可以公开相同的属性，如下例所示：</p>
<p translation-origin="off">If you prefer to use constructor binding, the same properties can be exposed, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.boot.context.properties.ConstructorBinding;
import org.springframework.boot.context.properties.bind.DefaultValue;
import org.springframework.boot.convert.DataSizeUnit;
import org.springframework.util.unit.DataSize;
import org.springframework.util.unit.DataUnit;

</span><span class="fold-block">@ConfigurationProperties("my")
@ConstructorBinding
public class MyProperties {

</span><span class="fold-block hide-when-unfolded">    // fields...

</span><span class="fold-block hide-when-folded">    private final DataSize bufferSize;

    private final DataSize sizeThreshold;

</span><span class="fold-block">    public MyProperties(@DataSizeUnit(DataUnit.MEGABYTES) @DefaultValue("2MB") DataSize bufferSize,
            @DefaultValue("512B") DataSize sizeThreshold) {
        this.bufferSize = bufferSize;
        this.sizeThreshold = sizeThreshold;
    }

</span><span class="fold-block hide-when-unfolded">    // getters...

</span><span class="fold-block hide-when-folded">    public DataSize getBufferSize() {
        return this.bufferSize;
    }

    public DataSize getSizeThreshold() {
        return this.sizeThreshold;
    }

</span><span class="fold-block">}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果要升级 <code>Long</code> 属性，请确保定义单位（使用 <code>@DataSizeUnit</code> ）如果它不是字节。这样做提供了一个透明的升级路径，同时支持更丰富的格式。</p>
<p translation-origin="off">If you are upgrading a <code>Long</code> property, make sure to define the unit (using <code>@DataSizeUnit</code>) if it is not bytes.
Doing so gives a transparent upgrade path while supporting a much richer format.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.validation" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.validation"></a> 2.8.9.  @ConfigurationProperties 验证</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.validation"></a>2.8.9. @ConfigurationProperties Validation</h4>
<div class="paragraph">
<p translation-result="on">每当使用 Spring 的 <code>@Validated</code> 注解进行注解时，Spring Boot 都会尝试验证 <code>@ConfigurationProperties</code> 类。你可以直接在配置类上使用 JSR-303 <code>javax.validation</code> 约束注释。为此，请确保你的类路径中存在兼容的 JSR-303 实现，然后将约束注释添加到你的字段，如以下示例所示：</p>
<p translation-origin="off">Spring Boot attempts to validate <code>@ConfigurationProperties</code> classes whenever they are annotated with Spring’s <code>@Validated</code> annotation.
You can use JSR-303 <code>javax.validation</code> constraint annotations directly on your configuration class.
To do so, ensure that a compliant JSR-303 implementation is on your classpath and then add constraint annotations to your fields, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.net.InetAddress;

import javax.validation.constraints.NotNull;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.validation.annotation.Validated;

</span><span class="fold-block">@ConfigurationProperties("my.service")
@Validated
public class MyProperties {

    @NotNull
    private InetAddress remoteAddress;

</span><span class="fold-block hide-when-unfolded">    // getters/setters...

</span><span class="fold-block hide-when-folded">    public InetAddress getRemoteAddress() {
        return this.remoteAddress;
    }

    public void setRemoteAddress(InetAddress remoteAddress) {
        this.remoteAddress = remoteAddress;
    }

</span><span class="fold-block">}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">你还可以通过使用 <code>@Validated</code> 注释创建配置属性的 <code>@Bean</code> 方法来触发验证。</p>
<p translation-origin="off">You can also trigger validation by annotating the <code>@Bean</code> method that creates the configuration properties with <code>@Validated</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">为了确保始终为嵌套属性触发验证，即使没有找到任何属性，也必须使用 <code>@Valid</code> 注释关联的字段。以下示例基于前面的 <code>MyProperties</code> 示例构建：</p>
<p translation-origin="off">To ensure that validation is always triggered for nested properties, even when no properties are found, the associated field must be annotated with <code>@Valid</code>.
The following example builds on the preceding <code>MyProperties</code> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.net.InetAddress;

import javax.validation.Valid;
import javax.validation.constraints.NotEmpty;
import javax.validation.constraints.NotNull;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.validation.annotation.Validated;

</span><span class="fold-block">@ConfigurationProperties("my.service")
@Validated
public class MyProperties {

    @NotNull
    private InetAddress remoteAddress;

    @Valid
    private final Security security = new Security();

</span><span class="fold-block hide-when-unfolded">    // getters/setters...

</span><span class="fold-block hide-when-folded">    public InetAddress getRemoteAddress() {
        return this.remoteAddress;
    }

    public void setRemoteAddress(InetAddress remoteAddress) {
        this.remoteAddress = remoteAddress;
    }

    public Security getSecurity() {
        return this.security;
    }

</span><span class="fold-block">    public static class Security {

        @NotEmpty
        private String username;

</span><span class="fold-block hide-when-unfolded">        // getters/setters...

</span><span class="fold-block hide-when-folded">        public String getUsername() {
            return this.username;
        }

        public void setUsername(String username) {
            this.username = username;
        }

</span><span class="fold-block">    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">你还可以通过创建名为 <code>configurationPropertiesValidator</code> 的 bean 定义来添加自定义 Spring <code>Validator</code> 。<code>@Bean</code> 方法应该声明为 <code>static</code> 。配置属性验证器是在应用程序生命周期的早期创建的，将 <code>@Bean</code> 方法声明为静态可以创建 bean，而无需实例化 <code>@Configuration</code> 类。这样做可以避免早期实例化可能导致的任何问题。</p>
<p translation-origin="off">You can also add a custom Spring <code>Validator</code> by creating a bean definition called <code>configurationPropertiesValidator</code>.
The <code>@Bean</code> method should be declared <code>static</code>.
The configuration properties validator is created very early in the application’s lifecycle, and declaring the <code>@Bean</code> method as static lets the bean be created without having to instantiate the <code>@Configuration</code> class.
Doing so avoids any problems that may be caused by early instantiation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>spring-boot-actuator</code> 模块包括一个暴露所有 <code>@ConfigurationProperties</code> bean 的端点。将你的 Web 浏览器指向 <code>/actuator/configprops</code> 或使用等效的 JMX 端点。有关详细信息，请参阅“<a href="actuator.html#actuator.endpoints">生产就绪功能</a>”部分。</p>
<p translation-origin="off">The <code>spring-boot-actuator</code> module includes an endpoint that exposes all <code>@ConfigurationProperties</code> beans.
Point your web browser to <code>/actuator/configprops</code> or use the equivalent JMX endpoint.
See the "<a href="actuator.html#actuator.endpoints">Production ready features</a>" section for details.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.external-config.typesafe-configuration-properties.vs-value-annotation" translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.vs-value-annotation"></a> 2.8.10.  @ConfigurationProperties 与 @Value</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.external-config.typesafe-configuration-properties.vs-value-annotation"></a>2.8.10. @ConfigurationProperties vs. @Value</h4>
<div class="paragraph">
<p translation-result="on"><code>@Value</code> 注解是一个核心容器特性，它不提供与类型安全配置属性相同的特性。下表总结了 <code>@ConfigurationProperties</code> 和 <code>@Value</code> 支持的功能：</p>
<p translation-origin="off">The <code>@Value</code> annotation is a core container feature, and it does not provide the same features as type-safe configuration properties.
The following table summarizes the features that are supported by <code>@ConfigurationProperties</code> and <code>@Value</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">特征</p>
  <p translation-origin="off">Feature</p>
</th>
<th class="tableblock halign-left valign-top">
  <p><code>@ConfigurationProperties</code></p>
</th>
<th class="tableblock halign-left valign-top">
  <p><code>@Value</code></p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding">轻松绑定</a></p><p class="tableblock" translation-origin="off"><a href="features.html#features.external-config.typesafe-configuration-properties.relaxed-binding">Relaxed binding</a></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">是的</p><p class="tableblock" translation-origin="off">Yes</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">有限（见<a href="features.html#features.external-config.typesafe-configuration-properties.vs-value-annotation.note">下文注释</a>）</p><p class="tableblock" translation-origin="off">Limited (see <a href="features.html#features.external-config.typesafe-configuration-properties.vs-value-annotation.note">note below</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on"><a href="configuration-metadata.html#configuration-metadata">元数据支持</a></p><p class="tableblock" translation-origin="off"><a href="configuration-metadata.html#configuration-metadata">Meta-data support</a></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">是的</p><p class="tableblock" translation-origin="off">Yes</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">不</p><p class="tableblock" translation-origin="off">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on"><code>SpEL</code> 评估</p><p class="tableblock" translation-origin="off"><code>SpEL</code> evaluation</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">不</p><p class="tableblock" translation-origin="off">No</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">是的</p><p class="tableblock" translation-origin="off">Yes</p></td>
</tr>
</tbody>
</table>
<div id="features.external-config.typesafe-configuration-properties.vs-value-annotation.note" class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">如果你确实想使用 <code>@Value</code> ，我们建议你使用其规范形式（kebab-case 仅使用小写字母）引用属性名称。这将允许 Spring Boot 使用与放松绑定 <code>@ConfigurationProperties</code> 时相同的逻辑。例如，<code>@Value("{demo.item-price}")</code> 将从 <code>application.properties</code> 文件中获取 <code>demo.item-price</code> 和 <code>demo.itemPrice</code> 表单，以及从系统环境中 <code>DEMO_ITEMPRICE</code> 。如果你改用 <code>@Value("{demo.itemPrice}")</code> ，则不会考虑 <code>demo.item-price</code> 和 <code>DEMO_ITEMPRICE</code> 。</p>
<p translation-origin="off">If you do want to use <code>@Value</code>, we recommend that you refer to property names using their canonical form (kebab-case using only lowercase letters).
This will allow Spring Boot to use the same logic as it does when relaxed binding <code>@ConfigurationProperties</code>.
For example, <code>@Value("{demo.item-price}")</code> will pick up <code>demo.item-price</code> and <code>demo.itemPrice</code> forms from the <code>application.properties</code> file, as well as <code>DEMO_ITEMPRICE</code> from the system environment.
If you used <code>@Value("{demo.itemPrice}")</code> instead, <code>demo.item-price</code> and <code>DEMO_ITEMPRICE</code> would not be considered.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果你为自己的组件定义了一组配置键，我们建议你将它们分组到使用 <code>@ConfigurationProperties</code> 注释的 POJO 中。这样做将为你提供结构化的、类型安全的对象，你可以将其注入到你自己的 bean 中。</p>
<p translation-origin="off">If you define a set of configuration keys for your own components, we recommend you group them in a POJO annotated with <code>@ConfigurationProperties</code>.
Doing so will provide you with structured, type-safe object that you can inject into your own beans.</p>
</div>
<div class="paragraph">
<p translation-result="on">在解析这些文件和填充环境时，不会处理来自<a href="features.html#features.external-config.files">应用程序属性文件</a>的 <code>SpEL</code> 表达式。但是，可以在 <code>@Value</code> 中编写 <code>SpEL</code> 表达式。如果应用程序属性文件中的属性值是 <code>SpEL</code> 表达式，则将在通过 <code>@Value</code> 使用时对其进行评估。</p>
<p translation-origin="off"><code>SpEL</code> expressions from <a href="features.html#features.external-config.files">application property files</a> are not processed at time of parsing these files and populating the environment.
However, it is possible to write a <code>SpEL</code> expression in <code>@Value</code>.
If the value of a property from an application property file is a <code>SpEL</code> expression, it will be evaluated when consumed through <code>@Value</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.profiles" translation-result="on"><a href="features.html#features.profiles"></a>3. 简介</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.profiles"></a>3. Profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">Spring Profiles 提供了一种分离应用程序配置部分并使其仅在某些环境中可用的方法。任何 <code>@Component</code> 、 <code>@Configuration</code> 或 <code>@ConfigurationProperties</code> 都可以用 <code>@Profile</code> 标记以限制何时加载，如下例所示：</p>
<p translation-origin="off">Spring Profiles provide a way to segregate parts of your application configuration and make it be available only in certain environments.
Any <code>@Component</code>, <code>@Configuration</code> or <code>@ConfigurationProperties</code> can be marked with <code>@Profile</code> to limit when it is loaded, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Profile;

</span><span class="fold-block">@Configuration(proxyBeanMethods = false)
@Profile("production")
public class ProductionConfiguration {

    // ...

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">如果 <code>@ConfigurationProperties</code> bean 通过 <code>@EnableConfigurationProperties</code> 注册而不是自动扫描，则需要在具有 <code>@EnableConfigurationProperties</code> 注解的 <code>@Configuration</code> 类上指定 <code>@Profile</code> 注解。在扫描 <code>@ConfigurationProperties</code> 的情况下，可以在 <code>@ConfigurationProperties</code> 类本身上指定 <code>@Profile</code> 。</p>
<p translation-origin="off">If <code>@ConfigurationProperties</code> beans are registered through <code>@EnableConfigurationProperties</code> instead of automatic scanning, the <code>@Profile</code> annotation needs to be specified on the <code>@Configuration</code> class that has the <code>@EnableConfigurationProperties</code> annotation.
In the case where <code>@ConfigurationProperties</code> are scanned, <code>@Profile</code> can be specified on the <code>@ConfigurationProperties</code> class itself.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>spring.profiles.active</code> <code>Environment</code> 属性来指定哪些配置文件处于活动状态。你可以通过本章前面描述的任何方式指定属性。例如，你可以将其包含在 <code>application.properties</code> 中，如下例所示：</p>
<p translation-origin="off">You can use a <code>spring.profiles.active</code> <code>Environment</code> property to specify which profiles are active.
You can specify the property in any of the ways described earlier in this chapter.
For example, you could include it in your <code>application.properties</code>, as shown in the following example:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.profiles.active=dev,hsqldb</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  profiles:
    active: "dev,hsqldb"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">你还可以使用以下开关在命令行上指定它： <code>--spring.profiles.active=dev,hsqldb</code> 。</p>
<p translation-origin="off">You could also specify it on the command line by using the following switch: <code>--spring.profiles.active=dev,hsqldb</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果没有配置文件处于活动状态，则启用默认配置文件。默认配置文件的名称是 <code>default</code> ，可以使用 <code>spring.profiles.default</code> <code>Environment</code> 属性进行调整，如以下示例所示：</p>
<p translation-origin="off">If no profile is active, a default profile is enabled.
The name of the default profile is <code>default</code> and it can be tuned using the <code>spring.profiles.default</code> <code>Environment</code> property, as shown in the following example:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.profiles.default=none</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  profiles:
    default: "none"</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="features.profiles.adding-active-profiles" translation-result="on"><a href="features.html#features.profiles.adding-active-profiles"></a>3.1. 添加活动配置文件</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.profiles.adding-active-profiles"></a>3.1. Adding Active Profiles</h3>
<div class="paragraph">
<p translation-result="on"><code>spring.profiles.active</code> 属性遵循与其他属性相同的排序规则：最高的 <code>PropertySource</code> 获胜。这意味着你可以在 <code>application.properties</code> 中指定活动配置文件，然后使用命令行开关<strong>替换</strong>它们。</p>
<p translation-origin="off">The <code>spring.profiles.active</code> property follows the same ordering rules as other properties: The highest <code>PropertySource</code> wins.
This means that you can specify active profiles in <code>application.properties</code> and then <strong>replace</strong> them by using the command line switch.</p>
</div>
<div class="paragraph">
<p translation-result="on">有时，将属性<strong>添加</strong>到活动配置文件而不是替换它们很有用。<code>SpringApplication</code> 入口点有一个用于设置附加配置文件的 Java API（即，在那些由 <code>spring.profiles.active</code> 属性激活的配置文件之上）。请参阅 SpringApplication 中的 <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/SpringApplication.html">setAdditionalProfiles</a> <code>setAdditionalProfiles()</code> 方法。如果给定的配置文件处于活动状态，则在<a href="features.html#features.profiles.groups">下一节</a>中描述的配置文件组也可用于添加活动配置文件。</p>
<p translation-origin="off">Sometimes, it is useful to have properties that <strong>add</strong> to the active profiles rather than replace them.
The <code>SpringApplication</code> entry point has a Java API for setting additional profiles (that is, on top of those activated by the <code>spring.profiles.active</code> property).
See the <code>setAdditionalProfiles()</code> method in <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/SpringApplication.html">SpringApplication</a>.
Profile groups, which are described in the <a href="features.html#features.profiles.groups">next section</a> can also be used to add active profiles if a given profile is active.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.profiles.groups" translation-result="on"><a href="features.html#features.profiles.groups"></a>3.2. 配置文件组</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.profiles.groups"></a>3.2. Profile Groups</h3>
<div class="paragraph">
<p translation-result="on">有时，你在应用程序中定义和使用的配置文件过于细化，使用起来很麻烦。例如，你可能拥有用于独立启用数据库和消息传递功能的 <code>proddb</code> 和 <code>prodmq</code> 配置文件。</p>
<p translation-origin="off">Occasionally the profiles that you define and use in your application are too fine-grained and become cumbersome to use.
For example, you might have <code>proddb</code> and <code>prodmq</code> profiles that you use to enable database and messaging features independently.</p>
</div>
<div class="paragraph">
<p translation-result="on">为了帮助解决这个问题，Spring Boot 允许你定义配置文件组。配置文件组允许你为相关的配置文件组定义逻辑名称。</p>
<p translation-origin="off">To help with this, Spring Boot lets you define profile groups.
A profile group allows you to define a logical name for a related group of profiles.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，我们可以创建一个由我们的 <code>proddb</code> 和 <code>prodmq</code> 配置文件组成的 <code>production</code> 组。</p>
<p translation-origin="off">For example, we can create a <code>production</code> group that consists of our <code>proddb</code> and <code>prodmq</code> profiles.</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.profiles.group.production[0]=proddb
spring.profiles.group.production[1]=prodmq</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  profiles:
    group:
      production:
      - "proddb"
      - "prodmq"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">我们的应用程序现在可以使用 <code>--spring.profiles.active=production</code> 启动，一键激活 <code>production</code> 、 <code>proddb</code> 和 <code>prodmq</code> 配置文件。</p>
<p translation-origin="off">Our application can now be started using <code>--spring.profiles.active=production</code> to active the <code>production</code>, <code>proddb</code> and <code>prodmq</code> profiles in one hit.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.profiles.programmatically-setting-profiles" translation-result="on"><a href="features.html#features.profiles.programmatically-setting-profiles"></a>3.3. 以编程方式设置配置文件</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.profiles.programmatically-setting-profiles"></a>3.3. Programmatically Setting Profiles</h3>
<div class="paragraph">
<p translation-result="on">你可以在应用程序运行之前通过调用 <code>SpringApplication.setAdditionalProfiles(…​)</code> 以编程方式设置活动配置文件。也可以使用 Spring 的 <code>ConfigurableEnvironment</code> 接口来激活配置文件。</p>
<p translation-origin="off">You can programmatically set active profiles by calling <code>SpringApplication.setAdditionalProfiles(…​)</code> before your application runs.
It is also possible to activate profiles by using Spring’s <code>ConfigurableEnvironment</code> interface.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.profiles.profile-specific-configuration-files" translation-result="on"><a href="features.html#features.profiles.profile-specific-configuration-files"></a>3.4. 配置文件特定的配置文件</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.profiles.profile-specific-configuration-files"></a>3.4. Profile-specific Configuration Files</h3>
<div class="paragraph">
<p translation-result="on"><code>application.properties</code> （或 <code>application.yml</code> ）和通过 <code>@ConfigurationProperties</code> 引用的文件的特定于配置文件的变体被视为文件并加载。有关详细信息，请参阅“<a href="features.html#features.external-config.files.profile-specific">配置文件特定文件</a>”。</p>
<p translation-origin="off">Profile-specific variants of both <code>application.properties</code> (or <code>application.yml</code>) and files referenced through <code>@ConfigurationProperties</code> are considered as files and loaded.
See "<a href="features.html#features.external-config.files.profile-specific">Profile Specific Files</a>" for details.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.logging" translation-result="on"><a href="features.html#features.logging"></a>4. 记录</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.logging"></a>4. Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">Spring Boot 使用 <a href="https://commons.apache.org/logging">Commons Logging</a> 进行所有内部日志记录，但保持底层日志实现打开。为 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/logging/package-summary.html">Java Util Logging</a> 、 <a href="https://logging.apache.org/log4j/2.x/">Log4J2</a> 和 <a href="https://logback.qos.ch/">Logback</a> 提供了默认配置。在每种情况下，记录器都预先配置为使用控制台输出，并且还提供可选的文件输出。</p>
<p translation-origin="off">Spring Boot uses <a href="https://commons.apache.org/logging">Commons Logging</a> for all internal logging but leaves the underlying log implementation open.
Default configurations are provided for <a href="https://docs.oracle.com/javase/8/docs/api/java/util/logging/package-summary.html">Java Util Logging</a>, <a href="https://logging.apache.org/log4j/2.x/">Log4J2</a>, and <a href="https://logback.qos.ch/">Logback</a>.
In each case, loggers are pre-configured to use console output with optional file output also available.</p>
</div>
<div class="paragraph">
<p translation-result="on">默认情况下，如果你使用“Starters”，则使用 Logback 进行日志记录。还包括适当的 Logback 路由，以确保使用 Java Util Logging、Commons Logging、Log4J 或 SLF4J 的依赖库都能正常工作。</p>
<p translation-origin="off">By default, if you use the “Starters”, Logback is used for logging.
Appropriate Logback routing is also included to ensure that dependent libraries that use Java Util Logging, Commons Logging, Log4J, or SLF4J all work correctly.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">有很多可用于 Java 的日志记录框架。如果上面的列表看起来令人困惑，请不要担心。通常，你不需要更改日志记录依赖项，Spring Boot 默认值就可以正常工作。</p>
<p translation-origin="off">There are a lot of logging frameworks available for Java.
Do not worry if the above list seems confusing.
Generally, you do not need to change your logging dependencies and the Spring Boot defaults work just fine.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">当你将应用程序部署到 servlet 容器或应用程序服务器时，使用 Java Util Logging API 执行的日志记录不会路由到应用程序的日志中。这可以防止容器或已部署到它的其他应用程序执行的日志记录出现在应用程序的日志中。</p>
<p translation-origin="off">When you deploy your application to a servlet container or application server, logging performed with the Java Util Logging API is not routed into your application’s logs.
This prevents logging performed by the container or other applications that have been deployed to it from appearing in your application’s logs.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="features.logging.log-format" translation-result="on"><a href="features.html#features.logging.log-format"></a>4.1. 日志格式</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.logging.log-format"></a>4.1. Log Format</h3>
<div class="paragraph">
<p translation-result="on">Spring Boot 的默认日志输出类似于以下示例：</p>
<p translation-origin="off">The default log output from Spring Boot resembles the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>2019-03-05 10:57:51.112  INFO 45469 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.52
2019-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2019-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1358 ms
2019-03-05 10:57:51.698  INFO 45469 --- [ost-startStop-1] o.s.b.c.e.ServletRegistrationBean        : Mapping servlet: 'dispatcherServlet' to [/]
2019-03-05 10:57:51.702  INFO 45469 --- [ost-startStop-1] o.s.b.c.embedded.FilterRegistrationBean  : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]</pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">输出以下项目：</p>
<p translation-origin="off">The following items are output:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">日期和时间：毫秒精度，易于排序。</p>
<p translation-origin="off">Date and Time: Millisecond precision and easily sortable.</p>
</li>
<li>
<p translation-result="on">日志级别： <code>ERROR</code> 、 <code>WARN</code> 、 <code>INFO</code> 、 <code>DEBUG</code> 或 <code>TRACE</code> 。</p>
<p translation-origin="off">Log Level: <code>ERROR</code>, <code>WARN</code>, <code>INFO</code>, <code>DEBUG</code>, or <code>TRACE</code>.</p>
</li>
<li>
<p translation-result="on">进程标识。</p>
<p translation-origin="off">Process ID.</p>
</li>
<li>
<p translation-result="on">A <code>---</code> 分隔符来区分实际日志消息的开始。</p>
<p translation-origin="off">A <code>---</code> separator to distinguish the start of actual log messages.</p>
</li>
<li>
<p translation-result="on">线程名称：括在方括号中（可能会被截断以用于控制台输出）。</p>
<p translation-origin="off">Thread name: Enclosed in square brackets (may be truncated for console output).</p>
</li>
<li>
<p translation-result="on">记录器名称：这通常是源类名称（通常缩写）。</p>
<p translation-origin="off">Logger name: This is usually the source class name (often abbreviated).</p>
</li>
<li>
<p translation-result="on">日志消息。</p>
<p translation-origin="off">The log message.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">Logback 没有 <code>FATAL</code> 级别。它映射到 <code>ERROR</code> 。</p>
<p translation-origin="off">Logback does not have a <code>FATAL</code> level.
It is mapped to <code>ERROR</code>.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.logging.console-output" translation-result="on"><a href="features.html#features.logging.console-output"></a>4.2. 控制台输出</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.logging.console-output"></a>4.2. Console Output</h3>
<div class="paragraph">
<p translation-result="on">默认日志配置在写入时将消息回显到控制台。默认情况下，会记录 <code>ERROR</code> 级别、 <code>WARN</code> 级别和 <code>INFO</code> 级别的消息。你还可以通过使用 <code>--debug</code> 标志启动应用程序来启用“调试”模式。</p>
<p translation-origin="off">The default log configuration echoes messages to the console as they are written.
By default, <code>ERROR</code>-level, <code>WARN</code>-level, and <code>INFO</code>-level messages are logged.
You can also enable a “debug” mode by starting your application with a <code>--debug</code> flag.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ java -jar myapp.jar --debug</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">你还可以在 <code>application.properties</code> 中指定 <code>debug=true</code> 。</p>
<p translation-origin="off">You can also specify <code>debug=true</code> in your <code>application.properties</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">启用调试模式后，会配置一系列核心记录器（嵌入式容器、Hibernate 和 Spring Boot）以输出更多信息。启用调试模式<em>不会</em>将你的应用程序配置为以 <code>DEBUG</code> 级别记录所有消息。</p>
<p translation-origin="off">When the debug mode is enabled, a selection of core loggers (embedded container, Hibernate, and Spring Boot) are configured to output more information.
Enabling the debug mode does <em>not</em> configure your application to log all messages with <code>DEBUG</code> level.</p>
</div>
<div class="paragraph">
<p translation-result="on">或者，你可以通过使用 <code>--trace</code> 标志（或 <code>application.properties</code> 中的 <code>trace=true</code> ）启动应用程序来启用“跟踪”模式。这样做可以为选择的核心记录器（嵌入式容器、Hibernate 模式生成和整个 Spring 产品组合）启用跟踪日志记录。</p>
<p translation-origin="off">Alternatively, you can enable a “trace” mode by starting your application with a <code>--trace</code> flag (or <code>trace=true</code> in your <code>application.properties</code>).
Doing so enables trace logging for a selection of core loggers (embedded container, Hibernate schema generation, and the whole Spring portfolio).</p>
</div>
<div class="sect3">
<h4 id="features.logging.console-output.color-coded" translation-result="on"><a href="features.html#features.logging.console-output.color-coded"></a>4.2.1. 颜色编码输出</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.logging.console-output.color-coded"></a>4.2.1. Color-coded Output</h4>
<div class="paragraph">
<p translation-result="on">如果你的终端支持 ANSI，则使用颜色输出来提高可读性。你可以将 <code>spring.output.ansi.enabled</code> 设置为<a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/ansi/AnsiOutput.Enabled.html">支持的值</a>以覆盖自动检测。</p>
<p translation-origin="off">If your terminal supports ANSI, color output is used to aid readability.
You can set <code>spring.output.ansi.enabled</code> to a <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/ansi/AnsiOutput.Enabled.html">supported value</a> to override the auto-detection.</p>
</div>
<div class="paragraph">
<p translation-result="on">使用 <code>%clr</code> 转换字配置颜色编码。在最简单的形式中，转换器根据日志级别为输出着色，如以下示例所示：</p>
<p translation-origin="off">Color coding is configured by using the <code>%clr</code> conversion word.
In its simplest form, the converter colors the output according to the log level, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>%clr(%5p)</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">下表描述了日志级别到颜色的映射：</p>
<p translation-origin="off">The following table describes the mapping of log levels to colors:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">等级</p>
  <p translation-origin="off">Level</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">颜色</p>
  <p translation-origin="off">Color</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FATAL</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">红色的</p><p class="tableblock" translation-origin="off">Red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ERROR</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">红色的</p><p class="tableblock" translation-origin="off">Red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WARN</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">黄色的</p><p class="tableblock" translation-origin="off">Yellow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INFO</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">绿</p><p class="tableblock" translation-origin="off">Green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DEBUG</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">绿</p><p class="tableblock" translation-origin="off">Green</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRACE</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">绿</p><p class="tableblock" translation-origin="off">Green</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p translation-result="on">或者，你可以通过将其作为转换选项提供来指定应使用的颜色或样式。例如，要将文本变为黄色，请使用以下设置：</p>
<p translation-origin="off">Alternatively, you can specify the color or style that should be used by providing it as an option to the conversion.
For example, to make the text yellow, use the following setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){yellow}</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">支持以下颜色和样式：</p>
<p translation-origin="off">The following colors and styles are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>blue</code></p>
</li>
<li>
<p><code>cyan</code></p>
</li>
<li>
<p><code>faint</code></p>
</li>
<li>
<p><code>green</code></p>
</li>
<li>
<p><code>magenta</code></p>
</li>
<li>
<p><code>red</code></p>
</li>
<li>
<p><code>yellow</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.logging.file-output" translation-result="on"><a href="features.html#features.logging.file-output"></a>4.3. 文件输出</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.logging.file-output"></a>4.3. File Output</h3>
<div class="paragraph">
<p translation-result="on">默认情况下，Spring Boot 仅记录到控制台，不写入日志文件。如果你想在控制台输出之外写入日志文件，则需要设置 <code>logging.file.name</code> 或 <code>logging.file.path</code> 属性（例如，在你的 <code>application.properties</code> 中）。</p>
<p translation-origin="off">By default, Spring Boot logs only to the console and does not write log files.
If you want to write log files in addition to the console output, you need to set a <code>logging.file.name</code> or <code>logging.file.path</code> property (for example, in your <code>application.properties</code>).</p>
</div>
<div class="paragraph">
<p translation-result="on">下表显示了 <code>logging.*</code> 属性如何一起使用：</p>
<p translation-origin="off">The following table shows how the <code>logging.*</code> properties can be used together:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Logging properties</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p><code>logging.file.name</code></p>
</th>
<th class="tableblock halign-left valign-top">
  <p><code>logging.file.path</code></p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">例子</p>
  <p translation-origin="off">Example</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">描述</p>
  <p translation-origin="off">Description</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on"><em>（没有任何）</em></p><p class="tableblock" translation-origin="off"><em>(none)</em></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on"><em>（没有任何）</em></p><p class="tableblock" translation-origin="off"><em>(none)</em></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">仅控制台日志记录。</p><p class="tableblock" translation-origin="off">Console only logging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on">具体文件</p><p class="tableblock" translation-origin="off">Specific file</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on"><em>（没有任何）</em></p><p class="tableblock" translation-origin="off"><em>(none)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>my.log</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">写入指定的日志文件。名称可以是确切的位置，也可以是相对于当前目录的位置。</p><p class="tableblock" translation-origin="off">Writes to the specified log file.
Names can be an exact location or relative to the current directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on"><em>（没有任何）</em></p><p class="tableblock" translation-origin="off"><em>(none)</em></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">具体目录</p><p class="tableblock" translation-origin="off">Specific directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">将 <code>spring.log</code> 写入指定目录。名称可以是确切的位置，也可以是相对于当前目录的位置。</p><p class="tableblock" translation-origin="off">Writes <code>spring.log</code> to the specified directory.
Names can be an exact location or relative to the current directory.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p translation-result="on">日志文件在达到 10 MB 时会旋转，并且与控制台输出一样，默认情况下会记录 <code>ERROR</code> 级别、 <code>WARN</code> 级别和 <code>INFO</code> 级别的消息。</p>
<p translation-origin="off">Log files rotate when they reach 10 MB and, as with console output, <code>ERROR</code>-level, <code>WARN</code>-level, and <code>INFO</code>-level messages are logged by default.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">日志记录属性独立于实际的日志记录基础设施。因此，特定的配置键（例如 <code>logback.configurationFile</code> 的 logback.configurationFile）不由 spring Boot 管理。</p>
<p translation-origin="off">Logging properties are independent of the actual logging infrastructure.
As a result, specific configuration keys (such as <code>logback.configurationFile</code> for Logback) are not managed by spring Boot.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.logging.file-rotation" translation-result="on"><a href="features.html#features.logging.file-rotation"></a>4.4. 文件轮换</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.logging.file-rotation"></a>4.4. File Rotation</h3>
<div class="paragraph">
<p translation-result="on">如果你使用 Logback，则可以使用 <code>application.properties</code> 或 <code>application.yaml</code> 文件微调日志轮换设置。对于所有其他日志系统，你需要自己直接配置轮换设置（例如，如果你使用 Log4J2，那么你可以添加 <code>log4j2.xml</code> 或 <code>log4j2-spring.xml</code> 文件）。</p>
<p translation-origin="off">If you are using the Logback, it is possible to fine-tune log rotation settings using your <code>application.properties</code> or <code>application.yaml</code> file.
For all other logging system, you will need to configure rotation settings directly yourself (for example, if you use Log4J2 then you could add a <code>log4j2.xml</code> or <code>log4j2-spring.xml</code> file).</p>
</div>
<div class="paragraph">
<p translation-result="on">支持以下轮换策略属性：</p>
<p translation-origin="off">The following rotation policy properties are supported:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">名称</p>
  <p translation-origin="off">Name</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">描述</p>
  <p translation-origin="off">Description</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.file-name-pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">用于创建日志存档的文件名模式。</p><p class="tableblock" translation-origin="off">The filename pattern used to create log archives.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.clean-history-on-start</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">如果应在应用程序启动时进行日志归档清理。</p><p class="tableblock" translation-origin="off">If log archive cleanup should occur when the application starts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.max-file-size</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">归档前日志文件的最大大小。</p><p class="tableblock" translation-origin="off">The maximum size of log file before it is archived.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.total-size-cap</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">在被删除之前可以占用的最大大小的日志档案。</p><p class="tableblock" translation-origin="off">The maximum amount of size log archives can take before being deleted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.max-history</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">要保留的存档日志文件的最大数量（默认为 7）。</p><p class="tableblock" translation-origin="off">The maximum number of archive log files to keep (defaults to 7).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="features.logging.log-levels" translation-result="on"><a href="features.html#features.logging.log-levels"></a>4.5. 日志级别</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.logging.log-levels"></a>4.5. Log Levels</h3>
<div class="paragraph">
<p translation-result="on">所有受支持的日志记录系统都可以使用 <code>logging.level.&lt;logger-name&gt;=&lt;level&gt;</code> 在 Spring <code>Environment</code> 中设置记录器级别（例如，在 <code>application.properties</code> 中），其中 <code>level</code> 是 TRACE、DEBUG、INFO、 WARN、ERROR、FATAL 或 OFF。可以使用 <code>logging.level.root</code> 配置 <code>root</code> 记录器。</p>
<p translation-origin="off">All the supported logging systems can have the logger levels set in the Spring <code>Environment</code> (for example, in <code>application.properties</code>) by using <code>logging.level.&lt;logger-name&gt;=&lt;level&gt;</code> where <code>level</code> is one of TRACE, DEBUG, INFO, WARN, ERROR, FATAL, or OFF.
The <code>root</code> logger can be configured by using <code>logging.level.root</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">以下示例显示了 <code>application.properties</code> 中的潜在日志记录设置：</p>
<p translation-origin="off">The following example shows potential logging settings in <code>application.properties</code>:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">logging.level.root=warn
logging.level.org.springframework.web=debug
logging.level.org.hibernate=error</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">logging:
  level:
    root: "warn"
    org.springframework.web: "debug"
    org.hibernate: "error"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">也可以使用环境变量设置日志记录级别。例如，<code>LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB=DEBUG</code> 会将 <code>org.springframework.web</code> 设置为 <code>DEBUG</code> 。</p>
<p translation-origin="off">It is also possible to set logging levels using environment variables.
For example, <code>LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB=DEBUG</code> will set <code>org.springframework.web</code> to <code>DEBUG</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">上述方法仅适用于包级别的日志记录。由于宽松绑定总是将环境变量转换为小写，因此无法以这种方式为单个类配置日志记录。如果需要为类配置日志记录，可以使用<a href="features.html#features.external-config.application-json"><code>SPRING_APPLICATION_JSON</code></a>变量。</p>
<p translation-origin="off">The above approach will only work for package level logging.
Since relaxed binding always converts environment variables to lowercase, it is not possible to configure logging for an individual class in this way.
If you need to configure logging for a class, you can use <a href="features.html#features.external-config.application-json">the <code>SPRING_APPLICATION_JSON</code></a> variable.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.logging.log-groups" translation-result="on"><a href="features.html#features.logging.log-groups"></a>4.6. 日志组</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.logging.log-groups"></a>4.6. Log Groups</h3>
<div class="paragraph">
<p translation-result="on">能够将相关的记录器组合在一起通常很有用，以便可以同时配置它们。例如，你可能通常会更改<em>所有</em>与 Tomcat 相关的记录器的日志记录级别，但你不容易记住顶级包。</p>
<p translation-origin="off">It is often useful to be able to group related loggers together so that they can all be configured at the same time.
For example, you might commonly change the logging levels for <em>all</em> Tomcat related loggers, but you can not easily remember top level packages.</p>
</div>
<div class="paragraph">
<p translation-result="on">为了帮助解决这个问题，Spring Boot 允许你在 Spring <code>Environment</code> 中定义日志记录组。例如，你可以通过将“tomcat”组添加到 <code>application.properties</code> 来定义它：</p>
<p translation-origin="off">To help with this, Spring Boot allows you to define logging groups in your Spring <code>Environment</code>.
For example, here is how you could define a “tomcat” group by adding it to your <code>application.properties</code>:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">logging.group.tomcat=org.apache.catalina,org.apache.coyote,org.apache.tomcat</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">logging:
  group:
    tomcat: "org.apache.catalina,org.apache.coyote,org.apache.tomcat"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">定义后，你可以使用一行更改组中所有记录器的级别：</p>
<p translation-origin="off">Once defined, you can change the level for all the loggers in the group with a single line:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">logging.level.tomcat=trace</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">logging:
  level:
    tomcat: "trace"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 包括以下可开箱即用的预定义日志记录组：</p>
<p translation-origin="off">Spring Boot includes the following pre-defined logging groups that can be used out-of-the-box:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">名称</p>
  <p translation-origin="off">Name</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">记录器</p>
  <p translation-origin="off">Loggers</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on">网络</p><p class="tableblock" translation-origin="off">web</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.springframework.core.codec</code>, <code>org.springframework.http</code>, <code>org.springframework.web</code>, <code>org.springframework.boot.actuate.endpoint.web</code>, <code>org.springframework.boot.web.servlet.ServletContextInitializerBeans</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sql</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on"><code>org.springframework.jdbc.core</code> ，<code>org.hibernate.SQL</code> ，<code>org.jooq.tools.LoggerListener</code></p><p class="tableblock" translation-origin="off"><code>org.springframework.jdbc.core</code>, <code>org.hibernate.SQL</code>, <code>org.jooq.tools.LoggerListener</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="features.logging.shutdown-hook" translation-result="on"><a href="features.html#features.logging.shutdown-hook"></a>4.7. 使用日志关闭挂钩</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.logging.shutdown-hook"></a>4.7. Using a Log Shutdown Hook</h3>
<div class="paragraph">
<p translation-result="on">为了在你的应用程序终止时释放日志资源，提供了一个关闭挂钩，该挂钩将在 JVM 退出时触发日志系统清理。除非你的应用程序部署为 war 文件，否则此关闭挂钩会自动注册。如果你的应用程序具有复杂的上下文层次结构，则关闭挂钩可能无法满足你的需求。如果没有，请禁用关闭挂钩并调查底层日志系统直接提供的选项。例如，Logback 提供<a href="http://logback.qos.ch/manual/loggingSeparation.html">上下文选择器</a>，允许每个 Logger 在其自己的上下文中创建。你可以使用 <code>logging.register-shutdown-hook</code> 属性来禁用关闭挂钩。将其设置为 <code>false</code> 将禁用注册。你可以在 <code>application.properties</code> 或 <code>application.yaml</code> 文件中设置属性：</p>
<p translation-origin="off">In order to release logging resources when your application terminates, a shutdown hook that will trigger log system cleanup when the JVM exits is provided.
This shutdown hook is registered automatically unless your application is deployed as a war file.
If your application has complex context hierarchies the shutdown hook may not meet your needs.
If it does not, disable the shutdown hook and investigate the options provided directly by the underlying logging system.
For example, Logback offers <a href="http://logback.qos.ch/manual/loggingSeparation.html">context selectors</a> which allow each Logger to be created in its own context.
You can use the <code>logging.register-shutdown-hook</code> property to disable the shutdown hook.
Setting it to <code>false</code> will disable the registration.
You can set the property in your <code>application.properties</code> or <code>application.yaml</code> file:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">logging.register-shutdown-hook=false</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">logging:
  register-shutdown-hook: false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.logging.custom-log-configuration" translation-result="on"><a href="features.html#features.logging.custom-log-configuration"></a>4.8. 自定义日志配置</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.logging.custom-log-configuration"></a>4.8. Custom Log Configuration</h3>
<div class="paragraph">
<p translation-result="on">可以通过在类路径中包含适当的库来激活各种日志记录系统，并且可以通过在类路径的根目录中或在以下 Spring <code>Environment</code> 属性指定的位置中提供合适的配置文件来进一步定制： <code>logging.config</code> 。</p>
<p translation-origin="off">The various logging systems can be activated by including the appropriate libraries on the classpath and can be further customized by providing a suitable configuration file in the root of the classpath or in a location specified by the following Spring <code>Environment</code> property: <code>logging.config</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>org.springframework.boot.logging.LoggingSystem</code> 系统属性强制 Spring Boot 使用特定的日志系统。该值应该是 <code>LoggingSystem</code> 实现的完全限定类名。你还可以使用 <code>none</code> 值完全禁用 Spring Boot 的日志记录配置。</p>
<p translation-origin="off">You can force Spring Boot to use a particular logging system by using the <code>org.springframework.boot.logging.LoggingSystem</code> system property.
The value should be the fully qualified class name of a <code>LoggingSystem</code> implementation.
You can also disable Spring Boot’s logging configuration entirely by using a value of <code>none</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">由于在创建 <code>ApplicationContext</code> <strong>之前</strong>初始化日志记录，因此无法从 Spring <code>@Configuration</code> 文件中的 <code>@PropertySources</code> 控制日志记录。更改日志系统或完全禁用它的唯一方法是通过系统属性。</p>
<p translation-origin="off">Since logging is initialized <strong>before</strong> the <code>ApplicationContext</code> is created, it is not possible to control logging from <code>@PropertySources</code> in Spring <code>@Configuration</code> files.
The only way to change the logging system or disable it entirely is through System properties.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">根据你的日志记录系统，将加载以下文件：</p>
<p translation-origin="off">Depending on your logging system, the following files are loaded:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">测井系统</p>
  <p translation-origin="off">Logging System</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">定制</p>
  <p translation-origin="off">Customization</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on">回溯</p><p class="tableblock" translation-origin="off">Logback</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on"><code>logback-spring.xml</code> 、 <code>logback-spring.groovy</code> 、 <code>logback.xml</code> 或 <code>logback.groovy</code></p><p class="tableblock" translation-origin="off"><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code>, or <code>logback.groovy</code> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on">日志 4j2</p><p class="tableblock" translation-origin="off">Log4j2</p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on"><code>log4j2-spring.xml</code> 或 <code>log4j2.xml</code></p><p class="tableblock" translation-origin="off"><code>log4j2-spring.xml</code> or <code>log4j2.xml</code> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p translation-result="on">JDK（Java 实用程序日志记录）</p><p class="tableblock" translation-origin="off">JDK (Java Util Logging)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.properties</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">如果可能，我们建议你为日志配置使用 <code>-spring</code> 变体（例如，<code>logback-spring.xml</code> 而不是 <code>logback.xml</code> ）。如果使用标准配置位置，Spring 无法完全控制日志初始化。</p>
<p translation-origin="off">When possible, we recommend that you use the <code>-spring</code> variants for your logging configuration (for example, <code>logback-spring.xml</code> rather than <code>logback.xml</code>).
If you use standard configuration locations, Spring cannot completely control log initialization.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<p translation-result="on">Java Util Logging 存在已知的类加载问题，这些问题在从“可执行 jar”运行时会导致问题。如果可能，我们建议你在从“可执行 jar”运行时避免使用它。</p>
<p translation-origin="off">There are known classloading issues with Java Util Logging that cause problems when running from an 'executable jar'.
We recommend that you avoid it when running from an 'executable jar' if at all possible.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">为了帮助进行自定义，一些其他属性从 Spring <code>Environment</code> 转移到 System properties，如下表所述：</p>
<p translation-origin="off">To help with the customization, some other properties are transferred from the Spring <code>Environment</code> to System properties, as described in the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">春天环境</p>
  <p translation-origin="off">Spring Environment</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">系统属性</p>
  <p translation-origin="off">System Property</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">评论</p>
  <p translation-origin="off">Comments</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.exception-conversion-word</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOG_EXCEPTION_CONVERSION_WORD</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">记录异常时使用的转换字。</p><p class="tableblock" translation-origin="off">The conversion word used when logging exceptions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.file.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOG_FILE</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">如果已定义，它将在默认日志配置中使用。</p><p class="tableblock" translation-origin="off">If defined, it is used in the default log configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.file.path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOG_PATH</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">如果已定义，它将在默认日志配置中使用。</p><p class="tableblock" translation-origin="off">If defined, it is used in the default log configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.pattern.console</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONSOLE_LOG_PATTERN</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">在控制台上使用的日志模式 (stdout)。</p><p class="tableblock" translation-origin="off">The log pattern to use on the console (stdout).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.pattern.dateformat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOG_DATEFORMAT_PATTERN</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">日志日期格式的附加模式。</p><p class="tableblock" translation-origin="off">Appender pattern for log date format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.charset.console</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONSOLE_LOG_CHARSET</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">用于控制台日志记录的字符集。</p><p class="tableblock" translation-origin="off">The charset to use for console logging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.pattern.file</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FILE_LOG_PATTERN</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">在文件中使用的日志模式（如果启用了 <code>LOG_FILE</code> ）。</p><p class="tableblock" translation-origin="off">The log pattern to use in a file (if <code>LOG_FILE</code> is enabled).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.charset.file</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FILE_LOG_CHARSET</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">用于文件日志记录的字符集（如果启用了 <code>LOG_FILE</code> ）。</p><p class="tableblock" translation-origin="off">The charset to use for file logging (if <code>LOG_FILE</code> is enabled).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.pattern.level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOG_LEVEL_PATTERN</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">呈现日志级别时使用的格式（默认 <code>%5p</code> ）。</p><p class="tableblock" translation-origin="off">The format to use when rendering the log level (default <code>%5p</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PID</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">当前进程 ID（如果可能且尚未定义为 OS 环境变量时发现）。</p><p class="tableblock" translation-origin="off">The current process ID (discovered if possible and when not already defined as an OS environment variable).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p translation-result="on">如果使用 Logback，还会传输以下属性：</p>
<p translation-origin="off">If you use Logback, the following properties are also transferred:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">春天环境</p>
  <p translation-origin="off">Spring Environment</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">系统属性</p>
  <p translation-origin="off">System Property</p>
</th>
<th class="tableblock halign-left valign-top">
  <p translation-result="on">评论</p>
  <p translation-origin="off">Comments</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.file-name-pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOGBACK_ROLLINGPOLICY_FILE_NAME_PATTERN</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">翻转日志文件名的模式（默认 <code>${LOG_FILE}.%d{yyyy-MM-dd}.%i.gz</code> ）。</p><p class="tableblock" translation-origin="off">Pattern for rolled-over log file names (default <code>${LOG_FILE}.%d{yyyy-MM-dd}.%i.gz</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.clean-history-on-start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOGBACK_ROLLINGPOLICY_CLEAN_HISTORY_ON_START</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">是否在启动时清理归档日志文件。</p><p class="tableblock" translation-origin="off">Whether to clean the archive log files on startup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.max-file-size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOGBACK_ROLLINGPOLICY_MAX_FILE_SIZE</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">最大日志文件大小。</p><p class="tableblock" translation-origin="off">Maximum log file size.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.total-size-cap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOGBACK_ROLLINGPOLICY_TOTAL_SIZE_CAP</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">要保留的日志备份的总大小。</p><p class="tableblock" translation-origin="off">Total size of log backups to be kept.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.logback.rollingpolicy.max-history</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOGBACK_ROLLINGPOLICY_MAX_HISTORY</code></p></td>
<td class="tableblock halign-left valign-top"><p translation-result="on">要保留的存档日志文件的最大数量。</p><p class="tableblock" translation-origin="off">Maximum number of archive log files to keep.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p translation-result="on">所有受支持的日志记录系统在解析其配置文件时都可以查阅系统属性。有关示例，请参见 <code>spring-boot.jar</code> 中的默认配置：</p>
<p translation-origin="off">All the supported logging systems can consult System properties when parsing their configuration files.
See the default configurations in <code>spring-boot.jar</code> for examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/logback/defaults.xml">回溯</a></p>
<p translation-origin="off"><a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/logback/defaults.xml">Logback</a></p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/log4j2/log4j2.xml">日志 4j 2</a></p>
<p translation-origin="off"><a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/log4j2/log4j2.xml">Log4j 2</a></p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/java/logging-file.properties">Java 实用程序日志记录</a></p>
<p translation-origin="off"><a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/java/logging-file.properties">Java Util logging</a></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">如果你想在日志属性中使用占位符，你应该使用 <a href="features.html#features.external-config.files.property-placeholders">Spring Boot 的语法</a>，而不是底层框架的语法。值得注意的是，如果你使用 Logback，你应该使用 <code>:</code> 作为属性名称和它的默认值之间的分隔符，而不是使用 <code>:-</code> 。</p>
<p translation-origin="off">If you want to use a placeholder in a logging property, you should use <a href="features.html#features.external-config.files.property-placeholders">Spring Boot’s syntax</a> and not the syntax of the underlying framework.
Notably, if you use Logback, you should use <code>:</code> as the delimiter between a property name and its default value and not use <code>:-</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">你可以通过仅覆盖 <code>LOG_LEVEL_PATTERN</code> （或使用 Logback 的 <code>logging.pattern.level</code> ）将 MDC 和其他临时内容添加到日志行。例如，如果你使用 <code>logging.pattern.level=user:%X{user} %5p</code> ，则默认日志格式包含“用户”的 MDC 条目（如果存在），如以下示例所示。</p>
<p translation-origin="off">You can add MDC and other ad-hoc content to log lines by overriding only the <code>LOG_LEVEL_PATTERN</code> (or <code>logging.pattern.level</code> with Logback).
For example, if you use <code>logging.pattern.level=user:%X{user} %5p</code>, then the default log format contains an MDC entry for "user", if it exists, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>2019-08-30 12:30:04.031 user:someone INFO 22174 --- [  nio-8080-exec-0] demo.Controller
Handling authenticated request</pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.logging.logback-extensions" translation-result="on"><a href="features.html#features.logging.logback-extensions"></a>4.9. Logback 扩展</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.logging.logback-extensions"></a>4.9. Logback Extensions</h3>
<div class="paragraph">
<p translation-result="on">Spring Boot 包含许多对 Logback 的扩展，可以帮助进行高级配置。你可以在 <code>logback-spring.xml</code> 配置文件中使用这些扩展。</p>
<p translation-origin="off">Spring Boot includes a number of extensions to Logback that can help with advanced configuration.
You can use these extensions in your <code>logback-spring.xml</code> configuration file.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">因为标准的 <code>logback.xml</code> 配置文件加载得太早，所以不能在其中使用扩展。你需要使用 <code>logback-spring.xml</code> 或定义 <code>logging.config</code> 属性。</p>
<p translation-origin="off">Because the standard <code>logback.xml</code> configuration file is loaded too early, you cannot use extensions in it.
You need to either use <code>logback-spring.xml</code> or define a <code>logging.config</code> property.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<p translation-result="on">扩展不能与 Logback 的<a href="https://logback.qos.ch/manual/configuration.html#autoScan">配置扫描</a>一起使用。如果你尝试这样做，则对配置文件进行更改会导致记录类似于以下内容之一的错误：</p>
<p translation-origin="off">The extensions cannot be used with Logback’s <a href="https://logback.qos.ch/manual/configuration.html#autoScan">configuration scanning</a>.
If you attempt to do so, making changes to the configuration file results in an error similar to one of the following being logged:</p>
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre>ERROR in <a href="https://docs.spring.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="86e5eea8f7e9f5a8eae9e1e4e7e5eda8e5e9f4e3a8ece9f4e7e8a8f5f6efa8cfe8f2e3f4f6f4e3f2e3f4c6b2">[email&nbsp;protected]</a>:71 - no applicable action for [springProperty], current ElementPath is [[configuration][springProperty]]
ERROR in <a href="https://docs.spring.io/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="294a410758465a0745464e4b484a42074a465b4c0743465b4847075a59400760475d4c5b595b4c5d4c5b691d">[email&nbsp;protected]</a>:71 - no applicable action for [springProfile], current ElementPath is [[configuration][springProfile]]</pre>
</div>
</div>
<div class="sect3">
<h4 id="features.logging.logback-extensions.profile-specific" translation-result="on"><a href="features.html#features.logging.logback-extensions.profile-specific"></a>4.9.1. 配置文件特定的配置</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.logging.logback-extensions.profile-specific"></a>4.9.1. Profile-specific Configuration</h4>
<div class="paragraph">
<p translation-result="on"><code>&lt;springProfile&gt;</code> 标签允许你根据活动的 Spring 配置文件选择性地包含或排除配置部分。<code>&lt;configuration&gt;</code> 元素中的任何位置都支持配置文件部分。使用 <code>name</code> 属性来指定哪个配置文件接受配置。<code>&lt;springProfile&gt;</code> 标签可以包含配置文件名称（例如 <code>staging</code> ）或配置文件表达式。配置文件表达式允许表达更复杂的配置文件逻辑，例如 <code>production &amp; (eu-central | eu-west)</code> 。查看<a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/core.html#beans-definition-profiles-java">参考指南</a>以获取更多详细信息。以下清单显示了三个示例配置文件：</p>
<p translation-origin="off">The <code>&lt;springProfile&gt;</code> tag lets you optionally include or exclude sections of configuration based on the active Spring profiles.
Profile sections are supported anywhere within the <code>&lt;configuration&gt;</code> element.
Use the <code>name</code> attribute to specify which profile accepts the configuration.
The <code>&lt;springProfile&gt;</code> tag can contain a profile name (for example <code>staging</code>) or a profile expression.
A profile expression allows for more complicated profile logic to be expressed, for example <code>production &amp; (eu-central | eu-west)</code>.
Check the <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/core.html#beans-definition-profiles-java">reference guide</a> for more details.
The following listing shows three sample profiles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;springProfile name="staging"&gt;
    &lt;!-- configuration to be enabled when the "staging" profile is active --&gt;
&lt;/springProfile&gt;

&lt;springProfile name="dev | staging"&gt;
    &lt;!-- configuration to be enabled when the "dev" or "staging" profiles are active --&gt;
&lt;/springProfile&gt;

&lt;springProfile name="!production"&gt;
    &lt;!-- configuration to be enabled when the "production" profile is not active --&gt;
&lt;/springProfile&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.logging.logback-extensions.environment-properties" translation-result="on"><a href="features.html#features.logging.logback-extensions.environment-properties"></a>4.9.2. 环境属性</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.logging.logback-extensions.environment-properties"></a>4.9.2. Environment Properties</h4>
<div class="paragraph">
<p translation-result="on"><code>&lt;springProperty&gt;</code> 标签允许你从 Spring <code>Environment</code> 中公开属性以在 Logback 中使用。如果你想在 Logback 配置中访问 <code>application.properties</code> 文件中的值，这样做会很有用。该标签的工作方式与 Logback 的标准 <code>&lt;property&gt;</code> 标签类似。但是，你不是指定直接 <code>value</code> ，而是指定属性的 <code>source</code> （来自 <code>Environment</code> ）。如果你需要将属性存储在 <code>local</code> 范围以外的某个地方，则可以使用 <code>scope</code> 属性。如果你需要一个备用值（如果未在 <code>Environment</code> 中设置该属性），你可以使用 <code>defaultValue</code> 属性。以下示例显示了如何公开属性以在 Logback 中使用：</p>
<p translation-origin="off">The <code>&lt;springProperty&gt;</code> tag lets you expose properties from the Spring <code>Environment</code> for use within Logback.
Doing so can be useful if you want to access values from your <code>application.properties</code> file in your Logback configuration.
The tag works in a similar way to Logback’s standard <code>&lt;property&gt;</code> tag.
However, rather than specifying a direct <code>value</code>, you specify the <code>source</code> of the property (from the <code>Environment</code>).
If you need to store the property somewhere other than in <code>local</code> scope, you can use the <code>scope</code> attribute.
If you need a fallback value (in case the property is not set in the <code>Environment</code>), you can use the <code>defaultValue</code> attribute.
The following example shows how to expose properties for use within Logback:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;springProperty scope="context" name="fluentHost" source="myapp.fluentd.host"
        defaultValue="localhost"/&gt;
&lt;appender name="FLUENT" class="ch.qos.logback.more.appenders.DataFluentAppender"&gt;
    &lt;remoteHost&gt;${fluentHost}&lt;/remoteHost&gt;
    ...
&lt;/appender&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">必须以 kebab 大小写指定 <code>source</code> （例如 <code>my.property-name</code> ）。但是，可以使用宽松的规则将属性添加到 <code>Environment</code> 中。</p>
<p translation-origin="off">The <code>source</code> must be specified in kebab case (such as <code>my.property-name</code>).
However, properties can be added to the <code>Environment</code> by using the relaxed rules.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.internationalization" translation-result="on"><a href="features.html#features.internationalization"></a>5. 国际化</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.internationalization"></a>5. Internationalization</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">Spring Boot 支持本地化消息，以便你的应用程序可以满足不同语言偏好的用户。默认情况下，Spring Boot 在类路径的根目录中查找 <code>messages</code> 资源包的存在。</p>
<p translation-origin="off">Spring Boot supports localized messages so that your application can cater to users of different language preferences.
By default, Spring Boot looks for the presence of a <code>messages</code> resource bundle at the root of the classpath.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">当配置的资源包的默认属性文件可用（默认为 <code>messages.properties</code> ）时，自动配置适用。如果你的资源包仅包含特定于语言的属性文件，则需要添加默认值。如果没有找到与任何配置的基本名称匹配的属性文件，则不会有自动配置的 <code>MessageSource</code> 。</p>
<p translation-origin="off">The auto-configuration applies when the default properties file for the configured resource bundle is available (<code>messages.properties</code> by default).
If your resource bundle contains only language-specific properties files, you are required to add the default.
If no properties file is found that matches any of the configured base names, there will be no auto-configured <code>MessageSource</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">可以使用 <code>spring.messages</code> 命名空间配置资源包的基本名称以及其他几个属性，如以下示例所示：</p>
<p translation-origin="off">The basename of the resource bundle as well as several other attributes can be configured using the <code>spring.messages</code> namespace, as shown in the following example:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.messages.basename=messages,config.i18n.messages
spring.messages.fallback-to-system-locale=false</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  messages:
    basename: "messages,config.i18n.messages"
    fallback-to-system-locale: false</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>spring.messages.basename</code> 支持以逗号分隔的位置列表，可以是包限定符，也可以是从类路径根解析的资源。</p>
<p translation-origin="off"><code>spring.messages.basename</code> supports comma-separated list of locations, either a package qualifier or a resource resolved from the classpath root.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">有关更多支持的选项，请参阅<a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/context/MessageSourceProperties.java"><code>MessageSourceProperties</code></a> 。</p>
<p translation-origin="off">See <a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/context/MessageSourceProperties.java"><code>MessageSourceProperties</code></a> for more supported options.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.json" translation-result="on"><a href="features.html#features.json"></a>6.JSON</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.json"></a>6. JSON</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">Spring Boot 提供与三个 JSON 映射库的集成：</p>
<p translation-origin="off">Spring Boot provides integration with three JSON mapping libraries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">格森</p>
<p translation-origin="off">Gson</p>
</li>
<li>
<p translation-result="on">杰克逊</p>
<p translation-origin="off">Jackson</p>
</li>
<li>
<p>JSON-B</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">Jackson 是首选的默认库。</p>
<p translation-origin="off">Jackson is the preferred and default library.</p>
</div>
<div class="sect2">
<h3 id="features.json.jackson" translation-result="on"><a href="features.html#features.json.jackson"></a>6.1. 杰克逊</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.json.jackson"></a>6.1. Jackson</h3>
<div class="paragraph">
<p translation-result="on">提供了 Jackson 的自动配置，并且 Jackson 是 <code>spring-boot-starter-json</code> 一部分。当 Jackson 在类路径上时，会自动配置 <code>ObjectMapper</code> bean。提供了几个配置属性用于<a href="howto.html#howto.spring-mvc.customize-jackson-objectmapper">自定义 <code>ObjectMapper</code> 的配置</a>。</p>
<p translation-origin="off">Auto-configuration for Jackson is provided and Jackson is part of <code>spring-boot-starter-json</code>.
When Jackson is on the classpath an <code>ObjectMapper</code> bean is automatically configured.
Several configuration properties are provided for <a href="howto.html#howto.spring-mvc.customize-jackson-objectmapper">customizing the configuration of the <code>ObjectMapper</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.json.gson" translation-result="on"><a href="features.html#features.json.gson"></a>6.2. 格森</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.json.gson"></a>6.2. Gson</h3>
<div class="paragraph">
<p translation-result="on">提供了 Gson 的自动配置。当 Gson 在类路径上时，会自动配置 <code>Gson</code> bean。提供了几个 <code>spring.gson.*</code> 配置属性用于自定义配置。要获得更多控制权，可以使用一个或多个 <code>GsonBuilderCustomizer</code> bean。</p>
<p translation-origin="off">Auto-configuration for Gson is provided.
When Gson is on the classpath a <code>Gson</code> bean is automatically configured.
Several <code>spring.gson.*</code> configuration properties are provided for customizing the configuration.
To take more control, one or more <code>GsonBuilderCustomizer</code> beans can be used.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.json.json-b" translation-result="on"><a href="features.html#features.json.json-b"></a>6.3. JSON-B</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.json.json-b"></a>6.3. JSON-B</h3>
<div class="paragraph">
<p translation-result="on">提供了 JSON-B 的自动配置。当 JSON-B API 和实现在类路径上时，将自动配置 <code>Jsonb</code> bean。首选的 JSON-B 实现是为其提供依赖管理的 Apache Johnzon。</p>
<p translation-origin="off">Auto-configuration for JSON-B is provided.
When the JSON-B API and an implementation are on the classpath a <code>Jsonb</code> bean will be automatically configured.
The preferred JSON-B implementation is Apache Johnzon for which dependency management is provided.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.task-execution-and-scheduling" translation-result="on"><a href="features.html#features.task-execution-and-scheduling"></a>7. 任务执行与调度</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.task-execution-and-scheduling"></a>7. Task Execution and Scheduling</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">在上下文中没有 <code>Executor</code> bean 的情况下，Spring Boot 自动配置一个具有合理默认值的 <code>ThreadPoolTaskExecutor</code> ，这些默认值可以自动关联到异步任务执行 ( <code>@EnableAsync</code> ) 和 Spring MVC 异步请求处理。</p>
<p translation-origin="off">In the absence of an <code>Executor</code> bean in the context, Spring Boot auto-configures a <code>ThreadPoolTaskExecutor</code> with sensible defaults that can be automatically associated to asynchronous task execution (<code>@EnableAsync</code>) and Spring MVC asynchronous request processing.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">如果你在上下文中定义了自定义 <code>Executor</code> ，则常规任务执行（即 <code>@EnableAsync</code> ）将透明地使用它，但不会配置 Spring MVC 支持，因为它需要 <code>AsyncTaskExecutor</code> 实现（名为 <code>applicationTaskExecutor</code> ）。根据你的目标安排，你可以将 <code>Executor</code> 更改为 <code>ThreadPoolTaskExecutor</code> 或同时定义 <code>ThreadPoolTaskExecutor</code> 和 <code>AsyncConfigurer</code> 包装你的自定义 <code>Executor</code> 。</p>
<p translation-origin="off">If you have defined a custom <code>Executor</code> in the context, regular task execution (that is <code>@EnableAsync</code>) will use it transparently but the Spring MVC support will not be configured as it requires an <code>AsyncTaskExecutor</code> implementation (named <code>applicationTaskExecutor</code>).
Depending on your target arrangement, you could change your <code>Executor</code> into a <code>ThreadPoolTaskExecutor</code> or define both a <code>ThreadPoolTaskExecutor</code> and an <code>AsyncConfigurer</code> wrapping your custom <code>Executor</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">自动配置的 <code>TaskExecutorBuilder</code> 允许你轻松创建实例来重现自动配置默认执行的操作。</p>
<p translation-origin="off">The auto-configured <code>TaskExecutorBuilder</code> allows you to easily create instances that reproduce what the auto-configuration does by default.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">线程池使用 8 个核心线程，可以根据负载增长和收缩。这些默认设置可以使用 <code>spring.task.execution</code> 命名空间进行微调，如下例所示：</p>
<p translation-origin="off">The thread pool uses 8 core threads that can grow and shrink according to the load.
Those default settings can be fine-tuned using the <code>spring.task.execution</code> namespace, as shown in the following example:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.task.execution.pool.max-size=16
spring.task.execution.pool.queue-capacity=100
spring.task.execution.pool.keep-alive=10s</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  task:
    execution:
      pool:
        max-size: 16
        queue-capacity: 100
        keep-alive: "10s"</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">这将线程池更改为使用有界队列，以便当队列已满（100 个任务）时，线程池增加到最多 16 个线程。由于线程在空闲 10 秒（而不是默认情况下为 60 秒）时被回收，因此池的收缩更具侵略性。</p>
<p translation-origin="off">This changes the thread pool to use a bounded queue so that when the queue is full (100 tasks), the thread pool increases to maximum 16 threads.
Shrinking of the pool is more aggressive as threads are reclaimed when they are idle for 10 seconds (rather than 60 seconds by default).</p>
</div>
<div class="paragraph">
<p translation-result="on">如果需要将 <code>ThreadPoolTaskScheduler</code> 与计划的任务执行相关联（例如使用 <code>@EnableScheduling</code> ），也可以自动配置 ThreadPoolTaskScheduler。线程池默认使用一个线程，其设置可以使用 <code>spring.task.scheduling</code> 命名空间进行微调，如下例所示：</p>
<p translation-origin="off">A <code>ThreadPoolTaskScheduler</code> can also be auto-configured if need to be associated to scheduled task execution (using <code>@EnableScheduling</code> for instance).
The thread pool uses one thread by default and its settings can be fine-tuned using the <code>spring.task.scheduling</code> namespace, as shown in the following example:</p>
</div>
<div class="listingblock primary">
<div class="title" translation-result="on">属性</div>
<div class="title" translation-origin="off">Properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">spring.task.scheduling.thread-name-prefix=scheduling-
spring.task.scheduling.pool.size=2</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  task:
    scheduling:
      thread-name-prefix: "scheduling-"
      pool:
        size: 2</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果需要创建自定义执行程序或调度程序，则可以在上下文中使用 <code>TaskExecutorBuilder</code> bean 和 <code>TaskSchedulerBuilder</code> bean。</p>
<p translation-origin="off">Both a <code>TaskExecutorBuilder</code> bean and a <code>TaskSchedulerBuilder</code> bean are made available in the context if a custom executor or scheduler needs to be created.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.testing" translation-result="on"><a href="features.html#features.testing"></a>8. 测试</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.testing"></a>8. Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">Spring Boot 提供了许多实用程序和注释来帮助测试你的应用程序。测试支持由两个模块提供： <code>spring-boot-test</code> 包含核心项目，<code>spring-boot-test-autoconfigure</code> 支持自动配置测试。</p>
<p translation-origin="off">Spring Boot provides a number of utilities and annotations to help when testing your application.
Test support is provided by two modules: <code>spring-boot-test</code> contains core items, and <code>spring-boot-test-autoconfigure</code> supports auto-configuration for tests.</p>
</div>
<div class="paragraph">
<p translation-result="on">大多数开发人员使用 <code>spring-boot-starter-test</code> “Starter”，它导入 Spring Boot 测试模块以及 JUnit Jupiter、AssertJ、Hamcrest 和许多其他有用的库。</p>
<p translation-origin="off">Most developers use the <code>spring-boot-starter-test</code> “Starter”, which imports both Spring Boot test modules as well as JUnit Jupiter, AssertJ, Hamcrest, and a number of other useful libraries.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">如果你有使用 JUnit 4 的测试，则可以使用 JUnit 5 的老式引擎来运行它们。要使用复古引擎，请添加对 <code>junit-vintage-engine</code> 的依赖项，如以下示例所示：</p>
<p translation-origin="off">If you have tests that use JUnit 4, JUnit 5’s vintage engine can be used to run them.
To use the vintage engine, add a dependency on <code>junit-vintage-engine</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;
    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;
            &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on"><code>hamcrest-core</code> 被排除在外，有利于 <code>org.hamcrest:hamcrest</code> ，它是 <code>spring-boot-starter-test</code> 一部分。</p>
<p translation-origin="off"><code>hamcrest-core</code> is excluded in favor of <code>org.hamcrest:hamcrest</code> that is part of <code>spring-boot-starter-test</code>.</p>
</div>
<div class="sect2">
<h3 id="features.testing.test-scope-dependencies" translation-result="on"><a href="features.html#features.testing.test-scope-dependencies"></a>8.1. 测试范围依赖</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.testing.test-scope-dependencies"></a>8.1. Test Scope Dependencies</h3>
<div class="paragraph">
<p translation-result="on"><code>spring-boot-starter-test</code> “Starter”（在 <code>test</code> <code>scope</code> ）包含以下提供的库：</p>
<p translation-origin="off">The <code>spring-boot-starter-test</code> “Starter” (in the <code>test</code> <code>scope</code>) contains the following provided libraries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><a href="https://junit.org/junit5/">JUnit 5</a> ：单元测试 Java 应用程序的事实标准。</p>
<p translation-origin="off"><a href="https://junit.org/junit5/">JUnit 5</a>: The de-facto standard for unit testing Java applications.</p>
</li>
<li>
<p translation-result="on"><a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#integration-testing">Spring Test</a> &amp; Spring Boot Test：Spring Boot 应用程序的实用程序和集成测试支持。</p>
<p translation-origin="off"><a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#integration-testing">Spring Test</a> &amp; Spring Boot Test: Utilities and integration test support for Spring Boot applications.</p>
</li>
<li>
<p translation-result="on"><a href="https://assertj.github.io/doc/">AssertJ</a> ：一个流畅的断言库。</p>
<p translation-origin="off"><a href="https://assertj.github.io/doc/">AssertJ</a>: A fluent assertion library.</p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/hamcrest/JavaHamcrest">Hamcrest</a> ：匹配器对象库（也称为约束或谓词）。</p>
<p translation-origin="off"><a href="https://github.com/hamcrest/JavaHamcrest">Hamcrest</a>: A library of matcher objects (also known as constraints or predicates).</p>
</li>
<li>
<p translation-result="on"><a href="https://site.mockito.org/">Mockito</a> ：Java 模拟框架。</p>
<p translation-origin="off"><a href="https://site.mockito.org/">Mockito</a>: A Java mocking framework.</p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/skyscreamer/JSONassert">JSONassert</a> : JSON 的断言库。</p>
<p translation-origin="off"><a href="https://github.com/skyscreamer/JSONassert">JSONassert</a>: An assertion library for JSON.</p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/jayway/JsonPath">JsonPath</a> ：JSON 的 XPath。</p>
<p translation-origin="off"><a href="https://github.com/jayway/JsonPath">JsonPath</a>: XPath for JSON.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">我们通常发现这些通用库在编写测试时很有用。如果这些库不适合你的需求，你可以添加自己的其他测试依赖项。</p>
<p translation-origin="off">We generally find these common libraries to be useful when writing tests.
If these libraries do not suit your needs, you can add additional test dependencies of your own.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.testing.spring-applications" translation-result="on"><a href="features.html#features.testing.spring-applications"></a>8.2. 测试 Spring 应用程序</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-applications"></a>8.2. Testing Spring Applications</h3>
<div class="paragraph">
<p translation-result="on">依赖注入的主要优点之一是它应该使你的代码更容易进行单元测试。你可以使用 <code>new</code> 运算符来实例化对象，甚至无需涉及 Spring。你还可以使用<em>模拟对象</em>而不是真正的依赖项。</p>
<p translation-origin="off">One of the major advantages of dependency injection is that it should make your code easier to unit test.
You can instantiate objects by using the <code>new</code> operator without even involving Spring.
You can also use <em>mock objects</em> instead of real dependencies.</p>
</div>
<div class="paragraph">
<p translation-result="on">通常，你需要超越单元测试并开始集成测试（使用 Spring <code>ApplicationContext</code> ）。能够执行集成测试而不需要部署你的应用程序或需要连接到其他基础设施是很有用的。</p>
<p translation-origin="off">Often, you need to move beyond unit testing and start integration testing (with a Spring <code>ApplicationContext</code>).
It is useful to be able to perform integration testing without requiring deployment of your application or needing to connect to other infrastructure.</p>
</div>
<div class="paragraph">
<p translation-result="on">Spring 框架包括一个用于此类集成测试的专用测试模块。你可以直接向 <code>org.springframework:spring-test</code> 声明一个依赖，或者使用 <code>spring-boot-starter-test</code> “Starter” 来传递它。</p>
<p translation-origin="off">The Spring Framework includes a dedicated test module for such integration testing.
You can declare a dependency directly to <code>org.springframework:spring-test</code> or use the <code>spring-boot-starter-test</code> “Starter” to pull it in transitively.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你之前没有使用过 <code>spring-test</code> 模块，你应该首先阅读 Spring Framework 参考文档的 <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testing">相关部分</a>。</p>
<p translation-origin="off">If you have not used the <code>spring-test</code> module before, you should start by reading the <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testing">relevant section</a> of the Spring Framework reference documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.testing.spring-boot-applications" translation-result="on"><a href="features.html#features.testing.spring-boot-applications"></a>8.3. 测试 Spring Boot 应用程序</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications"></a>8.3. Testing Spring Boot Applications</h3>
<div class="paragraph">
<p translation-result="on">Spring Boot 应用程序是 Spring <code>ApplicationContext</code> ，因此除了你通常使用普通 Spring 上下文执行的操作之外，无需进行任何特别的测试即可对其进行测试。</p>
<p translation-origin="off">A Spring Boot application is a Spring <code>ApplicationContext</code>, so nothing very special has to be done to test it beyond what you would normally do with a vanilla Spring context.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">仅当你使用 <code>SpringApplication</code> 创建时，Spring Boot 的外部属性、日志记录和其他功能才会默认安装在上下文中。</p>
<p translation-origin="off">External properties, logging, and other features of Spring Boot are installed in the context by default only if you use <code>SpringApplication</code> to create it.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 提供了一个 <code>@SpringBootTest</code> 注解，当你需要 Spring Boot 功能时，可以将其用作标准 <code>spring-test</code> <code>@ContextConfiguration</code> 注解的替代品。注释<a href="features.html#features.testing.spring-boot-applications.detecting-configuration">通过 <code>SpringApplication</code> 创建测试中使用的 <code>ApplicationContext</code> 来工作</a>。除了 <code>@SpringBootTest</code> 之外，还提供了许多其他注释来<a href="features.html#features.testing.spring-boot-applications.autoconfigured-tests">测试应用程序的更具体的切片</a>。</p>
<p translation-origin="off">Spring Boot provides a <code>@SpringBootTest</code> annotation, which can be used as an alternative to the standard <code>spring-test</code> <code>@ContextConfiguration</code> annotation when you need Spring Boot features.
The annotation works by <a href="features.html#features.testing.spring-boot-applications.detecting-configuration">creating the <code>ApplicationContext</code> used in your tests through <code>SpringApplication</code></a>.
In addition to <code>@SpringBootTest</code> a number of other annotations are also provided for <a href="features.html#features.testing.spring-boot-applications.autoconfigured-tests">testing more specific slices</a> of an application.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你使用的是 JUnit 4，请不要忘记将 <code>@RunWith(SpringRunner.class)</code> 添加到你的测试中，否则注释将被忽略。如果你使用的是 JUnit 5，则无需将等效的 <code>@ExtendWith(SpringExtension.class)</code> 添加为 <code>@SpringBootTest</code> 并且其他 <code>@…​Test</code> 注释已经使用它进行了注释。</p>
<p translation-origin="off">If you are using JUnit 4, do not forget to also add <code>@RunWith(SpringRunner.class)</code> to your test, otherwise the annotations will be ignored.
If you are using JUnit 5, there is no need to add the equivalent <code>@ExtendWith(SpringExtension.class)</code> as <code>@SpringBootTest</code> and the other <code>@…​Test</code> annotations are already annotated with it.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">默认情况下，<code>@SpringBootTest</code> 不会启动服务器。你可以使用 <code>@SpringBootTest</code> 的 <code>webEnvironment</code> 属性来进一步优化测试的运行方式：</p>
<p translation-origin="off">By default, <code>@SpringBootTest</code> will not start a server.
You can use the <code>webEnvironment</code> attribute of <code>@SpringBootTest</code> to further refine how your tests run:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><code>MOCK</code> （默认）：加载一个 Web <code>ApplicationContext</code> 并提供一个模拟 Web 环境。使用此注释时不启动嵌入式服务器。如果你的类路径上没有 Web 环境，则此模式会透明地回退到创建常规的非 Web <code>ApplicationContext</code> 。它可以与<a href="features.html#features.testing.spring-boot-applications.with-mock-environment"><code>@AutoConfigureMockMvc</code> 或 <code>@AutoConfigureWebTestClient</code> </a>结合使用，对你的 Web 应用程序进行基于模拟的测试。</p>
<p translation-origin="off"><code>MOCK</code>(Default) : Loads a web <code>ApplicationContext</code> and provides a mock web environment.
Embedded servers are not started when using this annotation.
If a web environment is not available on your classpath, this mode transparently falls back to creating a regular non-web <code>ApplicationContext</code>.
It can be used in conjunction with <a href="features.html#features.testing.spring-boot-applications.with-mock-environment"><code>@AutoConfigureMockMvc</code> or <code>@AutoConfigureWebTestClient</code></a> for mock-based testing of your web application.</p>
</li>
<li>
<p translation-result="on"><code>RANDOM_PORT</code> ：加载一个 <code>WebServerApplicationContext</code> 并提供一个真实的 Web 环境。嵌入式服务器启动并侦听随机端口。</p>
<p translation-origin="off"><code>RANDOM_PORT</code>: Loads a <code>WebServerApplicationContext</code> and provides a real web environment.
Embedded servers are started and listen on a random port.</p>
</li>
<li>
<p translation-result="on"><code>DEFINED_PORT</code> ：加载 <code>WebServerApplicationContext</code> 并提供真实的 Web 环境。嵌入式服务器启动并侦听定义的端口（来自你的 <code>application.properties</code> ）或默认端口 <code>8080</code> 。</p>
<p translation-origin="off"><code>DEFINED_PORT</code>: Loads a <code>WebServerApplicationContext</code> and provides a real web environment.
Embedded servers are started and listen on a defined port (from your <code>application.properties</code>) or on the default port of <code>8080</code>.</p>
</li>
<li>
<p translation-result="on"><code>NONE</code> ：使用 <code>SpringApplication</code> 加载 <code>ApplicationContext</code> 但不提供<em>任何</em>Web 环境（模拟或其他）。</p>
<p translation-origin="off"><code>NONE</code>: Loads an <code>ApplicationContext</code> by using <code>SpringApplication</code> but does not provide <em>any</em> web environment (mock or otherwise).</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">如果你的测试是 <code>@Transactional</code> ，默认情况下它会在每个测试方法结束时回滚事务。但是，由于将这种安排与 <code>RANDOM_PORT</code> 或 <code>DEFINED_PORT</code> 一起使用隐式提供了一个真正的 servlet 环境，HTTP 客户端和服务器在单独的线程中运行，因此在单独的事务中运行。在这种情况下，服务器上启动的任何事务都不会回滚。</p>
<p translation-origin="off">If your test is <code>@Transactional</code>, it rolls back the transaction at the end of each test method by default.
However, as using this arrangement with either <code>RANDOM_PORT</code> or <code>DEFINED_PORT</code> implicitly provides a real servlet environment, the HTTP client and server run in separate threads and, thus, in separate transactions.
Any transaction initiated on the server does not roll back in this case.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">如果你的应用程序为管理服务器使用不同的端口，则带有 <code>@SpringBootTest</code> <code>webEnvironment = WebEnvironment.RANDOM_PORT</code> 的 @SpringBootTest 还将在单独的随机端口上启动管理服务器。</p>
<p translation-origin="off"><code>@SpringBootTest</code> with <code>webEnvironment = WebEnvironment.RANDOM_PORT</code> will also start the management server on a separate random port if your application uses a different port for the management server.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.detecting-web-app-type" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.detecting-web-app-type"></a>8.3.1. 检测 Web 应用程序类型</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.detecting-web-app-type"></a>8.3.1. Detecting Web Application Type</h4>
<div class="paragraph">
<p translation-result="on">如果 Spring MVC 可用，则配置常规的基于 MVC 的应用程序上下文。如果你只有 Spring WebFlux，我们将检测到它并配置一个基于 WebFlux 的应用程序上下文。</p>
<p translation-origin="off">If Spring MVC is available, a regular MVC-based application context is configured.
If you have only Spring WebFlux, we will detect that and configure a WebFlux-based application context instead.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果两者都存在，则 Spring MVC 优先。如果要在此场景中测试响应式 Web 应用程序，则必须设置 <code>spring.main.web-application-type</code> 属性：</p>
<p translation-origin="off">If both are present, Spring MVC takes precedence.
If you want to test a reactive web application in this scenario, you must set the <code>spring.main.web-application-type</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.context.SpringBootTest;

</span><span class="fold-block">@SpringBootTest(properties = "spring.main.web-application-type=reactive")
class MyWebFluxTests {

    // ...

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.detecting-configuration" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.detecting-configuration"></a>8.3.2. 检测测试配置</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.detecting-configuration"></a>8.3.2. Detecting Test Configuration</h4>
<div class="paragraph">
<p translation-result="on">如果你熟悉 Spring Test Framework，你可能习惯于使用 <code>@ContextConfiguration(classes=…​)</code> 来指定要加载的 Spring <code>@Configuration</code> 。或者，你可能经常在测试中使用嵌套的 <code>@Configuration</code> 类。</p>
<p translation-origin="off">If you are familiar with the Spring Test Framework, you may be used to using <code>@ContextConfiguration(classes=…​)</code> in order to specify which Spring <code>@Configuration</code> to load.
Alternatively, you might have often used nested <code>@Configuration</code> classes within your test.</p>
</div>
<div class="paragraph">
<p translation-result="on">在测试 Spring Boot 应用程序时，通常不需要这样做。只要你没有明确定义，Spring Boot 的 <code>@*Test</code> 注释就会自动搜索你的主要配置。</p>
<p translation-origin="off">When testing Spring Boot applications, this is often not required.
Spring Boot’s <code>@*Test</code> annotations search for your primary configuration automatically whenever you do not explicitly define one.</p>
</div>
<div class="paragraph">
<p translation-result="on">搜索算法从包含测试的包开始，直到找到一个用 <code>@SpringBootApplication</code> 或 <code>@SpringBootConfiguration</code> 注释的类。只要你以合理的方式<a href="using.html#using.structuring-your-code">构建代码</a>，通常会找到你的主要配置。</p>
<p translation-origin="off">The search algorithm works up from the package that contains the test until it finds a class annotated with <code>@SpringBootApplication</code> or <code>@SpringBootConfiguration</code>.
As long as you <a href="using.html#using.structuring-your-code">structured your code</a> in a sensible way, your main configuration is usually found.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">如果你使用<a href="features.html#features.testing.spring-boot-applications.autoconfigured-tests">测试注释来测试应用程序的更具体部分</a>，则应避免在<a href="features.html#features.testing.spring-boot-applications.user-configuration-and-slicing">主方法的应用程序类</a>上添加特定于特定区域的配置设置。</p>
<p translation-origin="off">If you use a <a href="features.html#features.testing.spring-boot-applications.autoconfigured-tests">test annotation to test a more specific slice of your application</a>, you should avoid adding configuration settings that are specific to a particular area on the <a href="features.html#features.testing.spring-boot-applications.user-configuration-and-slicing">main method’s application class</a>.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>@SpringBootApplication</code> 的底层组件扫描配置定义了排除过滤器，用于确保切片按预期工作。如果你在 <code>@SpringBootApplication</code> -annotated 类上使用显式 <code>@ComponentScan</code> 指令，请注意这些过滤器将被禁用。如果你使用切片，则应重新定义它们。</p>
<p translation-origin="off">The underlying component scan configuration of <code>@SpringBootApplication</code> defines exclude filters that are used to make sure slicing works as expected.
If you are using an explicit <code>@ComponentScan</code> directive on your <code>@SpringBootApplication</code>-annotated class, be aware that those filters will be disabled.
If you are using slicing, you should define them again.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果要自定义主配置，可以使用嵌套的 <code>@TestConfiguration</code> 类。与嵌套的 <code>@Configuration</code> 类不同，它将用于代替应用程序的主要配置，嵌套的 <code>@TestConfiguration</code> 类是在应用程序的主要配置之外使用的。</p>
<p translation-origin="off">If you want to customize the primary configuration, you can use a nested <code>@TestConfiguration</code> class.
Unlike a nested <code>@Configuration</code> class, which would be used instead of your application’s primary configuration, a nested <code>@TestConfiguration</code> class is used in addition to your application’s primary configuration.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">Spring 的测试框架在测试之间缓存应用程序上下文。因此，只要你的测试共享相同的配置（无论它是如何被发现的），加载上下文的潜在耗时过程只会发生一次。</p>
<p translation-origin="off">Spring’s test framework caches application contexts between tests.
Therefore, as long as your tests share the same configuration (no matter how it is discovered), the potentially time-consuming process of loading the context happens only once.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.excluding-configuration" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.excluding-configuration"></a>8.3.3. 排除测试配置</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.excluding-configuration"></a>8.3.3. Excluding Test Configuration</h4>
<div class="paragraph">
<p translation-result="on">如果你的应用程序使用组件扫描（例如，如果你使用 <code>@SpringBootApplication</code> 或 <code>@ComponentScan</code> ），你可能会发现你仅为特定测试创建的顶级配置类意外地到处被拾取。</p>
<p translation-origin="off">If your application uses component scanning (for example, if you use <code>@SpringBootApplication</code> or <code>@ComponentScan</code>), you may find top-level configuration classes that you created only for specific tests accidentally get picked up everywhere.</p>
</div>
<div class="paragraph">
<p translation-result="on">正如我们<a href="features.html#features.testing.spring-boot-applications.detecting-configuration">之前看到的</a>，<code>@TestConfiguration</code> 可以用于测试的内部类来自定义主要配置。当放置在顶级类上时，<code>@TestConfiguration</code> 表示不应通过扫描获取 <code>src/test/java</code> 中的类。然后，你可以在需要的地方显式导入该类，如以下示例所示：</p>
<p translation-origin="off">As we <a href="features.html#features.testing.spring-boot-applications.detecting-configuration">have seen earlier</a>, <code>@TestConfiguration</code> can be used on an inner class of a test to customize the primary configuration.
When placed on a top-level class, <code>@TestConfiguration</code> indicates that classes in <code>src/test/java</code> should not be picked up by scanning.
You can then import that class explicitly where it is required, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.context.annotation.Import;

</span><span class="fold-block">@SpringBootTest
@Import(MyTestsConfiguration.class)
class MyTests {

    @Test
    void exampleTest() {
        // ...
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">如果你直接使用 <code>@ComponentScan</code> （即不通过 <code>@SpringBootApplication</code> ），则需要向其注册 <code>TypeExcludeFilter</code> 。有关详细信息，请参阅 <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/context/TypeExcludeFilter.html">Javadoc</a> 。</p>
<p translation-origin="off">If you directly use <code>@ComponentScan</code> (that is, not through <code>@SpringBootApplication</code>) you need to register the <code>TypeExcludeFilter</code> with it.
See <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/context/TypeExcludeFilter.html">the Javadoc</a> for details.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.using-application-arguments" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.using-application-arguments"></a> 8.3.4.使用应用程序参数</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.using-application-arguments"></a>8.3.4. Using Application Arguments</h4>
<div class="paragraph">
<p translation-result="on">如果你的应用程序需要 <a href="features.html#features.spring-application.application-arguments">arguments</a> ，你可以使用 <code>args</code> 属性让 <code>@SpringBootTest</code> 注入它们。</p>
<p translation-origin="off">If your application expects <a href="features.html#features.spring-application.application-arguments">arguments</a>, you can
have <code>@SpringBootTest</code> inject them using the <code>args</code> attribute.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.ApplicationArguments;
import org.springframework.boot.test.context.SpringBootTest;

import static org.assertj.core.api.Assertions.assertThat;

</span><span class="fold-block">@SpringBootTest(args = "--app.test=one")
class MyApplicationArgumentTests {

    @Test
    void applicationArgumentsPopulated(@Autowired ApplicationArguments args) {
        assertThat(args.getOptionNames()).containsOnly("app.test");
        assertThat(args.getOptionValues("app.test")).containsOnly("one");
    }

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.with-mock-environment" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.with-mock-environment"></a>8.3.5. 使用模拟环境进行测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.with-mock-environment"></a>8.3.5. Testing with a mock environment</h4>
<div class="paragraph">
<p translation-result="on">默认情况下，<code>@SpringBootTest</code> 不会启动服务器，而是设置一个模拟环境来测试 Web 端点。</p>
<p translation-origin="off">By default, <code>@SpringBootTest</code> does not start the server but instead sets up a mock environment for testing web endpoints.</p>
</div>
<div class="paragraph">
<p translation-result="on">使用 Spring MVC，我们可以使用<a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#spring-mvc-test-framework"><code>MockMvc</code></a>或 <code>WebTestClient</code> 查询我们的 Web 端点，如以下示例所示：</p>
<p translation-origin="off">With Spring MVC, we can query our web endpoints using <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#spring-mvc-test-framework"><code>MockMvc</code></a> or <code>WebTestClient</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.web.reactive.server.WebTestClient;
import org.springframework.test.web.servlet.MockMvc;

import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

</span><span class="fold-block">@SpringBootTest
@AutoConfigureMockMvc
class MyMockMvcTests {

    @Test
    void testWithMockMvc(@Autowired MockMvc mvc) throws Exception {
        mvc.perform(get("/")).andExpect(status().isOk()).andExpect(content().string("Hello World"));
    }

    // If Spring WebFlux is on the classpath, you can drive MVC tests with a WebTestClient
    @Test
    void testWithWebTestClient(@Autowired WebTestClient webClient) {
        webClient
                .get().uri("/")
                .exchange()
                .expectStatus().isOk()
                .expectBody(String.class).isEqualTo("Hello World");
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你只想专注于 Web 层而不启动完整的 <code>ApplicationContext</code> ，请考虑<a href="features.html#features.testing.spring-boot-applications.spring-mvc-tests">改用 <code>@WebMvcTest</code> </a> 。</p>
<p translation-origin="off">If you want to focus only on the web layer and not start a complete <code>ApplicationContext</code>, consider <a href="features.html#features.testing.spring-boot-applications.spring-mvc-tests">using <code>@WebMvcTest</code> instead</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">使用 Spring WebFlux 端点，你可以使用<a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#webtestclient-tests"><code>WebTestClient</code></a> ，如下例所示：</p>
<p translation-origin="off">With Spring WebFlux endpoints, you can use <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#webtestclient-tests"><code>WebTestClient</code></a> as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.reactive.AutoConfigureWebTestClient;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.web.reactive.server.WebTestClient;

</span><span class="fold-block">@SpringBootTest
@AutoConfigureWebTestClient
class MyMockWebTestClientTests {

    @Test
    void exampleTest(@Autowired WebTestClient webClient) {
        webClient
            .get().uri("/")
            .exchange()
            .expectStatus().isOk()
            .expectBody(String.class).isEqualTo("Hello World");
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">在模拟环境中进行测试通常比使用完整的 servlet 容器运行更快。但是，由于 mocking 发生在 Spring MVC 层，依赖于较低级别 servlet 容器行为的代码不能直接使用 MockMvc 进行测试。</p>
<p translation-origin="off">Testing within a mocked environment is usually faster than running with a full servlet container.
However, since mocking occurs at the Spring MVC layer, code that relies on lower-level servlet container behavior cannot be directly tested with MockMvc.</p>
</div>
<div class="paragraph">
<p translation-result="on">例如，Spring Boot 的错误处理是基于 servlet 容器提供的“错误页面”支持。这意味着，虽然你可以按预期测试你的 MVC 层抛出和处理异常，但你不能直接测试是否呈现了特定的<a href="web.html#web.servlet.spring-mvc.error-handling.error-pages">自定义错误页面</a>。如果你需要测试这些较低级别的问题，你可以启动一个完全运行的服务器，如下一节所述。</p>
<p translation-origin="off">For example, Spring Boot’s error handling is based on the “error page” support provided by the servlet container.
This means that, whilst you can test your MVC layer throws and handles exceptions as expected, you cannot directly test that a specific <a href="web.html#web.servlet.spring-mvc.error-handling.error-pages">custom error page</a> is rendered.
If you need to test these lower-level concerns, you can start a fully running server as described in the next section.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.with-running-server" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.with-running-server"></a>8.3.6. 使用正在运行的服务器进行测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.with-running-server"></a>8.3.6. Testing with a running server</h4>
<div class="paragraph">
<p translation-result="on">如果你需要启动一个完整运行的服务器，我们建议你使用随机端口。如果你使用 <code>@SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT)</code> ，则每次运行测试时都会随机选择一个可用端口。</p>
<p translation-origin="off">If you need to start a full running server, we recommend that you use random ports.
If you use <code>@SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT)</code>, an available port is picked at random each time your test runs.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>@LocalServerPort</code> 注释可用于<a href="howto.html#howto.webserver.discover-port">将实际使用的端口注入</a>到你的测试中。为方便起见，需要对启动的服务器进行 REST 调用的测试可以另外 <code>@Autowire</code> 一个<a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#webtestclient-tests"><code>WebTestClient</code></a> ，它解析到正在运行的服务器的相关链接，并带有用于验证响应的专用 API，如下例所示：</p>
<p translation-origin="off">The <code>@LocalServerPort</code> annotation can be used to <a href="howto.html#howto.webserver.discover-port">inject the actual port used</a> into your test.
For convenience, tests that need to make REST calls to the started server can additionally <code>@Autowire</code> a <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#webtestclient-tests"><code>WebTestClient</code></a>, which resolves relative links to the running server and comes with a dedicated API for verifying responses, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.context.SpringBootTest.WebEnvironment;
import org.springframework.test.web.reactive.server.WebTestClient;

</span><span class="fold-block">@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
class MyRandomPortWebTestClientTests {

    @Test
    void exampleTest(@Autowired WebTestClient webClient) {
        webClient
            .get().uri("/")
            .exchange()
            .expectStatus().isOk()
            .expectBody(String.class).isEqualTo("Hello World");
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>WebTestClient</code> 可用于实时服务器和<a href="features.html#features.testing.spring-boot-applications.with-mock-environment">模拟环境</a>。</p>
<p translation-origin="off"><code>WebTestClient</code> can be used against both live servers and <a href="features.html#features.testing.spring-boot-applications.with-mock-environment">mock environments</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">此设置需要在类路径上使用 <code>spring-webflux</code> 。如果你不能或不会添加 webflux，Spring Boot 还提供了一个 <code>TestRestTemplate</code> 工具：</p>
<p translation-origin="off">This setup requires <code>spring-webflux</code> on the classpath.
If you can not or will not add webflux, Spring Boot also provides a <code>TestRestTemplate</code> facility:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.context.SpringBootTest.WebEnvironment;
import org.springframework.boot.test.web.client.TestRestTemplate;

import static org.assertj.core.api.Assertions.assertThat;

</span><span class="fold-block">@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
class MyRandomPortTestRestTemplateTests {

    @Test
    void exampleTest(@Autowired TestRestTemplate restTemplate) {
        String body = restTemplate.getForObject("/", String.class);
        assertThat(body).isEqualTo("Hello World");
    }

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.customizing-web-test-client" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.customizing-web-test-client"></a> 8.3.7.自定义 WebTestClient</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.customizing-web-test-client"></a>8.3.7. Customizing WebTestClient</h4>
<div class="paragraph">
<p translation-result="on">要自定义 <code>WebTestClient</code> bean，请配置 <code>WebTestClientBuilderCustomizer</code> bean。使用用于创建 <code>WebTestClient</code> 的 <code>WebTestClient.Builder</code> 调用任何此类 bean。</p>
<p translation-origin="off">To customize the <code>WebTestClient</code> bean, configure a <code>WebTestClientBuilderCustomizer</code> bean.
Any such beans are called with the <code>WebTestClient.Builder</code> that is used to create the <code>WebTestClient</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.jmx" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.jmx"></a>8.3.8. 使用 JMX</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.jmx"></a>8.3.8. Using JMX</h4>
<div class="paragraph">
<p translation-result="on">由于测试上下文框架缓存了上下文，JMX 默认是禁用的，以防止相同的组件在同一个域上注册。如果此类测试需要访问 <code>MBeanServer</code> ，请考虑将其标记为脏：</p>
<p translation-origin="off">As the test context framework caches context, JMX is disabled by default to prevent identical components to register on the same domain.
If such test needs access to an <code>MBeanServer</code>, consider marking it dirty as well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import javax.management.MBeanServer;
import javax.management.MalformedObjectNameException;

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.annotation.DirtiesContext;
import org.springframework.test.context.junit.jupiter.SpringExtension;

import static org.assertj.core.api.Assertions.assertThat;

</span><span class="fold-block">@ExtendWith(SpringExtension.class)
@SpringBootTest(properties = "spring.jmx.enabled=true")
@DirtiesContext
class MyJmxTests {

    @Autowired
    private MBeanServer mBeanServer;

    @Test
    void exampleTest() throws MalformedObjectNameException {
        assertThat(this.mBeanServer.getDomains()).contains("java.lang");
        // ...
    }

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.metrics" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.metrics"></a>8.3.9. 使用指标</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.metrics"></a>8.3.9. Using Metrics</h4>
<div class="paragraph">
<p translation-result="on">无论你的类路径如何，使用 <code>@SpringBootTest</code> 时，除了内存中支持的之外，计量注册表都不会自动配置。</p>
<p translation-origin="off">Regardless of your classpath, meter registries, except the in-memory backed, are not auto-configured when using <code>@SpringBootTest</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你需要在集成测试中将指标导出到不同的后端，请使用 <code>@AutoConfigureMetrics</code> 对其进行注释。</p>
<p translation-origin="off">If you need to export metrics to a different backend as part of an integration test, annotate it with <code>@AutoConfigureMetrics</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.mocking-beans" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.mocking-beans"></a>8.3.10. 模拟和窥探 Bean</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.mocking-beans"></a>8.3.10. Mocking and Spying Beans</h4>
<div class="paragraph">
<p translation-result="on">运行测试时，有时需要在应用程序上下文中模拟某些组件。例如，你可能有一些在开发期间不可用的远程服务的外观。当你想要模拟在真实环境中可能难以触发的故障时，模拟也很有用。</p>
<p translation-origin="off">When running tests, it is sometimes necessary to mock certain components within your application context.
For example, you may have a facade over some remote service that is unavailable during development.
Mocking can also be useful when you want to simulate failures that might be hard to trigger in a real environment.</p>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 包含一个 <code>@MockBean</code> 注释，可用于为 <code>ApplicationContext</code> 中的 bean 定义 Mockito 模拟。你可以使用注解添加新 bean 或替换单个现有 bean 定义。注释可以直接用于测试类、测试中的字段或 <code>@Configuration</code> 类和字段。在字段上使用时，创建的模拟实例也会被注入。在每个测试方法之后，模拟 bean 都会自动重置。</p>
<p translation-origin="off">Spring Boot includes a <code>@MockBean</code> annotation that can be used to define a Mockito mock for a bean inside your <code>ApplicationContext</code>.
You can use the annotation to add new beans or replace a single existing bean definition.
The annotation can be used directly on test classes, on fields within your test, or on <code>@Configuration</code> classes and fields.
When used on a field, the instance of the created mock is also injected.
Mock beans are automatically reset after each test method.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p translation-result="on">如果你的测试使用 Spring Boot 的测试注解之一（例如 <code>@SpringBootTest</code> ），则会自动启用此功能。要以不同的排列方式使用此功能，必须显式添加侦听器，如以下示例所示：</p>
<p translation-origin="off">If your test uses one of Spring Boot’s test annotations (such as <code>@SpringBootTest</code>), this feature is automatically enabled.
To use this feature with a different arrangement, listeners must be explicitly added, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener;
import org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.TestExecutionListeners;

</span><span class="fold-block">@ContextConfiguration(classes = MyConfig.class)
@TestExecutionListeners({ MockitoTestExecutionListener.class, ResetMocksTestExecutionListener.class })
class MyTests {

    // ...

}
</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">以下示例将现有 <code>RemoteService</code> bean 替换为模拟实现：</p>
<p translation-origin="off">The following example replaces an existing <code>RemoteService</code> bean with a mock implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.mock.mockito.MockBean;

import static org.assertj.core.api.Assertions.assertThat;
import static org.mockito.BDDMockito.given;

</span><span class="fold-block">@SpringBootTest
class MyTests {

    @Autowired
    private Reverser reverser;

    @MockBean
    private RemoteService remoteService;

    @Test
    void exampleTest() {
        given(this.remoteService.getValue()).willReturn("spring");
        String reverse = this.reverser.getReverseValue(); // Calls injected RemoteService
        assertThat(reverse).isEqualTo("gnirps");
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on"><code>@MockBean</code> 不能用于模拟在应用程序上下文刷新期间执行的 bean 的行为。到执行测试时，应用程序上下文刷新已完成，配置模拟行为为时已晚。我们建议在这种情况下使用 <code>@Bean</code> 方法来创建和配置模拟。</p>
<p translation-origin="off"><code>@MockBean</code> cannot be used to mock the behavior of a bean that is exercised during application context refresh.
By the time the test is executed, the application context refresh has completed and it is too late to configure the mocked behavior.
We recommend using a <code>@Bean</code> method to create and configure the mock in this situation.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">此外，你可以使用 <code>@SpyBean</code> 用 Mockito <code>spy</code> 包装任何现有的 bean。有关完整的详细信息，请参阅 <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/test/mock/mockito/SpyBean.html">Javadoc</a> 。</p>
<p translation-origin="off">Additionally, you can use <code>@SpyBean</code> to wrap any existing bean with a Mockito <code>spy</code>.
See the <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/org/springframework/boot/test/mock/mockito/SpyBean.html">Javadoc</a> for full details.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">CGLib 代理，例如为作用域 bean 创建的代理，将代理方法声明为 <code>final</code> 。这会阻止 Mockito 正常运行，因为它无法在其默认配置中模拟或监视 <code>final</code> 方法。如果你想模拟或监视此类 bean，请通过将 <code>org.mockito:mockito-inline</code> 添加到应用程序的测试依赖项来配置 Mockito 以使用其内联模拟制造商。这允许 Mockito 模拟和监视 <code>final</code> 方法。</p>
<p translation-origin="off">CGLib proxies, such as those created for scoped beans, declare the proxied methods as <code>final</code>.
This stops Mockito from functioning correctly as it cannot mock or spy on <code>final</code> methods in its default configuration.
If you want to mock or spy on such a bean, configure Mockito to use its inline mock maker by adding <code>org.mockito:mockito-inline</code> to your application’s test dependencies.
This allows Mockito to mock and spy on <code>final</code> methods.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">虽然 Spring 的测试框架在测试之间缓存应用程序上下文并为共享相同配置的测试重用上下文，但 <code>@MockBean</code> 或 <code>@SpyBean</code> 的使用会影响缓存键，这很可能会增加上下文的数量。</p>
<p translation-origin="off">While Spring’s test framework caches application contexts between tests and reuses a context for tests sharing the same configuration, the use of <code>@MockBean</code> or <code>@SpyBean</code> influences the cache key, which will most likely increase the number of contexts.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你使用 <code>@SpyBean</code> 通过 <code>@Cacheable</code> 方法通过名称引用参数来监视 bean，则必须使用 <code>-parameters</code> 编译你的应用程序。这确保了一旦 bean 被监视，参数名称对缓存基础设施可用。</p>
<p translation-origin="off">If you are using <code>@SpyBean</code> to spy on a bean with <code>@Cacheable</code> methods that refer to parameters by name, your application must be compiled with <code>-parameters</code>.
This ensures that the parameter names are available to the caching infrastructure once the bean has been spied upon.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">当你使用 <code>@SpyBean</code> 监视由 Spring 代理的 bean 时，你可能需要在某些情况下删除 Spring 的代理，例如在使用 <code>given</code> 或 <code>when</code> 设置期望时。使用 <code>AopTestUtils.getTargetObject(yourProxiedSpy)</code> 这样做。</p>
<p translation-origin="off">When you are using <code>@SpyBean</code> to spy on a bean that is proxied by Spring, you may need to remove Spring’s proxy in some situations, for example when setting expectations using <code>given</code> or <code>when</code>.
Use <code>AopTestUtils.getTargetObject(yourProxiedSpy)</code> to do so.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-tests" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-tests"></a>8.3.11. 自动配置的测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-tests"></a>8.3.11. Auto-configured Tests</h4>
<div class="paragraph">
<p translation-result="on">Spring Boot 的自动配置系统适用于应用程序，但有时对于测试来说有点太多了。它通常有助于仅加载测试应用程序“切片”所需的配置部分。例如，你可能想要测试 Spring MVC 控制器是否正确映射 URL，并且你不希望在这些测试中涉及数据库调用，或者你可能想要测试 JPA 实体，而当那些测试运行。</p>
<p translation-origin="off">Spring Boot’s auto-configuration system works well for applications but can sometimes be a little too much for tests.
It often helps to load only the parts of the configuration that are required to test a “slice” of your application.
For example, you might want to test that Spring MVC controllers are mapping URLs correctly, and you do not want to involve database calls in those tests, or you might want to test JPA entities, and you are not interested in the web layer when those tests run.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>spring-boot-test-autoconfigure</code> 模块包含许多注释，可用于自动配置此类“切片”。它们中的每一个都以类似的方式工作，提供一个加载 <code>ApplicationContext</code> 的 <code>@…​Test</code> 注释和一个或多个可用于自定义自动配置设置的 <code>@AutoConfigure…​</code> 。</p>
<p translation-origin="off">The <code>spring-boot-test-autoconfigure</code> module includes a number of annotations that can be used to automatically configure such “slices”.
Each of them works in a similar way, providing a <code>@…​Test</code> annotation that loads the <code>ApplicationContext</code> and one or more <code>@AutoConfigure…​</code> annotations that can be used to customize auto-configuration settings.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">每个切片将组件扫描限制到适当的组件并加载一组非常有限的自动配置类。如果需要排除其中一个，大多数 <code>@…​Test</code> 注解都提供了 <code>excludeAutoConfiguration</code> 属性。或者，你可以使用 <code>@ImportAutoConfiguration#exclude</code> 。</p>
<p translation-origin="off">Each slice restricts component scan to appropriate components and loads a very restricted set of auto-configuration classes.
If you need to exclude one of them, most <code>@…​Test</code> annotations provide an <code>excludeAutoConfiguration</code> attribute.
Alternatively, you can use <code>@ImportAutoConfiguration#exclude</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">不支持在一个测试中使用多个 <code>@…​Test</code> 注释来包含多个“切片”。如果你需要多个“切片”，请选择其中一个 <code>@…​Test</code> 注释并手动包含其他“切片”的 <code>@AutoConfigure…​</code> 。</p>
<p translation-origin="off">Including multiple “slices” by using several <code>@…​Test</code> annotations in one test is not supported.
If you need multiple “slices”, pick one of the <code>@…​Test</code> annotations and include the <code>@AutoConfigure…​</code> annotations of the other “slices” by hand.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">也可以将 @AutoConfigure <code>@AutoConfigure…​</code> 与标准 <code>@SpringBootTest</code> 注释一起使用。如果你对“切片”你的应用程序不感兴趣，但你想要一些自动配置的测试 bean，你可以使用这种组合。</p>
<p translation-origin="off">It is also possible to use the <code>@AutoConfigure…​</code> annotations with the standard <code>@SpringBootTest</code> annotation.
You can use this combination if you are not interested in “slicing” your application but you want some of the auto-configured test beans.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.json-tests" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.json-tests"></a>8.3.12. 自动配置的 JSON 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.json-tests"></a>8.3.12. Auto-configured JSON Tests</h4>
<div class="paragraph">
<p translation-result="on">要测试对象 JSON 序列化和反序列化是否按预期工作，你可以使用 <code>@JsonTest</code> 注释。<code>@JsonTest</code> 自动配置可用的支持 JSON 映射器，它可以是以下库之一：</p>
<p translation-origin="off">To test that object JSON serialization and deserialization is working as expected, you can use the <code>@JsonTest</code> annotation.
<code>@JsonTest</code> auto-configures the available supported JSON mapper, which can be one of the following libraries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">Jackson <code>ObjectMapper</code> ，任何 <code>@JsonComponent</code> bean 和任何 Jackson <code>Module</code> s</p>
<p translation-origin="off">Jackson <code>ObjectMapper</code>, any <code>@JsonComponent</code> beans and any Jackson <code>Module</code>s</p>
</li>
<li>
<p><code>Gson</code></p>
</li>
<li>
<p><code>Jsonb</code></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@JsonTest</code> 启用的自动配置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configurations that are enabled by <code>@JsonTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果需要配置自动配置的元素，可以使用 <code>@AutoConfigureJsonTesters</code> 注解。</p>
<p translation-origin="off">If you need to configure elements of the auto-configuration, you can use the <code>@AutoConfigureJsonTesters</code> annotation.</p>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 包括基于 AssertJ 的帮助程序，它们与 JSONAssert 和 JsonPath 库一起检查 JSON 是否按预期显示。<code>JacksonTester</code> 、 <code>GsonTester</code> 、 <code>JsonbTester</code> 和 <code>BasicJsonTester</code> 类可分别用于 Jackson、Gson、Jsonb 和 Strings。使用 <code>@JsonTest</code> 时，测试类上的任何辅助字段都可以是 <code>@Autowired</code> 。以下示例显示了 Jackson 的测试类：</p>
<p translation-origin="off">Spring Boot includes AssertJ-based helpers that work with the JSONAssert and JsonPath libraries to check that JSON appears as expected.
The <code>JacksonTester</code>, <code>GsonTester</code>, <code>JsonbTester</code>, and <code>BasicJsonTester</code> classes can be used for Jackson, Gson, Jsonb, and Strings respectively.
Any helper fields on the test class can be <code>@Autowired</code> when using <code>@JsonTest</code>.
The following example shows a test class for Jackson:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.json.JsonTest;
import org.springframework.boot.test.json.JacksonTester;

import static org.assertj.core.api.Assertions.assertThat;

</span><span class="fold-block">@JsonTest
class MyJsonTests {

    @Autowired
    private JacksonTester&lt;VehicleDetails&gt; json;

    @Test
    void serialize() throws Exception {
        VehicleDetails details = new VehicleDetails("Honda", "Civic");
        // Assert against a `.json` file in the same package as the test
        assertThat(this.json.write(details)).isEqualToJson("expected.json");
        // Or use JSON path based assertions
        assertThat(this.json.write(details)).hasJsonPathStringValue("@.make");
        assertThat(this.json.write(details)).extractingJsonPathStringValue("@.make").isEqualTo("Honda");
    }

    @Test
    void deserialize() throws Exception {
        String content = "{\"make\":\"Ford\",\"model\":\"Focus\"}";
        assertThat(this.json.parse(content)).isEqualTo(new VehicleDetails("Ford", "Focus"));
        assertThat(this.json.parseObject(content).getMake()).isEqualTo("Ford");
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">JSON 辅助类也可以直接用于标准单元测试。为此，如果你不使用 <code>@JsonTest</code> ，请在 <code>initFields</code> 方法中调用帮助程序的 <code>@Before</code> 方法。</p>
<p translation-origin="off">JSON helper classes can also be used directly in standard unit tests.
To do so, call the <code>initFields</code> method of the helper in your <code>@Before</code> method if you do not use <code>@JsonTest</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果你使用 Spring Boot 的基于 AssertJ 的帮助器对给定 JSON 路径中的数字值进行断言，则可能无法使用 <code>isEqualTo</code> ，具体取决于类型。相反，你可以使用 AssertJ 的 <code>satisfies</code> 来断言该值与给定条件匹配。例如，以下示例断言实际数字是在偏移量 <code>0.01</code> 内接近 <code>0.15</code> 的浮点值。</p>
<p translation-origin="off">If you use Spring Boot’s AssertJ-based helpers to assert on a number value at a given JSON path, you might not be able to use <code>isEqualTo</code> depending on the type.
Instead, you can use AssertJ’s <code>satisfies</code> to assert that the value matches the given condition.
For instance, the following example asserts that the actual number is a float value close to <code>0.15</code> within an offset of <code>0.01</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Test
void someTest() throws Exception {
    SomeObject value = new SomeObject(0.152f);
    assertThat(this.json.write(value)).extractingJsonPathNumberValue("@.test.numberValue")
            .satisfies((number) -&gt; assertThat(number.floatValue()).isCloseTo(0.15f, within(0.01f)));
}
</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.spring-mvc-tests" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.spring-mvc-tests"></a>8.3.13. 自动配置的 Spring MVC 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.spring-mvc-tests"></a>8.3.13. Auto-configured Spring MVC Tests</h4>
<div class="paragraph">
<p translation-result="on">要测试 Spring MVC 控制器是否按预期工作，请使用 <code>@WebMvcTest</code> 注释。<code>@WebMvcTest</code> 自动配置 Spring MVC 基础结构并将扫描的 bean 限制为 <code>@Controller</code> 、 <code>@ControllerAdvice</code> 、 <code>@JsonComponent</code> 、 <code>Converter</code> 、 <code>GenericConverter</code> 、 <code>Filter</code> 、 <code>HandlerInterceptor</code> 、 <code>WebMvcConfigurer</code> 、 <code>WebMvcRegistrations</code> 和 <code>HandlerMethodArgumentResolver</code> 。使用 <code>@WebMvcTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。</p>
<p translation-origin="off">To test whether Spring MVC controllers are working as expected, use the <code>@WebMvcTest</code> annotation.
<code>@WebMvcTest</code> auto-configures the Spring MVC infrastructure and limits scanned beans to <code>@Controller</code>, <code>@ControllerAdvice</code>, <code>@JsonComponent</code>, <code>Converter</code>, <code>GenericConverter</code>, <code>Filter</code>, <code>HandlerInterceptor</code>, <code>WebMvcConfigurer</code>, <code>WebMvcRegistrations</code>, and <code>HandlerMethodArgumentResolver</code>.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@WebMvcTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到由 <code>@WebMvcTest</code> 启用的自动配置设置列表。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@WebMvcTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你需要注册额外的组件，例如 Jackson <code>Module</code> ，你可以在你的测试中使用 <code>@Import</code> 导入额外的配置类。</p>
<p translation-origin="off">If you need to register extra components, such as the Jackson <code>Module</code>, you can import additional configuration classes by using <code>@Import</code> on your test.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">通常，<code>@WebMvcTest</code> 仅限于单个控制器，并与 <code>@MockBean</code> 结合使用，为所需的协作者提供模拟实现。</p>
<p translation-origin="off">Often, <code>@WebMvcTest</code> is limited to a single controller and is used in combination with <code>@MockBean</code> to provide mock implementations for required collaborators.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>@WebMvcTest</code> 还自动配置 <code>MockMvc</code> 。Mock MVC 提供了一种强大的方法来快速测试 MVC 控制器，而无需启动完整的 HTTP 服务器。</p>
<p translation-origin="off"><code>@WebMvcTest</code> also auto-configures <code>MockMvc</code>.
Mock MVC offers a powerful way to quickly test MVC controllers without needing to start a full HTTP server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">你还可以通过使用 <code>@AutoConfigureMockMvc</code> 注释来在非 <code>@WebMvcTest</code> （例如 <code>@SpringBootTest</code> ）中自动配置 <code>MockMvc</code> 。以下示例使用 <code>MockMvc</code> ：</p>
<p translation-origin="off">You can also auto-configure <code>MockMvc</code> in a non-<code>@WebMvcTest</code> (such as <code>@SpringBootTest</code>) by annotating it with <code>@AutoConfigureMockMvc</code>.
The following example uses <code>MockMvc</code>:</p>
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.boot.test.mock.mockito.MockBean;
import org.springframework.http.MediaType;
import org.springframework.test.web.servlet.MockMvc;

import static org.mockito.BDDMockito.given;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

</span><span class="fold-block">@WebMvcTest(UserVehicleController.class)
class MyControllerTests {

    @Autowired
    private MockMvc mvc;

    @MockBean
    private UserVehicleService userVehicleService;

    @Test
    void testExample() throws Exception {
        given(this.userVehicleService.getVehicleDetails("sboot"))
            .willReturn(new VehicleDetails("Honda", "Civic"));
        this.mvc.perform(get("/sboot/vehicle").accept(MediaType.TEXT_PLAIN))
            .andExpect(status().isOk())
            .andExpect(content().string("Honda Civic"));
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你需要配置自动配置的元素（例如，应应用 servlet 过滤器），你可以使用 <code>@AutoConfigureMockMvc</code> 注释中的属性。</p>
<p translation-origin="off">If you need to configure elements of the auto-configuration (for example, when servlet filters should be applied) you can use attributes in the <code>@AutoConfigureMockMvc</code> annotation.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果你使用 HtmlUnit 和 Selenium，自动配置还提供 HtmlUnit <code>WebClient</code> bean 和/或 Selenium <code>WebDriver</code> bean。以下示例使用 HtmlUnit：</p>
<p translation-origin="off">If you use HtmlUnit and Selenium, auto-configuration also provides an HtmlUnit <code>WebClient</code> bean and/or a Selenium <code>WebDriver</code> bean.
The following example uses HtmlUnit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.boot.test.mock.mockito.MockBean;

import static org.assertj.core.api.Assertions.assertThat;
import static org.mockito.BDDMockito.given;

</span><span class="fold-block">@WebMvcTest(UserVehicleController.class)
class MyHtmlUnitTests {

    @Autowired
    private WebClient webClient;

    @MockBean
    private UserVehicleService userVehicleService;

    @Test
    void testExample() throws Exception {
        given(this.userVehicleService.getVehicleDetails("sboot")).willReturn(new VehicleDetails("Honda", "Civic"));
        HtmlPage page = this.webClient.getPage("/sboot/vehicle.html");
        assertThat(page.getBody().getTextContent()).isEqualTo("Honda Civic");
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">默认情况下，Spring Boot 将 <code>WebDriver</code> bean 放在一个特殊的“范围”中，以确保驱动程序在每次测试后退出并注入新实例。如果你不希望这种行为，你可以将 <code>@Scope("singleton")</code> 添加到你的 <code>WebDriver</code> <code>@Bean</code> 定义中。</p>
<p translation-origin="off">By default, Spring Boot puts <code>WebDriver</code> beans in a special “scope” to ensure that the driver exits after each test and that a new instance is injected.
If you do not want this behavior, you can add <code>@Scope("singleton")</code> to your <code>WebDriver</code> <code>@Bean</code> definition.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<p translation-result="on">Spring Boot 创建的 <code>webDriver</code> 范围将替换任何用户定义的同名范围。如果你定义自己的 <code>webDriver</code> 范围，你可能会发现在使用 <code>@WebMvcTest</code> 时它会停止工作。</p>
<p translation-origin="off">The <code>webDriver</code> scope created by Spring Boot will replace any user defined scope of the same name.
If you define your own <code>webDriver</code> scope you may find it stops working when you use <code>@WebMvcTest</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果类路径上有 Spring Security，<code>@WebMvcTest</code> 还将扫描 <code>WebSecurityConfigurer</code> bean。你可以使用 Spring Security 的测试支持，而不是完全禁用此类测试的安全性。有关如何使用 Spring Security 的 <code>MockMvc</code> 支持的更多详细信息，请参见<em><a href="howto.html#howto.testing.with-spring-security">howto.html</a></em> how-to 部分。</p>
<p translation-origin="off">If you have Spring Security on the classpath, <code>@WebMvcTest</code> will also scan <code>WebSecurityConfigurer</code> beans.
Instead of disabling security completely for such tests, you can use Spring Security’s test support.
More details on how to use Spring Security’s <code>MockMvc</code> support can be found in this <em><a href="howto.html#howto.testing.with-spring-security">howto.html</a></em> how-to section.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">有时编写 Spring MVC 测试是不够的； Spring Boot 可以帮助你<a href="features.html#features.testing.spring-boot-applications.with-running-server">使用实际的服务器运行完整的端到端测试</a>。</p>
<p translation-origin="off">Sometimes writing Spring MVC tests is not enough; Spring Boot can help you run <a href="features.html#features.testing.spring-boot-applications.with-running-server">full end-to-end tests with an actual server</a>.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.spring-webflux-tests" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.spring-webflux-tests"></a>8.3.14. 自动配置的 Spring WebFlux 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.spring-webflux-tests"></a>8.3.14. Auto-configured Spring WebFlux Tests</h4>
<div class="paragraph">
<p translation-result="on">要测试 <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/web-reactive.html">Spring WebFlux</a> 控制器是否按预期工作，可以使用 <code>@WebFluxTest</code> 注释。<code>@WebFluxTest</code> 自动配置 Spring WebFlux 基础结构并将扫描的 bean 限制为 <code>@Controller</code> 、 <code>@ControllerAdvice</code> 、 <code>@JsonComponent</code> 、 <code>Converter</code> 、 <code>GenericConverter</code> 、 <code>WebFluxConfigurer</code> <code>WebFilter</code> 使用 <code>@WebFluxTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。</p>
<p translation-origin="off">To test that <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/web-reactive.html">Spring WebFlux</a> controllers are working as expected, you can use the <code>@WebFluxTest</code> annotation.
<code>@WebFluxTest</code> auto-configures the Spring WebFlux infrastructure and limits scanned beans to <code>@Controller</code>, <code>@ControllerAdvice</code>, <code>@JsonComponent</code>, <code>Converter</code>, <code>GenericConverter</code>, <code>WebFilter</code>, and <code>WebFluxConfigurer</code>.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@WebFluxTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@WebFluxTest</code> 启用的自动配置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configurations that are enabled by <code>@WebFluxTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你需要注册额外的组件，例如 Jackson <code>Module</code> ，你可以在测试中使用 <code>@Import</code> 导入其他配置类。</p>
<p translation-origin="off">If you need to register extra components, such as Jackson <code>Module</code>, you can import additional configuration classes using <code>@Import</code> on your test.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">通常，<code>@WebFluxTest</code> 仅限于单个控制器，并与 <code>@MockBean</code> 注释结合使用，为所需的协作者提供模拟实现。</p>
<p translation-origin="off">Often, <code>@WebFluxTest</code> is limited to a single controller and used in combination with the <code>@MockBean</code> annotation to provide mock implementations for required collaborators.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>@WebFluxTest</code> 还自动配置<a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#webtestclient"><code>WebTestClient</code></a> ，它提供了一种强大的方法来快速测试 WebFlux 控制器，而无需启动完整的 HTTP 服务器。</p>
<p translation-origin="off"><code>@WebFluxTest</code> also auto-configures <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#webtestclient"><code>WebTestClient</code></a>, which offers a powerful way to quickly test WebFlux controllers without needing to start a full HTTP server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">你还可以通过使用 <code>@AutoConfigureWebTestClient</code> 注释来在非 <code>@WebFluxTest</code> （例如 <code>@SpringBootTest</code> ）中自动配置 <code>WebTestClient</code> 。以下示例显示了一个同时使用 <code>@WebFluxTest</code> 和 <code>WebTestClient</code> 的类：</p>
<p translation-origin="off">You can also auto-configure <code>WebTestClient</code> in a non-<code>@WebFluxTest</code> (such as <code>@SpringBootTest</code>) by annotating it with <code>@AutoConfigureWebTestClient</code>.
The following example shows a class that uses both <code>@WebFluxTest</code> and a <code>WebTestClient</code>:</p>
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTest;
import org.springframework.boot.test.mock.mockito.MockBean;
import org.springframework.http.MediaType;
import org.springframework.test.web.reactive.server.WebTestClient;

import static org.mockito.BDDMockito.given;

</span><span class="fold-block">@WebFluxTest(UserVehicleController.class)
class MyControllerTests {

    @Autowired
    private WebTestClient webClient;

    @MockBean
    private UserVehicleService userVehicleService;

    @Test
    void testExample() throws Exception {
        given(this.userVehicleService.getVehicleDetails("sboot"))
            .willReturn(new VehicleDetails("Honda", "Civic"));
        this.webClient.get().uri("/sboot/vehicle").accept(MediaType.TEXT_PLAIN).exchange()
            .expectStatus().isOk()
            .expectBody(String.class).isEqualTo("Honda Civic");
    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">此设置仅受 WebFlux 应用程序支持，因为在模拟的 Web 应用程序中使用 <code>WebTestClient</code> 目前仅适用于 WebFlux。</p>
<p translation-origin="off">This setup is only supported by WebFlux applications as using <code>WebTestClient</code> in a mocked web application only works with WebFlux at the moment.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on"><code>@WebFluxTest</code> 无法检测通过功能 Web 框架注册的路由。要在上下文中测试 <code>RouterFunction</code> bean，请考虑使用 <code>@Import</code> 或使用 <code>RouterFunction</code> 自己导入 <code>@SpringBootTest</code> 。</p>
<p translation-origin="off"><code>@WebFluxTest</code> cannot detect routes registered through the functional web framework.
For testing <code>RouterFunction</code> beans in the context, consider importing your <code>RouterFunction</code> yourself by using <code>@Import</code> or by using <code>@SpringBootTest</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on"><code>@WebFluxTest</code> 无法检测注册为 <code>SecurityWebFilterChain</code> 类型的 <code>@Bean</code> 的自定义安全配置。要将其包含在你的测试中，你需要使用 <code>@Import</code> 或使用 <code>@SpringBootTest</code> 导入注册 bean 的配置。</p>
<p translation-origin="off"><code>@WebFluxTest</code> cannot detect custom security configuration registered as a <code>@Bean</code> of type <code>SecurityWebFilterChain</code>.
To include that in your test, you will need to import the configuration that registers the bean by using <code>@Import</code> or by using <code>@SpringBootTest</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">有时编写 Spring WebFlux 测试是不够的； Spring Boot 可以帮助你<a href="features.html#features.testing.spring-boot-applications.with-running-server">使用实际的服务器运行完整的端到端测试</a>。</p>
<p translation-origin="off">Sometimes writing Spring WebFlux tests is not enough; Spring Boot can help you run <a href="features.html#features.testing.spring-boot-applications.with-running-server">full end-to-end tests with an actual server</a>.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-spring-data-cassandra" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-cassandra"></a> 8.3.15. 自动配置的数据 Cassandra 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-cassandra"></a>8.3.15. Auto-configured Data Cassandra Tests</h4>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@DataCassandraTest</code> 来测试 Cassandra 应用程序。默认情况下，它配置一个 <code>CassandraTemplate</code> ，扫描 <code>@Table</code> 类，并配置 Spring Data Cassandra 存储库。使用 <code>@DataCassandraTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。（有关在 Spring Boot 中使用 Cassandra 的更多信息，请参阅本章前面的“ <a href="data.html#data.nosql.cassandra">data.html</a> ”。）</p>
<p translation-origin="off">You can use <code>@DataCassandraTest</code> to test Cassandra applications.
By default, it configures a <code>CassandraTemplate</code>, scans for <code>@Table</code> classes, and configures Spring Data Cassandra repositories.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@DataCassandraTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.
(For more about using Cassandra with Spring Boot, see "<a href="data.html#data.nosql.cassandra">data.html</a>", earlier in this chapter.)</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@DataCassandraTest</code> 启用的自动配置设置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@DataCassandraTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">以下示例显示了在 Spring Boot 中使用 Cassandra 测试的典型设置：</p>
<p translation-origin="off">The following example shows a typical setup for using Cassandra tests in Spring Boot:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.data.cassandra.DataCassandraTest;

</span><span class="fold-block">@DataCassandraTest
class MyDataCassandraTests {

    @Autowired
    private SomeRepository repository;

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-spring-data-jpa" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa"></a> 8.3.16. 自动配置的数据 JPA 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa"></a>8.3.16. Auto-configured Data JPA Tests</h4>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@DataJpaTest</code> 注释来测试 JPA 应用程序。默认情况下，它会扫描 <code>@Entity</code> 类并配置 Spring Data JPA 存储库。如果类路径上有一个嵌入式数据库，它也会配置一个。默认情况下，通过将 <code>spring.jpa.show-sql</code> 属性设置为 <code>true</code> 来记录 SQL 查询。这可以使用注释的 <code>showSql()</code> 属性禁用。</p>
<p translation-origin="off">You can use the <code>@DataJpaTest</code> annotation to test JPA applications.
By default, it scans for <code>@Entity</code> classes and configures Spring Data JPA repositories.
If an embedded database is available on the classpath, it configures one as well.
SQL queries are logged by default by setting the <code>spring.jpa.show-sql</code> property to <code>true</code>.
This can be disabled using the <code>showSql()</code> attribute of the annotation.</p>
</div>
<div class="paragraph">
<p translation-result="on">使用 <code>@DataJpaTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。</p>
<p translation-origin="off">Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@DataJpaTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到由 <code>@DataJpaTest</code> 启用的自动配置设置列表。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@DataJpaTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">默认情况下，数据 JPA 测试是事务性的，并在每个测试结束时回滚。有关更多详细信息，请参阅 Spring Framework 参考文档中的<a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testcontext-tx-enabling-transactions">相关部分</a>。如果这不是你想要的，你可以为测试或整个班级禁用事务管理，如下所示：</p>
<p translation-origin="off">By default, data JPA tests are transactional and roll back at the end of each test.
See the <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testcontext-tx-enabling-transactions">relevant section</a> in the Spring Framework Reference Documentation for more details.
If that is not what you want, you can disable transaction management for a test or for the whole class as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

</span><span class="fold-block">@DataJpaTest
@Transactional(propagation = Propagation.NOT_SUPPORTED)
class MyNonTransactionalTests {

    // ...

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">数据 JPA 测试也可以注入一个<a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-test-autoconfigure/src/main/java/org/springframework/boot/test/autoconfigure/orm/jpa/TestEntityManager.java"><code>TestEntityManager</code></a> bean，它提供了标准 JPA EntityManager 的替代方案，该标准 JPA <code>EntityManager</code> 是专门为测试而设计的。</p>
<p translation-origin="off">Data JPA tests may also inject a <a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-test-autoconfigure/src/main/java/org/springframework/boot/test/autoconfigure/orm/jpa/TestEntityManager.java"><code>TestEntityManager</code></a> bean, which provides an alternative to the standard JPA <code>EntityManager</code> that is specifically designed for tests.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>TestEntityManager</code> 也可以通过添加 <code>@AutoConfigureTestEntityManager</code> 自动配置到任何基于 Spring 的测试类。这样做时，请确保你的测试在事务中运行，例如通过在测试类或方法上添加 <code>@Transactional</code> 。</p>
<p translation-origin="off"><code>TestEntityManager</code> can also be auto-configured to any of your Spring-based test class by adding <code>@AutoConfigureTestEntityManager</code>.
When doing so, make sure that your test is running in a transaction, for instance by adding <code>@Transactional</code> on your test class or method.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果你需要，也可以使用 <code>JdbcTemplate</code> 。以下示例显示了正在使用的 <code>@DataJpaTest</code> 注释：</p>
<p translation-origin="off">A <code>JdbcTemplate</code> is also available if you need that.
The following example shows the <code>@DataJpaTest</code> annotation in use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;

import static org.assertj.core.api.Assertions.assertThat;

</span><span class="fold-block">@DataJpaTest
class MyRepositoryTests {

    @Autowired
    private TestEntityManager entityManager;

    @Autowired
    private UserRepository repository;

    @Test
    void testExample() throws Exception {
        this.entityManager.persist(new User("sboot", "1234"));
        User user = this.repository.findByUsername("sboot");
        assertThat(user.getUsername()).isEqualTo("sboot");
        assertThat(user.getEmployeeNumber()).isEqualTo("1234");
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">内存嵌入式数据库通常适用于测试，因为它们速度快且不需要任何安装。但是，如果你更喜欢针对真实数据库运行测试，则可以使用 <code>@AutoConfigureTestDatabase</code> 注释，如以下示例所示：</p>
<p translation-origin="off">In-memory embedded databases generally work well for tests, since they are fast and do not require any installation.
If, however, you prefer to run tests against a real database you can use the <code>@AutoConfigureTestDatabase</code> annotation, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;
import org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase.Replace;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;

</span><span class="fold-block">@DataJpaTest
@AutoConfigureTestDatabase(replace = Replace.NONE)
class MyRepositoryTests {

    // ...

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-jdbc" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-jdbc"></a>8.3.17. 自动配置的 JDBC 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-jdbc"></a>8.3.17. Auto-configured JDBC Tests</h4>
<div class="paragraph">
<p translation-result="on"><code>@JdbcTest</code> 与 <code>@DataJpaTest</code> 类似，但适用于只需要 <code>DataSource</code> 且不使用 Spring Data JDBC 的测试。默认情况下，它配置一个内存嵌入式数据库和一个 <code>JdbcTemplate</code> 。使用 <code>@JdbcTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。</p>
<p translation-origin="off"><code>@JdbcTest</code> is similar to <code>@DataJpaTest</code> but is for tests that only require a <code>DataSource</code> and do not use Spring Data JDBC.
By default, it configures an in-memory embedded database and a <code>JdbcTemplate</code>.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@JdbcTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@JdbcTest</code> 启用的自动配置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configurations that are enabled by <code>@JdbcTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">默认情况下，JDBC 测试是事务性的，并在每次测试结束时回滚。有关更多详细信息，请参阅 Spring Framework 参考文档中的<a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testcontext-tx-enabling-transactions">相关部分</a>。如果这不是你想要的，你可以为测试或整个班级禁用事务管理，如下所示：</p>
<p translation-origin="off">By default, JDBC tests are transactional and roll back at the end of each test.
See the <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testcontext-tx-enabling-transactions">relevant section</a> in the Spring Framework Reference Documentation for more details.
If that is not what you want, you can disable transaction management for a test or for the whole class, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.autoconfigure.jdbc.JdbcTest;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

</span><span class="fold-block">@JdbcTest
@Transactional(propagation = Propagation.NOT_SUPPORTED)
class MyTransactionalTests {

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果你希望测试针对真实数据库运行，则可以使用 <code>@AutoConfigureTestDatabase</code> 注释，其方式与 <code>DataJpaTest</code> 相同。（请参阅“<a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa">自动配置的数据 JPA 测试</a>”。）</p>
<p translation-origin="off">If you prefer your test to run against a real database, you can use the <code>@AutoConfigureTestDatabase</code> annotation in the same way as for <code>DataJpaTest</code>.
(See "<a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa">Auto-configured Data JPA Tests</a>".)</p>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-spring-data-jdbc" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jdbc"></a> 8.3.18. 自动配置的数据 JDBC 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jdbc"></a>8.3.18. Auto-configured Data JDBC Tests</h4>
<div class="paragraph">
<p translation-result="on"><code>@DataJdbcTest</code> 与 <code>@JdbcTest</code> 类似，但适用于使用 Spring Data JDBC 存储库的测试。默认情况下，它配置一个内存嵌入式数据库、一个 <code>JdbcTemplate</code> 和 Spring Data JDBC 存储库。使用 <code>@DataJdbcTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。</p>
<p translation-origin="off"><code>@DataJdbcTest</code> is similar to <code>@JdbcTest</code> but is for tests that use Spring Data JDBC repositories.
By default, it configures an in-memory embedded database, a <code>JdbcTemplate</code>, and Spring Data JDBC repositories.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@DataJdbcTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@DataJdbcTest</code> 启用的自动配置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configurations that are enabled by <code>@DataJdbcTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">默认情况下，Data JDBC 测试是事务性的，并在每次测试结束时回滚。有关更多详细信息，请参阅 Spring Framework 参考文档中的<a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testcontext-tx-enabling-transactions">相关部分</a>。如果这不是你想要的，你可以禁用测试或整个测试类的事务管理，<a href="features.html#features.testing.spring-boot-applications.autoconfigured-jdbc">如 JDBC 示例中所示</a>。</p>
<p translation-origin="off">By default, Data JDBC tests are transactional and roll back at the end of each test.
See the <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testcontext-tx-enabling-transactions">relevant section</a> in the Spring Framework Reference Documentation for more details.
If that is not what you want, you can disable transaction management for a test or for the whole test class as <a href="features.html#features.testing.spring-boot-applications.autoconfigured-jdbc">shown in the JDBC example</a>.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你希望测试针对真实数据库运行，则可以使用 <code>@AutoConfigureTestDatabase</code> 注释，其方式与 <code>DataJpaTest</code> 相同。（请参阅“<a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa">自动配置的数据 JPA 测试</a>”。）</p>
<p translation-origin="off">If you prefer your test to run against a real database, you can use the <code>@AutoConfigureTestDatabase</code> annotation in the same way as for <code>DataJpaTest</code>.
(See "<a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa">Auto-configured Data JPA Tests</a>".)</p>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-jooq" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-jooq"></a>8.3.19. 自动配置的 jOOQ 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-jooq"></a>8.3.19. Auto-configured jOOQ Tests</h4>
<div class="paragraph">
<p translation-result="on">你可以以与 <code>@JdbcTest</code> 类似的方式使用 <code>@JooqTest</code> ，但用于与 jOOQ 相关的测试。由于 jOOQ 严重依赖与数据库模式相对应的基于 Java 的模式，因此使用现有的 <code>DataSource</code> 。如果你想用内存数据库替换它，你可以使用 <code>@AutoConfigureTestDatabase</code> 覆盖这些设置。（有关在 Spring Boot 中使用 jOOQ 的更多信息，请参阅本章前面的“ <a href="data.html#data.sql.jooq">data.html</a> ”。）使用 <code>@JooqTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。</p>
<p translation-origin="off">You can use <code>@JooqTest</code> in a similar fashion as <code>@JdbcTest</code> but for jOOQ-related tests.
As jOOQ relies heavily on a Java-based schema that corresponds with the database schema, the existing <code>DataSource</code> is used.
If you want to replace it with an in-memory database, you can use <code>@AutoConfigureTestDatabase</code> to override those settings.
(For more about using jOOQ with Spring Boot, see "<a href="data.html#data.sql.jooq">data.html</a>", earlier in this chapter.)
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@JooqTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@JooqTest</code> 启用的自动配置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configurations that are enabled by <code>@JooqTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on"><code>@JooqTest</code> 配置一个 <code>DSLContext</code> 。以下示例显示了正在使用的 <code>@JooqTest</code> 注解：</p>
<p translation-origin="off"><code>@JooqTest</code> configures a <code>DSLContext</code>.
The following example shows the <code>@JooqTest</code> annotation in use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.jooq.DSLContext;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.jooq.JooqTest;

</span><span class="fold-block">@JooqTest
class MyJooqTests {

    @Autowired
    private DSLContext dslContext;

    // ...

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">JOOQ 测试是事务性的，默认情况下会在每个测试结束时回滚。如果这不是你想要的，你可以禁用测试或整个测试类的事务管理，<a href="features.html#features.testing.spring-boot-applications.autoconfigured-jdbc">如 JDBC 示例中所示</a>。</p>
<p translation-origin="off">JOOQ tests are transactional and roll back at the end of each test by default.
If that is not what you want, you can disable transaction management for a test or for the whole test class as <a href="features.html#features.testing.spring-boot-applications.autoconfigured-jdbc">shown in the JDBC example</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-spring-data-mongodb" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-mongodb"></a> 8.3.20. 自动配置数据 MongoDB 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-mongodb"></a>8.3.20. Auto-configured Data MongoDB Tests</h4>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@DataMongoTest</code> 来测试 MongoDB 应用程序。默认情况下，它配置一个内存嵌入式 MongoDB（如果可用），配置一个 <code>MongoTemplate</code> ，扫描 <code>@Document</code> 类，并配置 Spring Data MongoDB 存储库。使用 <code>@DataMongoTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。（有关在 Spring Boot 中使用 MongoDB 的更多信息，请参阅本章前面的“ <a href="data.html#data.nosql.mongodb">data.html</a> ”。）</p>
<p translation-origin="off">You can use <code>@DataMongoTest</code> to test MongoDB applications.
By default, it configures an in-memory embedded MongoDB (if available), configures a <code>MongoTemplate</code>, scans for <code>@Document</code> classes, and configures Spring Data MongoDB repositories.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@DataMongoTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.
(For more about using MongoDB with Spring Boot, see "<a href="data.html#data.nosql.mongodb">data.html</a>", earlier in this chapter.)</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到由 <code>@DataMongoTest</code> 启用的自动配置设置列表。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@DataMongoTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">以下类显示了正在使用的 <code>@DataMongoTest</code> 注释：</p>
<p translation-origin="off">The following class shows the <code>@DataMongoTest</code> annotation in use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.data.mongo.DataMongoTest;
import org.springframework.data.mongodb.core.MongoTemplate;

</span><span class="fold-block">@DataMongoTest
class MyDataMongoDbTests {

    @Autowired
    private MongoTemplate mongoTemplate;

    // ...

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">内存中嵌入式 MongoDB 通常适用于测试，因为它速度快且不需要任何开发人员安装。但是，如果你更喜欢针对真正的 MongoDB 服务器运行测试，则应排除嵌入式 MongoDB 自动配置，如以下示例所示：</p>
<p translation-origin="off">In-memory embedded MongoDB generally works well for tests, since it is fast and does not require any developer installation.
If, however, you prefer to run tests against a real MongoDB server, you should exclude the embedded MongoDB auto-configuration, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration;
import org.springframework.boot.test.autoconfigure.data.mongo.DataMongoTest;

</span><span class="fold-block">@DataMongoTest(excludeAutoConfiguration = EmbeddedMongoAutoConfiguration.class)
class MyDataMongoDbTests {

    // ...

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-spring-data-neo4j" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-neo4j"></a> 8.3.21. 自动配置的数据 Neo4j 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-neo4j"></a>8.3.21. Auto-configured Data Neo4j Tests</h4>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@DataNeo4jTest</code> 来测试 Neo4j 应用程序。默认情况下，它会扫描 <code>@Node</code> 类，并配置 Spring Data Neo4j 存储库。使用 <code>@DataNeo4jTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。（有关在 Spring Boot 中使用 Neo4J 的更多信息，请参阅本章前面的“ <a href="data.html#data.nosql.neo4j">data.html</a> ”。）</p>
<p translation-origin="off">You can use <code>@DataNeo4jTest</code> to test Neo4j applications.
By default, it scans for <code>@Node</code> classes, and configures Spring Data Neo4j repositories.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@DataNeo4jTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.
(For more about using Neo4J with Spring Boot, see "<a href="data.html#data.nosql.neo4j">data.html</a>", earlier in this chapter.)</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@DataNeo4jTest</code> 启用的自动配置设置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@DataNeo4jTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">以下示例显示了在 Spring Boot 中使用 Neo4J 测试的典型设置：</p>
<p translation-origin="off">The following example shows a typical setup for using Neo4J tests in Spring Boot:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.data.neo4j.DataNeo4jTest;

</span><span class="fold-block">@DataNeo4jTest
class MyDataNeo4jTests {

    @Autowired
    private SomeRepository repository;

    // ...

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">默认情况下，Data Neo4j 测试是事务性的，并在每次测试结束时回滚。有关更多详细信息，请参阅 Spring Framework 参考文档中的<a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testcontext-tx-enabling-transactions">相关部分</a>。如果这不是你想要的，你可以为测试或整个班级禁用事务管理，如下所示：</p>
<p translation-origin="off">By default, Data Neo4j tests are transactional and roll back at the end of each test.
See the <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/testing.html#testcontext-tx-enabling-transactions">relevant section</a> in the Spring Framework Reference Documentation for more details.
If that is not what you want, you can disable transaction management for a test or for the whole class, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.autoconfigure.data.neo4j.DataNeo4jTest;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

</span><span class="fold-block">@DataNeo4jTest
@Transactional(propagation = Propagation.NOT_SUPPORTED)
class MyDataNeo4jTests {

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">反应式访问不支持事务测试。如果你使用此样式，则必须如上所述配置 <code>@DataNeo4jTest</code> 测试。</p>
<p translation-origin="off">Transactional tests are not supported with reactive access.
If you are using this style, you must configure <code>@DataNeo4jTest</code> tests as described above.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-spring-data-redis" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-redis"></a> 8.3.22. 自动配置的数据 Redis 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-redis"></a>8.3.22. Auto-configured Data Redis Tests</h4>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@DataRedisTest</code> 来测试 Redis 应用程序。默认情况下，它会扫描 <code>@RedisHash</code> 类并配置 Spring Data Redis 存储库。使用 <code>@DataRedisTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。（有关在 Spring Boot 中使用 Redis 的更多信息，请参阅本章前面的“ <a href="data.html#data.nosql.redis">data.html</a> ”。）</p>
<p translation-origin="off">You can use <code>@DataRedisTest</code> to test Redis applications.
By default, it scans for <code>@RedisHash</code> classes and configures Spring Data Redis repositories.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@DataRedisTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.
(For more about using Redis with Spring Boot, see "<a href="data.html#data.nosql.redis">data.html</a>", earlier in this chapter.)</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到由 <code>@DataRedisTest</code> 启用的自动配置设置列表。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@DataRedisTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">以下示例显示了正在使用的 <code>@DataRedisTest</code> 注解：</p>
<p translation-origin="off">The following example shows the <code>@DataRedisTest</code> annotation in use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.data.redis.DataRedisTest;

</span><span class="fold-block">@DataRedisTest
class MyDataRedisTests {

    @Autowired
    private SomeRepository repository;

    // ...

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-spring-data-ldap" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-ldap"></a> 8.3.23. 自动配置的数据 LDAP 测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-ldap"></a>8.3.23. Auto-configured Data LDAP Tests</h4>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@DataLdapTest</code> 来测试 LDAP 应用程序。默认情况下，它配置内存中的嵌入式 LDAP（如果可用），配置 <code>LdapTemplate</code> ，扫描 <code>@Entry</code> 类，并配置 Spring Data LDAP 存储库。使用 <code>@DataLdapTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。（有关在 Spring Boot 中使用 LDAP 的更多信息，请参阅本章前面的“ <a href="data.html#data.nosql.ldap">data.html</a> ”。）</p>
<p translation-origin="off">You can use <code>@DataLdapTest</code> to test LDAP applications.
By default, it configures an in-memory embedded LDAP (if available), configures an <code>LdapTemplate</code>, scans for <code>@Entry</code> classes, and configures Spring Data LDAP repositories.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@DataLdapTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.
(For more about using LDAP with Spring Boot, see "<a href="data.html#data.nosql.ldap">data.html</a>", earlier in this chapter.)</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@DataLdapTest</code> 启用的自动配置设置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@DataLdapTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">以下示例显示了正在使用的 <code>@DataLdapTest</code> 注释：</p>
<p translation-origin="off">The following example shows the <code>@DataLdapTest</code> annotation in use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.data.ldap.DataLdapTest;
import org.springframework.ldap.core.LdapTemplate;

</span><span class="fold-block">@DataLdapTest
class MyDataLdapTests {

    @Autowired
    private LdapTemplate ldapTemplate;

    // ...

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">内存中嵌入式 LDAP 通常适用于测试，因为它速度快且不需要任何开发人员安装。但是，如果你更喜欢针对真实的 LDAP 服务器运行测试，则应排除嵌入式 LDAP 自动配置，如以下示例所示：</p>
<p translation-origin="off">In-memory embedded LDAP generally works well for tests, since it is fast and does not require any developer installation.
If, however, you prefer to run tests against a real LDAP server, you should exclude the embedded LDAP auto-configuration, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration;
import org.springframework.boot.test.autoconfigure.data.ldap.DataLdapTest;

</span><span class="fold-block">@DataLdapTest(excludeAutoConfiguration = EmbeddedLdapAutoConfiguration.class)
class MyDataLdapTests {

    // ...

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-rest-client" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-rest-client"></a> 8.3.24. 自动配置的 REST 客户端</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-rest-client"></a>8.3.24. Auto-configured REST Clients</h4>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@RestClientTest</code> 注释来测试 REST 客户端。默认情况下，它会自动配置 Jackson、GSON 和 Jsonb 支持，配置 <code>RestTemplateBuilder</code> 并添加对 <code>MockRestServiceServer</code> 的支持。使用 <code>@RestClientTest</code> 注释时，不会扫描常规 <code>@Component</code> 和 <code>@ConfigurationProperties</code> bean。<code>@EnableConfigurationProperties</code> 可用于包含 <code>@ConfigurationProperties</code> bean。</p>
<p translation-origin="off">You can use the <code>@RestClientTest</code> annotation to test REST clients.
By default, it auto-configures Jackson, GSON, and Jsonb support, configures a <code>RestTemplateBuilder</code>, and adds support for <code>MockRestServiceServer</code>.
Regular <code>@Component</code> and <code>@ConfigurationProperties</code> beans are not scanned when the <code>@RestClientTest</code> annotation is used.
<code>@EnableConfigurationProperties</code> can be used to include <code>@ConfigurationProperties</code> beans.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@RestClientTest</code> 启用的自动配置设置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@RestClientTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">应使用 <code>@RestClientTest</code> 的 <code>value</code> 或 <code>components</code> 属性指定要测试的特定 bean，如以下示例所示：</p>
<p translation-origin="off">The specific beans that you want to test should be specified by using the <code>value</code> or <code>components</code> attribute of <code>@RestClientTest</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.client.RestClientTest;
import org.springframework.http.MediaType;
import org.springframework.test.web.client.MockRestServiceServer;

import static org.assertj.core.api.Assertions.assertThat;
import static org.springframework.test.web.client.match.MockRestRequestMatchers.requestTo;
import static org.springframework.test.web.client.response.MockRestResponseCreators.withSuccess;

</span><span class="fold-block">@RestClientTest(RemoteVehicleDetailsService.class)
class MyRestClientTests {

    @Autowired
    private RemoteVehicleDetailsService service;

    @Autowired
    private MockRestServiceServer server;

    @Test
    void getVehicleDetailsWhenResultIsSuccessShouldReturnDetails() throws Exception {
        this.server.expect(requestTo("/greet/details")).andRespond(withSuccess("hello", MediaType.TEXT_PLAIN));
        String greeting = this.service.callRestService();
        assertThat(greeting).isEqualTo("hello");
    }

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-spring-restdocs" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs"></a> 8.3.25. 自动配置的 Spring REST 文档测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs"></a>8.3.25. Auto-configured Spring REST Docs Tests</h4>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@AutoConfigureRestDocs</code> 注释在你的测试中使用 Mock MVC、REST Assured 或 WebTestClient 使用 <a href="https://spring.io/projects/spring-restdocs">Spring REST 文档</a>。它消除了 Spring REST Docs 中对 JUnit 扩展的需求。</p>
<p translation-origin="off">You can use the <code>@AutoConfigureRestDocs</code> annotation to use <a href="https://spring.io/projects/spring-restdocs">Spring REST Docs</a> in your tests with Mock MVC, REST Assured, or WebTestClient.
It removes the need for the JUnit extension in Spring REST Docs.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>@AutoConfigureRestDocs</code> 可用于覆盖默认输出目录（如果你使用的是 Maven，则为 <code>target/generated-snippets</code> ；如果你使用的是 Gradle，则为 <code>build/generated-snippets</code> ）。它还可用于配置出现在任何记录的 URI 中的主机、方案和端口。</p>
<p translation-origin="off"><code>@AutoConfigureRestDocs</code> can be used to override the default output directory (<code>target/generated-snippets</code> if you are using Maven or <code>build/generated-snippets</code> if you are using Gradle).
It can also be used to configure the host, scheme, and port that appears in any documented URIs.</p>
</div>
<div class="sect4">
<h5 id="features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-mock-mvc" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-mock-mvc"></a>使用 Mock MVC 自动配置 Spring REST 文档测试</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-mock-mvc"></a>Auto-configured Spring REST Docs Tests with Mock MVC</h5>
<div class="paragraph">
<p translation-result="on"><code>@AutoConfigureRestDocs</code> 自定义 <code>MockMvc</code> bean 以在测试基于 servlet 的 Web 应用程序时使用 Spring REST Docs。你可以使用 <code>@Autowired</code> 注入它，并像使用 Mock MVC 和 Spring REST Docs 时一样在测试中使用它，如下例所示：</p>
<p translation-origin="off"><code>@AutoConfigureRestDocs</code> customizes the <code>MockMvc</code> bean to use Spring REST Docs when testing servlet-based web applications.
You can inject it by using <code>@Autowired</code> and use it in your tests as you normally would when using Mock MVC and Spring REST Docs, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.restdocs.AutoConfigureRestDocs;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.http.MediaType;
import org.springframework.test.web.servlet.MockMvc;

import static org.springframework.restdocs.mockmvc.MockMvcRestDocumentation.document;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

</span><span class="fold-block">@WebMvcTest(UserController.class)
@AutoConfigureRestDocs
class MyUserDocumentationTests {

    @Autowired
    private MockMvc mvc;

    @Test
    void listUsers() throws Exception {
        this.mvc.perform(get("/users").accept(MediaType.TEXT_PLAIN))
            .andExpect(status().isOk())
            .andDo(document("list-users"));
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果你需要对 Spring REST Docs 配置的控制比 <code>@AutoConfigureRestDocs</code> 的属性提供的更多控制，则可以使用 <code>RestDocsMockMvcConfigurationCustomizer</code> bean，如以下示例所示：</p>
<p translation-origin="off">If you require more control over Spring REST Docs configuration than offered by the attributes of <code>@AutoConfigureRestDocs</code>, you can use a <code>RestDocsMockMvcConfigurationCustomizer</code> bean, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.autoconfigure.restdocs.RestDocsMockMvcConfigurationCustomizer;
import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.restdocs.mockmvc.MockMvcRestDocumentationConfigurer;
import org.springframework.restdocs.templates.TemplateFormats;

</span><span class="fold-block">@TestConfiguration(proxyBeanMethods = false)
public class MyRestDocsConfiguration implements RestDocsMockMvcConfigurationCustomizer {

    @Override
    public void customize(MockMvcRestDocumentationConfigurer configurer) {
        configurer.snippets().withTemplateFormat(TemplateFormats.markdown());
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果你想利用 Spring REST Docs 对参数化输出目录的支持，你可以创建一个 <code>RestDocumentationResultHandler</code> bean。自动配置使用此结果处理程序调用 <code>alwaysDo</code> ，从而导致每个 <code>MockMvc</code> 调用自动生成默认片段。以下示例显示了正在定义的 <code>RestDocumentationResultHandler</code> ：</p>
<p translation-origin="off">If you want to make use of Spring REST Docs support for a parameterized output directory, you can create a <code>RestDocumentationResultHandler</code> bean.
The auto-configuration calls <code>alwaysDo</code> with this result handler, thereby causing each <code>MockMvc</code> call to automatically generate the default snippets.
The following example shows a <code>RestDocumentationResultHandler</code> being defined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.context.annotation.Bean;
import org.springframework.restdocs.mockmvc.MockMvcRestDocumentation;
import org.springframework.restdocs.mockmvc.RestDocumentationResultHandler;

</span><span class="fold-block">@TestConfiguration(proxyBeanMethods = false)
public class MyResultHandlerConfiguration {

    @Bean
    public RestDocumentationResultHandler restDocumentation() {
        return MockMvcRestDocumentation.document("{method-name}");
    }

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-web-test-client" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-web-test-client"></a>使用 WebTestClient 自动配置 Spring REST 文档测试</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-web-test-client"></a>Auto-configured Spring REST Docs Tests with WebTestClient</h5>
<div class="paragraph">
<p translation-result="on">在测试响应式 Web 应用程序时，<code>WebTestClient</code> <code>@AutoConfigureRestDocs</code> 使用。你可以使用 <code>@Autowired</code> 注入它，并像使用 <code>@WebFluxTest</code> 和 Spring REST Docs 时一样在测试中使用它，如下例所示：</p>
<p translation-origin="off"><code>@AutoConfigureRestDocs</code> can also be used with <code>WebTestClient</code> when testing reactive web applications.
You can inject it by using <code>@Autowired</code> and use it in your tests as you normally would when using <code>@WebFluxTest</code> and Spring REST Docs, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.restdocs.AutoConfigureRestDocs;
import org.springframework.boot.test.autoconfigure.web.reactive.WebFluxTest;
import org.springframework.test.web.reactive.server.WebTestClient;

import static org.springframework.restdocs.webtestclient.WebTestClientRestDocumentation.document;

</span><span class="fold-block">@WebFluxTest
@AutoConfigureRestDocs
class MyUsersDocumentationTests {

    @Autowired
    private WebTestClient webTestClient;

    @Test
    void listUsers() {
        this.webTestClient
            .get().uri("/")
        .exchange()
        .expectStatus()
            .isOk()
        .expectBody()
            .consumeWith(document("list-users"));
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果你需要对 Spring REST Docs 配置的控制比 <code>@AutoConfigureRestDocs</code> 的属性提供的更多控制，则可以使用 <code>RestDocsWebTestClientConfigurationCustomizer</code> bean，如以下示例所示：</p>
<p translation-origin="off">If you require more control over Spring REST Docs configuration than offered by the attributes of <code>@AutoConfigureRestDocs</code>, you can use a <code>RestDocsWebTestClientConfigurationCustomizer</code> bean, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.autoconfigure.restdocs.RestDocsWebTestClientConfigurationCustomizer;
import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.restdocs.webtestclient.WebTestClientRestDocumentationConfigurer;

</span><span class="fold-block">@TestConfiguration(proxyBeanMethods = false)
public class MyRestDocsConfiguration implements RestDocsWebTestClientConfigurationCustomizer {

    @Override
    public void customize(WebTestClientRestDocumentationConfigurer configurer) {
        configurer.snippets().withEncoding("UTF-8");
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果你想利用 Spring REST Docs 对参数化输出目录的支持，你可以使用 <code>WebTestClientBuilderCustomizer</code> 为每个实体交换结果配置使用者。以下示例显示了这样一个 <code>WebTestClientBuilderCustomizer</code> 被定义：</p>
<p translation-origin="off">If you want to make use of Spring REST Docs support for a parameterized output directory, you can use a <code>WebTestClientBuilderCustomizer</code> to configure a consumer for every entity exchange result.
The following example shows such a <code>WebTestClientBuilderCustomizer</code> being defined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.boot.test.web.reactive.server.WebTestClientBuilderCustomizer;
import org.springframework.context.annotation.Bean;

import static org.springframework.restdocs.webtestclient.WebTestClientRestDocumentation.document;

</span><span class="fold-block">@TestConfiguration(proxyBeanMethods = false)
public class MyWebTestClientBuilderCustomizerConfiguration {

    @Bean
    public WebTestClientBuilderCustomizer restDocumentation() {
        return (builder) -&gt; builder.entityExchangeResultConsumer(document("{method-name}"));
    }

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-rest-assured" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-rest-assured"></a>带有 REST Assured 的自动配置 Spring REST 文档测试</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-spring-restdocs.with-rest-assured"></a>Auto-configured Spring REST Docs Tests with REST Assured</h5>
<div class="paragraph">
<p translation-result="on"><code>@AutoConfigureRestDocs</code> 使 <code>RequestSpecification</code> bean，预配置为使用 Spring REST Docs，可用于你的测试。你可以使用 <code>@Autowired</code> 注入它，并像使用 REST Assured 和 Spring REST Docs 时一样在测试中使用它，如以下示例所示：</p>
<p translation-origin="off"><code>@AutoConfigureRestDocs</code> makes a <code>RequestSpecification</code> bean, preconfigured to use Spring REST Docs, available to your tests.
You can inject it by using <code>@Autowired</code> and use it in your tests as you normally would when using REST Assured and Spring REST Docs, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import io.restassured.specification.RequestSpecification;
import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.restdocs.AutoConfigureRestDocs;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.context.SpringBootTest.WebEnvironment;
import org.springframework.boot.web.server.LocalServerPort;

import static io.restassured.RestAssured.given;
import static org.hamcrest.Matchers.is;
import static org.springframework.restdocs.restassured3.RestAssuredRestDocumentation.document;

</span><span class="fold-block">@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
@AutoConfigureRestDocs
class MyUserDocumentationTests {

    @Test
    void listUsers(@Autowired RequestSpecification documentationSpec, @LocalServerPort int port) {
        given(documentationSpec)
            .filter(document("list-users"))
        .when()
            .port(port)
            .get("/")
        .then().assertThat()
            .statusCode(is(200));
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果你需要对 Spring REST Docs 配置的控制比 <code>@AutoConfigureRestDocs</code> 的属性提供的更多控制，则可以使用 <code>RestDocsRestAssuredConfigurationCustomizer</code> bean，如以下示例所示：</p>
<p translation-origin="off">If you require more control over Spring REST Docs configuration than offered by the attributes of <code>@AutoConfigureRestDocs</code>, a <code>RestDocsRestAssuredConfigurationCustomizer</code> bean can be used, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.autoconfigure.restdocs.RestDocsRestAssuredConfigurationCustomizer;
import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.restdocs.restassured3.RestAssuredRestDocumentationConfigurer;
import org.springframework.restdocs.templates.TemplateFormats;

</span><span class="fold-block">@TestConfiguration(proxyBeanMethods = false)
public class MyRestDocsConfiguration implements RestDocsRestAssuredConfigurationCustomizer {

    @Override
    public void customize(RestAssuredRestDocumentationConfigurer configurer) {
        configurer.snippets().withTemplateFormat(TemplateFormats.markdown());
    }

}
</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.autoconfigured-webservices" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices"></a> 8.3.26. 自动配置的 Spring Web 服务测试</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices"></a>8.3.26. Auto-configured Spring Web Services Tests</h4>
<div class="sect4">
<h5 id="features.testing.spring-boot-applications.autoconfigured-webservices.client" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices.client"></a>自动配置的 Spring Web 服务客户端测试</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices.client"></a>Auto-configured Spring Web Services Client Tests</h5>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@WebServiceClientTest</code> 来测试使用 Spring Web Services 项目调用 Web 服务的应用程序。默认情况下，它配置一个模拟 <code>WebServiceServer</code> bean 并自动自定义你的 <code>WebServiceTemplateBuilder</code> 。（有关在 Spring Boot 中使用 Web 服务的更多信息，请参阅本章前面的“ <a href="io.html#io.webservices">io.html</a> ”。）</p>
<p translation-origin="off">You can use <code>@WebServiceClientTest</code> to test applications that call web services using the Spring Web Services project.
By default, it configures a mock <code>WebServiceServer</code> bean and automatically customizes your <code>WebServiceTemplateBuilder</code>.
(For more about using Web Services with Spring Boot, see "<a href="io.html#io.webservices">io.html</a>", earlier in this chapter.)</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到由 <code>@WebServiceClientTest</code> 启用的自动配置设置列表。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@WebServiceClientTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">以下示例显示了正在使用的 <code>@WebServiceClientTest</code> 注解：</p>
<p translation-origin="off">The following example shows the <code>@WebServiceClientTest</code> annotation in use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.webservices.client.WebServiceClientTest;
import org.springframework.ws.test.client.MockWebServiceServer;
import org.springframework.xml.transform.StringSource;

import static org.assertj.core.api.Assertions.assertThat;
import static org.springframework.ws.test.client.RequestMatchers.payload;
import static org.springframework.ws.test.client.ResponseCreators.withPayload;

</span><span class="fold-block">@WebServiceClientTest(SomeWebService.class)
class MyWebServiceClientTests {

    @Autowired
    private MockWebServiceServer server;

    @Autowired
    private SomeWebService someWebService;

    @Test
    void mockServerCall() {
        this.server
            .expect(payload(new StringSource("&lt;request/&gt;")))
            .andRespond(withPayload(new StringSource("&lt;response&gt;&lt;status&gt;200&lt;/status&gt;&lt;/response&gt;")));
        assertThat(this.someWebService.test())
            .extracting(Response::getStatus)
            .isEqualTo(200);
    }

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="features.testing.spring-boot-applications.autoconfigured-webservices.server" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices.server"></a>自动配置的 Spring Web 服务服务器测试</h5>
<h5 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.autoconfigured-webservices.server"></a>Auto-configured Spring Web Services Server Tests</h5>
<div class="paragraph">
<p translation-result="on">你可以使用 <code>@WebServiceServerTest</code> 来测试使用 Spring Web Services 项目实现 Web 服务的应用程序。默认情况下，它配置了一个 <code>MockWebServiceClient</code> bean，可用于调用你的 Web 服务端点。（有关在 Spring Boot 中使用 Web 服务的更多信息，请参阅本章前面的“ <a href="io.html#io.webservices">io.html</a> ”。）</p>
<p translation-origin="off">You can use <code>@WebServiceServerTest</code> to test applications that implement web services using the Spring Web Services project.
By default, it configures a <code>MockWebServiceClient</code> bean that can be used to call your web service endpoints.
(For more about using Web Services with Spring Boot, see "<a href="io.html#io.webservices">io.html</a>", earlier in this chapter.)</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>@WebServiceServerTest</code> 启用的自动配置设置列表可以<a href="test-auto-configuration.html#test-auto-configuration">在附录</a>中找到。</p>
<p translation-origin="off">A list of the auto-configuration settings that are enabled by <code>@WebServiceServerTest</code> can be <a href="test-auto-configuration.html#test-auto-configuration">found in the appendix</a>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">以下示例显示了正在使用的 <code>@WebServiceServerTest</code> 注解：</p>
<p translation-origin="off">The following example shows the <code>@WebServiceServerTest</code> annotation in use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.webservices.server.WebServiceServerTest;
import org.springframework.ws.test.server.MockWebServiceClient;
import org.springframework.ws.test.server.RequestCreators;
import org.springframework.ws.test.server.ResponseMatchers;
import org.springframework.xml.transform.StringSource;

</span><span class="fold-block">@WebServiceServerTest(ExampleEndpoint.class)
class MyWebServiceServerTests {

    @Autowired
    private MockWebServiceClient client;

    @Test
    void mockServerCall() {
        this.client
            .sendRequest(RequestCreators.withPayload(new StringSource("&lt;ExampleRequest/&gt;")))
            .andExpect(ResponseMatchers.payload(new StringSource("&lt;ExampleResponse&gt;42&lt;/ExampleResponse&gt;")));
    }

}
</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.additional-autoconfiguration-and-slicing" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.additional-autoconfiguration-and-slicing"></a> 8.3.27. 额外的自动配置和切片</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.additional-autoconfiguration-and-slicing"></a>8.3.27. Additional Auto-configuration and Slicing</h4>
<div class="paragraph">
<p translation-result="on">每个切片提供一个或多个 <code>@AutoConfigure…​</code> ，即定义应作为切片一部分包含的自动配置。通过创建自定义 <code>@AutoConfigure…​</code> 或将 <code>@ImportAutoConfiguration</code> 添加到测试中，可以在逐个测试的基础上添加其他自动配置，如下例所示：</p>
<p translation-origin="off">Each slice provides one or more <code>@AutoConfigure…​</code> annotations that namely defines the auto-configurations that should be included as part of a slice.
Additional auto-configurations can be added on a test-by-test basis by creating a custom <code>@AutoConfigure…​</code> annotation or by adding <code>@ImportAutoConfiguration</code> to the test as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.autoconfigure.ImportAutoConfiguration;
import org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration;
import org.springframework.boot.test.autoconfigure.jdbc.JdbcTest;

</span><span class="fold-block">@JdbcTest
@ImportAutoConfiguration(IntegrationAutoConfiguration.class)
class MyJdbcTests {

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">确保不要使用常规的 <code>@Import</code> 注解来导入自动配置，因为它们是由 Spring Boot 以特定方式处理的。</p>
<p translation-origin="off">Make sure to not use the regular <code>@Import</code> annotation to import auto-configurations as they are handled in a specific way by Spring Boot.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">或者，可以通过在 <code>META-INF/spring.factories</code> 中注册它们来为切片注释的任何使用添加额外的自动配置，如下例所示：</p>
<p translation-origin="off">Alternatively, additional auto-configurations can be added for any use of a slice annotation by registering them in <code>META-INF/spring.factories</code> as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.springframework.boot.test.autoconfigure.jdbc.JdbcTest=com.example.IntegrationAutoConfiguration</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">只要使用 <code>@ImportAutoConfiguration</code> 进行元注释，就可以通过这种方式自定义切片或 <code>@AutoConfigure…​</code> 。</p>
<p translation-origin="off">A slice or <code>@AutoConfigure…​</code> annotation can be customized this way as long as it is meta-annotated with <code>@ImportAutoConfiguration</code>.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.user-configuration-and-slicing" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.user-configuration-and-slicing"></a> 8.3.28. 用户配置和切片</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.user-configuration-and-slicing"></a>8.3.28. User Configuration and Slicing</h4>
<div class="paragraph">
<p translation-result="on">如果你以合理的方式<a href="using.html#using.structuring-your-code">构建代码</a>，则<a href="features.html#features.testing.spring-boot-applications.detecting-configuration">默认使用</a><code>@SpringBootApplication</code> 类作为测试的配置。</p>
<p translation-origin="off">If you <a href="using.html#using.structuring-your-code">structure your code</a> in a sensible way, your <code>@SpringBootApplication</code> class is <a href="features.html#features.testing.spring-boot-applications.detecting-configuration">used by default</a> as the configuration of your tests.</p>
</div>
<div class="paragraph">
<p translation-result="on">然后，重要的是不要在应用程序的主类中乱扔特定于其功能特定区域的配置设置。</p>
<p translation-origin="off">It then becomes important not to litter the application’s main class with configuration settings that are specific to a particular area of its functionality.</p>
</div>
<div class="paragraph">
<p translation-result="on">假设你使用的是 Spring Batch，并且你依赖于它的自动配置。你可以按如下方式定义你的 <code>@SpringBootApplication</code> ：</p>
<p translation-origin="off">Assume that you are using Spring Batch and you rely on the auto-configuration for it.
You could define your <code>@SpringBootApplication</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;
import org.springframework.boot.autoconfigure.SpringBootApplication;

</span><span class="fold-block">@SpringBootApplication
@EnableBatchProcessing
public class MyApplication {

    // ...

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">因为这个类是测试的源配置，所以任何切片测试实际上都会尝试启动 Spring Batch，这绝对不是你想要做的。推荐的方法是将该区域特定的配置移动到与你的应用程序处于同一级别的单独 <code>@Configuration</code> 类，如以下示例所示：</p>
<p translation-origin="off">Because this class is the source configuration for the test, any slice test actually tries to start Spring Batch, which is definitely not what you want to do.
A recommended approach is to move that area-specific configuration to a separate <code>@Configuration</code> class at the same level as your application, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;
import org.springframework.context.annotation.Configuration;

</span><span class="fold-block">@Configuration(proxyBeanMethods = false)
@EnableBatchProcessing
public class MyBatchConfiguration {

    // ...

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">根据你的应用程序的复杂性，你可能有一个用于自定义的 <code>@Configuration</code> 类，或者每个域区域一个类。后一种方法允许你在其中一个测试中启用它，如有必要，使用 <code>@Import</code> 注释。</p>
<p translation-origin="off">Depending on the complexity of your application, you may either have a single <code>@Configuration</code> class for your customizations or one class per domain area.
The latter approach lets you enable it in one of your tests, if necessary, with the <code>@Import</code> annotation.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">测试切片从扫描中排除 <code>@Configuration</code> 类。例如，对于 <code>@WebMvcTest</code> ，以下配置不会在测试切片加载的应用程序上下文中包含给定的 <code>WebMvcConfigurer</code> bean：</p>
<p translation-origin="off">Test slices exclude <code>@Configuration</code> classes from scanning.
For example, for a <code>@WebMvcTest</code>, the following configuration will not include the given <code>WebMvcConfigurer</code> bean in the application context loaded by the test slice:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

</span><span class="fold-block">@Configuration(proxyBeanMethods = false)
public class MyWebConfiguration {

    @Bean
    public WebMvcConfigurer testConfigurer() {
        return new WebMvcConfigurer() {
            // ...
        };
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">但是，下面的配置将导致自定义 <code>WebMvcConfigurer</code> 被测试切片加载。</p>
<p translation-origin="off">The configuration below will, however, cause the custom <code>WebMvcConfigurer</code> to be loaded by the test slice.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.stereotype.Component;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

</span><span class="fold-block">@Component
public class MyWebMvcConfigurer implements WebMvcConfigurer {

    // ...

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">另一个混淆来源是类路径扫描。假设，当你以合理的方式构建代码时，你需要扫描一个额外的包。你的应用程序可能类似于以下代码：</p>
<p translation-origin="off">Another source of confusion is classpath scanning.
Assume that, while you structured your code in a sensible way, you need to scan an additional package.
Your application may resemble the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.ComponentScan;

</span><span class="fold-block">@SpringBootApplication
@ComponentScan({ "com.example.app", "com.example.another" })
public class MyApplication {

    // ...

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">这样做有效地覆盖了默认的组件扫描指令，其副作用是扫描这两个包，而不管你选择的切片是什么。例如，<code>@DataJpaTest</code> 似乎会突然扫描应用程序的组件和用户配置。同样，将自定义指令移动到单独的类是解决此问题的好方法。</p>
<p translation-origin="off">Doing so effectively overrides the default component scan directive with the side effect of scanning those two packages regardless of the slice that you chose.
For instance, a <code>@DataJpaTest</code> seems to suddenly scan components and user configurations of your application.
Again, moving the custom directive to a separate class is a good way to fix this issue.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果这不适合你，你可以在测试层次结构中的某处创建 <code>@SpringBootConfiguration</code> 以便使用它。或者，你可以为你的测试指定一个源，这将禁用查找默认源的行为。</p>
<p translation-origin="off">If this is not an option for you, you can create a <code>@SpringBootConfiguration</code> somewhere in the hierarchy of your test so that it is used instead.
Alternatively, you can specify a source for your test, which disables the behavior of finding a default one.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.spring-boot-applications.spock" translation-result="on"><a href="features.html#features.testing.spring-boot-applications.spock"></a>8.3.29. 使用 Spock 测试 Spring Boot 应用程序</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.spring-boot-applications.spock"></a>8.3.29. Using Spock to Test Spring Boot Applications</h4>
<div class="paragraph">
<p translation-result="on">Spock 2.x 可用于测试 Spring Boot 应用程序。为此，请将 Spock 的 <code>spock-spring</code> 模块的依赖项添加到应用程序的构建中。<code>spock-spring</code> 将 Spring 的测试框架集成到 Spock 中。有关详细信息，请参阅 <a href="https://spockframework.org/spock/docs/2.0/modules.html#_spring_module">Spock 的 Spring 模块的文档</a>。</p>
<p translation-origin="off">Spock 2.x can be used to test a Spring Boot application.
To do so, add a dependency on Spock’s <code>spock-spring</code> module to your application’s build.
<code>spock-spring</code> integrates Spring’s test framework into Spock.
See <a href="https://spockframework.org/spock/docs/2.0/modules.html#_spring_module">the documentation for Spock’s Spring module</a> for further details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.testing.utilities" translation-result="on"><a href="features.html#features.testing.utilities"></a>8.4. 测试工具</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.testing.utilities"></a>8.4. Test Utilities</h3>
<div class="paragraph">
<p translation-result="on">在测试应用程序时通常有用的一些测试实用程序类被打包为 <code>spring-boot</code> 的一部分。</p>
<p translation-origin="off">A few test utility classes that are generally useful when testing your application are packaged as part of <code>spring-boot</code>.</p>
</div>
<div class="sect3">
<h4 id="features.testing.utilities.config-data-application-context-initializer" translation-result="on"><a href="features.html#features.testing.utilities.config-data-application-context-initializer"></a> 8.4.1. ConfigDataApplicationContextInitializer</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.utilities.config-data-application-context-initializer"></a>8.4.1. ConfigDataApplicationContextInitializer</h4>
<div class="paragraph">
<p translation-result="on"><code>ConfigDataApplicationContextInitializer</code> 是一个 <code>ApplicationContextInitializer</code> ，你可以将其应用于测试以加载 Spring Boot <code>application.properties</code> 文件。当你不需要 <code>@SpringBootTest</code> 提供的全套功能时，可以使用它，如下例所示：</p>
<p translation-origin="off"><code>ConfigDataApplicationContextInitializer</code> is an <code>ApplicationContextInitializer</code> that you can apply to your tests to load Spring Boot <code>application.properties</code> files.
You can use it when you do not need the full set of features provided by <code>@SpringBootTest</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.test.context.ConfigDataApplicationContextInitializer;
import org.springframework.test.context.ContextConfiguration;

</span><span class="fold-block">@ContextConfiguration(classes = Config.class, initializers = ConfigDataApplicationContextInitializer.class)
class MyConfigFileTests {

    // ...

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">单独使用 <code>ConfigDataApplicationContextInitializer</code> 不支持 <code>@Value("${…​}")</code> 注入。它唯一的工作是确保将 <code>application.properties</code> 文件加载到 Spring 的 <code>Environment</code> 中。对于 <code>@Value</code> 支持，你需要另外配置一个 <code>PropertySourcesPlaceholderConfigurer</code> 或使用 <code>@SpringBootTest</code> ，它会为你自动配置一个。</p>
<p translation-origin="off">Using <code>ConfigDataApplicationContextInitializer</code> alone does not provide support for <code>@Value("${…​}")</code> injection.
Its only job is to ensure that <code>application.properties</code> files are loaded into Spring’s <code>Environment</code>.
For <code>@Value</code> support, you need to either additionally configure a <code>PropertySourcesPlaceholderConfigurer</code> or use <code>@SpringBootTest</code>, which auto-configures one for you.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.utilities.test-property-values" translation-result="on"><a href="features.html#features.testing.utilities.test-property-values"></a>8.4.2. 测试属性值</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.utilities.test-property-values"></a>8.4.2. TestPropertyValues</h4>
<div class="paragraph">
<p translation-result="on"><code>TestPropertyValues</code> 允许你快速将属性添加到 <code>ConfigurableEnvironment</code> 或 <code>ConfigurableApplicationContext</code> 。你可以使用 <code>key=value</code> 字符串调用它，如下所示：</p>
<p translation-origin="off"><code>TestPropertyValues</code> lets you quickly add properties to a <code>ConfigurableEnvironment</code> or <code>ConfigurableApplicationContext</code>.
You can call it with <code>key=value</code> strings, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.boot.test.util.TestPropertyValues;
import org.springframework.mock.env.MockEnvironment;

import static org.assertj.core.api.Assertions.assertThat;

</span><span class="fold-block">class MyEnvironmentTests {

    @Test
    void testPropertySources() {
        MockEnvironment environment = new MockEnvironment();
        TestPropertyValues.of("org=Spring", "name=Boot").applyTo(environment);
        assertThat(environment.getProperty("name")).isEqualTo("Boot");
    }

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.utilities.output-capture" translation-result="on"><a href="features.html#features.testing.utilities.output-capture"></a>8.4.3. 输出捕获</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.utilities.output-capture"></a>8.4.3. OutputCapture</h4>
<div class="paragraph">
<p translation-result="on"><code>OutputCapture</code> 是一个 JUnit <code>Extension</code> ，可用于捕获 <code>System.out</code> 和 <code>System.err</code> 输出。要使用添加 <code>@ExtendWith(OutputCaptureExtension.class)</code> 并将 <code>CapturedOutput</code> 作为参数注入测试类构造函数或测试方法，如下所示：</p>
<p translation-origin="off"><code>OutputCapture</code> is a JUnit <code>Extension</code> that you can use to capture <code>System.out</code> and <code>System.err</code> output.
To use add <code>@ExtendWith(OutputCaptureExtension.class)</code> and inject <code>CapturedOutput</code> as an argument to your test class constructor or test method as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;

import org.springframework.boot.test.system.CapturedOutput;
import org.springframework.boot.test.system.OutputCaptureExtension;

import static org.assertj.core.api.Assertions.assertThat;

</span><span class="fold-block">@ExtendWith(OutputCaptureExtension.class)
class MyOutputCaptureTests {

    @Test
    void testName(CapturedOutput output) {
        System.out.println("Hello World!");
        assertThat(output).contains("World");
    }

}
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.testing.utilities.test-rest-template" translation-result="on"><a href="features.html#features.testing.utilities.test-rest-template"></a>8.4.4. 测试休息模板</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.testing.utilities.test-rest-template"></a>8.4.4. TestRestTemplate</h4>
<div class="paragraph">
<p translation-result="on"><code>TestRestTemplate</code> 是 Spring 的 <code>RestTemplate</code> 的便捷替代品，在集成测试中很有用。你可以获得一个普通模板或发送基本 HTTP 身份验证（带有用户名和密码）的模板。在任何一种情况下，模板都是容错的。这意味着它以一种测试友好的方式运行，不会在 4xx 和 5xx 错误上抛出异常。相反，可以通过返回的 <code>ResponseEntity</code> 及其状态码来检测此类错误。</p>
<p translation-origin="off"><code>TestRestTemplate</code> is a convenience alternative to Spring’s <code>RestTemplate</code> that is useful in integration tests.
You can get a vanilla template or one that sends Basic HTTP authentication (with a username and password).
In either case, the template is fault tolerant.
This means that it behaves in a test-friendly way by not throwing exceptions on 4xx and 5xx errors.
Instead, such errors can be detected through the returned <code>ResponseEntity</code> and its status code.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">Spring Framework 5.0 提供了一个新的 <code>WebTestClient</code> ，它适用于 <a href="features.html#features.testing.spring-boot-applications.spring-webflux-tests">WebFlux 集成测试</a>以及 <a href="features.html#features.testing.spring-boot-applications.with-running-server">WebFlux 和 MVC 端到端测试</a>。与 <code>TestRestTemplate</code> 不同，它为断言提供了流畅的 API。</p>
<p translation-origin="off">Spring Framework 5.0 provides a new <code>WebTestClient</code> that works for <a href="features.html#features.testing.spring-boot-applications.spring-webflux-tests">WebFlux integration tests</a> and both <a href="features.html#features.testing.spring-boot-applications.with-running-server">WebFlux and MVC end-to-end testing</a>.
It provides a fluent API for assertions, unlike <code>TestRestTemplate</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">建议使用 Apache HTTP 客户端（版本 4.3.2 或更高版本），但不是强制性的。如果你的类路径中有它，<code>TestRestTemplate</code> 通过适当地配置客户端来响应。如果你确实使用 Apache 的 HTTP 客户端，则会启用一些额外的测试友好功能：</p>
<p translation-origin="off">It is recommended, but not mandatory, to use the Apache HTTP Client (version 4.3.2 or better).
If you have that on your classpath, the <code>TestRestTemplate</code> responds by configuring the client appropriately.
If you do use Apache’s HTTP client, some additional test-friendly features are enabled:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">不遵循重定向（因此你可以断言响应位置）。</p>
<p translation-origin="off">Redirects are not followed (so you can assert the response location).</p>
</li>
<li>
<p translation-result="on">Cookie 被忽略（因此模板是无状态的）。</p>
<p translation-origin="off">Cookies are ignored (so the template is stateless).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on"><code>TestRestTemplate</code> 可以在你的集成测试中直接实例化，如下例所示：</p>
<p translation-origin="off"><code>TestRestTemplate</code> can be instantiated directly in your integration tests, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.boot.test.web.client.TestRestTemplate;
import org.springframework.http.ResponseEntity;

import static org.assertj.core.api.Assertions.assertThat;

</span><span class="fold-block">class MyTests {

    private TestRestTemplate template = new TestRestTemplate();

    @Test
    void testRequest() throws Exception {
        ResponseEntity&lt;String&gt; headers = this.template.getForEntity("https://myhost.example.com/example", String.class);
        assertThat(headers.getHeaders().getLocation()).hasHost("other.example.com");
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">或者，如果你将 <code>@SpringBootTest</code> 注释与 <code>WebEnvironment.RANDOM_PORT</code> 或 <code>WebEnvironment.DEFINED_PORT</code> 使用，你可以注入一个完全配置的 <code>TestRestTemplate</code> 并开始使用它。如有必要，可以通过 <code>RestTemplateBuilder</code> bean 应用其他自定义。任何未指定主机和端口的 URL 都会自动连接到嵌入式服务器，如下例所示：</p>
<p translation-origin="off">Alternatively, if you use the <code>@SpringBootTest</code> annotation with <code>WebEnvironment.RANDOM_PORT</code> or <code>WebEnvironment.DEFINED_PORT</code>, you can inject a fully configured <code>TestRestTemplate</code> and start using it.
If necessary, additional customizations can be applied through the <code>RestTemplateBuilder</code> bean.
Any URLs that do not specify a host and port automatically connect to the embedded server, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.time.Duration;

import org.junit.jupiter.api.Test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.context.SpringBootTest.WebEnvironment;
import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.boot.test.web.client.TestRestTemplate;
import org.springframework.boot.web.client.RestTemplateBuilder;
import org.springframework.context.annotation.Bean;
import org.springframework.http.HttpHeaders;

import static org.assertj.core.api.Assertions.assertThat;

</span><span class="fold-block">@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
class MySpringBootTests {

    @Autowired
    private TestRestTemplate template;

    @Test
    void testRequest() {
        HttpHeaders headers = this.template.getForEntity("/example", String.class).getHeaders();
        assertThat(headers.getLocation()).hasHost("other.example.com");
    }

    @TestConfiguration(proxyBeanMethods = false)
    static class RestTemplateBuilderConfiguration {

        @Bean
        RestTemplateBuilder restTemplateBuilder() {
            return new RestTemplateBuilder().setConnectTimeout(Duration.ofSeconds(1))
                    .setReadTimeout(Duration.ofSeconds(1));
        }

    }

}
</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.developing-auto-configuration" translation-result="on"><a href="features.html#features.developing-auto-configuration"></a>9. 创建你自己的自动配置</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration"></a>9. Creating Your Own Auto-configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">如果你在一家开发共享库的公司工作，或者如果你在开源或商业库中工作，你可能想要开发自己的自动配置。自动配置类可以捆绑在外部 jar 中，并且仍然可以被 Spring Boot 拾取。</p>
<p translation-origin="off">If you work in a company that develops shared libraries, or if you work on an open-source or commercial library, you might want to develop your own auto-configuration.
Auto-configuration classes can be bundled in external jars and still be picked-up by Spring Boot.</p>
</div>
<div class="paragraph">
<p translation-result="on">自动配置可以与提供自动配置代码以及你将使用的典型库的“启动器”相关联。我们首先介绍了构建你自己的自动配置所需了解的内容，然后我们继续介绍<a href="features.html#features.developing-auto-configuration.custom-starter">创建自定义启动器所需的典型步骤</a>。</p>
<p translation-origin="off">Auto-configuration can be associated to a “starter” that provides the auto-configuration code as well as the typical libraries that you would use with it.
We first cover what you need to know to build your own auto-configuration and then we move on to the <a href="features.html#features.developing-auto-configuration.custom-starter">typical steps required to create a custom starter</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">一个<a href="https://github.com/snicoll-demos/spring-boot-master-auto-configuration">演示项目</a>可用于展示如何逐步创建启动器。</p>
<p translation-origin="off">A <a href="https://github.com/snicoll-demos/spring-boot-master-auto-configuration">demo project</a> is available to showcase how you can create a starter step-by-step.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="features.developing-auto-configuration.understanding-auto-configured-beans" translation-result="on"><a href="features.html#features.developing-auto-configuration.understanding-auto-configured-beans"></a> 9.1. 了解自动配置的 Bean</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.understanding-auto-configured-beans"></a>9.1. Understanding Auto-configured Beans</h3>
<div class="paragraph">
<p translation-result="on">在幕后，自动配置是使用标准的 <code>@Configuration</code> 类实现的。附加的 <code>@Conditional</code> 注释用于限制何时应用自动配置。通常，自动配置类使用 <code>@ConditionalOnClass</code> 和 <code>@ConditionalOnMissingBean</code> 注解。这确保了自动配置仅在找到相关类并且你没有声明自己的 <code>@Configuration</code> 时适用。</p>
<p translation-origin="off">Under the hood, auto-configuration is implemented with standard <code>@Configuration</code> classes.
Additional <code>@Conditional</code> annotations are used to constrain when the auto-configuration should apply.
Usually, auto-configuration classes use <code>@ConditionalOnClass</code> and <code>@ConditionalOnMissingBean</code> annotations.
This ensures that auto-configuration applies only when relevant classes are found and when you have not declared your own <code>@Configuration</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">你可以浏览<a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure"><code>spring-boot-autoconfigure</code></a>的源代码以查看 Spring 提供的 <code>@Configuration</code> 类（请参阅<a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring.factories"><code>META-INF/spring.factories</code></a>文件）。</p>
<p translation-origin="off">You can browse the source code of <a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure"><code>spring-boot-autoconfigure</code></a> to see the <code>@Configuration</code> classes that Spring provides (see the <a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring.factories"><code>META-INF/spring.factories</code></a> file).</p>
</div>
</div>
<div class="sect2">
<h3 id="features.developing-auto-configuration.locating-auto-configuration-candidates" translation-result="on"><a href="features.html#features.developing-auto-configuration.locating-auto-configuration-candidates"></a> 9.2.定位自动配置候选</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.locating-auto-configuration-candidates"></a>9.2. Locating Auto-configuration Candidates</h3>
<div class="paragraph">
<p translation-result="on">Spring Boot 检查你发布的 jar 中是否存在 <code>META-INF/spring.factories</code> 文件。该文件应在 <code>EnableAutoConfiguration</code> 键下列出你的配置类，如以下示例所示：</p>
<p translation-origin="off">Spring Boot checks for the presence of a <code>META-INF/spring.factories</code> file within your published jar.
The file should list your configuration classes under the <code>EnableAutoConfiguration</code> key, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.mycorp.libx.autoconfigure.LibXAutoConfiguration,\
com.mycorp.libx.autoconfigure.LibXWebAutoConfiguration</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">自动配置<em>只能</em>以这种方式加载。确保它们是在特定的包空间中定义的，并且它们永远不是组件扫描的目标。此外，自动配置类不应启用组件扫描以查找其他组件。应改为使用特定的 <code>@Import</code> 。</p>
<p translation-origin="off">Auto-configurations must be loaded that way <em>only</em>.
Make sure that they are defined in a specific package space and that they are never the target of component scanning.
Furthermore, auto-configuration classes should not enable component scanning to find additional components.
Specific <code>@Import</code>s should be used instead.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">如果你的配置需要按特定顺序应用，你可以使用<a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/AutoConfigureAfter.java"><code>@AutoConfigureAfter</code></a>或<a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/AutoConfigureBefore.java"><code>@AutoConfigureBefore</code></a>注释。例如，如果你提供特定于 Web 的配置，则可能需要在 <code>WebMvcAutoConfiguration</code> 之后应用你的类。</p>
<p translation-origin="off">You can use the <a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/AutoConfigureAfter.java"><code>@AutoConfigureAfter</code></a> or <a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/AutoConfigureBefore.java"><code>@AutoConfigureBefore</code></a> annotations if your configuration needs to be applied in a specific order.
For example, if you provide web-specific configuration, your class may need to be applied after <code>WebMvcAutoConfiguration</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你想订购某些彼此不应该有任何直接了解的自动配置，你也可以使用 <code>@AutoConfigureOrder</code> 。该注释与常规 <code>@Order</code> 注释具有相同的语义，但为自动配置类提供了专用顺序。</p>
<p translation-origin="off">If you want to order certain auto-configurations that should not have any direct knowledge of each other, you can also use <code>@AutoConfigureOrder</code>.
That annotation has the same semantic as the regular <code>@Order</code> annotation but provides a dedicated order for auto-configuration classes.</p>
</div>
<div class="paragraph">
<p translation-result="on">与标准 <code>@Configuration</code> 类一样，应用自动配置类的顺序只影响定义它们的 bean 的顺序。随后创建这些 bean 的顺序不受影响，由每个 bean 的依赖关系和任何 <code>@DependsOn</code> 关系确定。</p>
<p translation-origin="off">As with standard <code>@Configuration</code> classes, the order in which auto-configuration classes are applied only affects the order in which their beans are defined.
The order in which those beans are subsequently created is unaffected and is determined by each bean’s dependencies and any <code>@DependsOn</code> relationships.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.developing-auto-configuration.condition-annotations" translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations"></a>9.3. 条件注释</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.condition-annotations"></a>9.3. Condition Annotations</h3>
<div class="paragraph">
<p translation-result="on">你几乎总是希望在你的自动配置类中包含一个或多个 <code>@Conditional</code> 注释。<code>@ConditionalOnMissingBean</code> 注解是一个常见的例子，如果开发人员对你的默认设置不满意，它可以让他们覆盖自动配置。</p>
<p translation-origin="off">You almost always want to include one or more <code>@Conditional</code> annotations on your auto-configuration class.
The <code>@ConditionalOnMissingBean</code> annotation is one common example that is used to allow developers to override auto-configuration if they are not happy with your defaults.</p>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 包含许多 <code>@Conditional</code> 注释，你可以通过注释 <code>@Configuration</code> 类或单个 <code>@Bean</code> 方法在自己的代码中重用它们。这些注释包括：</p>
<p translation-origin="off">Spring Boot includes a number of <code>@Conditional</code> annotations that you can reuse in your own code by annotating <code>@Configuration</code> classes or individual <code>@Bean</code> methods.
These annotations include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.class-conditions">班级条件</a></p>
<p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.class-conditions">Class Conditions</a></p>
</li>
<li>
<p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.bean-conditions">豆条件</a></p>
<p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.bean-conditions">Bean Conditions</a></p>
</li>
<li>
<p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.property-conditions">物业条件</a></p>
<p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.property-conditions">Property Conditions</a></p>
</li>
<li>
<p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.resource-conditions">资源条件</a></p>
<p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.resource-conditions">Resource Conditions</a></p>
</li>
<li>
<p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.web-application-conditions">网络申请条件</a></p>
<p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.web-application-conditions">Web Application Conditions</a></p>
</li>
<li>
<p translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.spel-conditions">SpEL 表达条件</a></p>
<p translation-origin="off"><a href="features.html#features.developing-auto-configuration.condition-annotations.spel-conditions">SpEL Expression Conditions</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.condition-annotations.class-conditions" translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.class-conditions"></a> 9.3.1. 班级条件</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.condition-annotations.class-conditions"></a>9.3.1. Class Conditions</h4>
<div class="paragraph">
<p translation-result="on"><code>@ConditionalOnClass</code> 和 <code>@ConditionalOnMissingClass</code> 注释让 <code>@Configuration</code> 类根据特定类的存在或不存在而包含在内。由于注释元数据是使用 <a href="https://asm.ow2.io/">ASM</a> 解析的，因此你可以使用 <code>value</code> 属性来引用真实的类，即使该类实际上可能不会出现在正在运行的应用程序类路径中。如果你更喜欢使用 <code>String</code> 值指定类名，也可以使用 <code>name</code> 属性。</p>
<p translation-origin="off">The <code>@ConditionalOnClass</code> and <code>@ConditionalOnMissingClass</code> annotations let <code>@Configuration</code> classes be included based on the presence or absence of specific classes.
Due to the fact that annotation metadata is parsed by using <a href="https://asm.ow2.io/">ASM</a>, you can use the <code>value</code> attribute to refer to the real class, even though that class might not actually appear on the running application classpath.
You can also use the <code>name</code> attribute if you prefer to specify the class name by using a <code>String</code> value.</p>
</div>
<div class="paragraph">
<p translation-result="on">此机制不适用于 <code>@Bean</code> 方法，其中通常返回类型是条件的目标：在方法上的条件适用之前，JVM 将加载类和可能处理的方法引用，如果该类将失败不存在。</p>
<p translation-origin="off">This mechanism does not apply the same way to <code>@Bean</code> methods where typically the return type is the target of the condition: before the condition on the method applies, the JVM will have loaded the class and potentially processed method references which will fail if the class is not present.</p>
</div>
<div class="paragraph">
<p translation-result="on">为了处理这种情况，可以使用单独的 <code>@Configuration</code> 类来隔离条件，如下例所示：</p>
<p translation-origin="off">To handle this scenario, a separate <code>@Configuration</code> class can be used to isolate the condition, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

</span><span class="fold-block">@Configuration(proxyBeanMethods = false)
// Some conditions ...
public class MyAutoConfiguration {

    // Auto-configured beans ...

    @Configuration(proxyBeanMethods = false)
    @ConditionalOnClass(SomeService.class)
    public static class SomeServiceConfiguration {

        @Bean
        @ConditionalOnMissingBean
        public SomeService someService() {
            return new SomeService();
        }

    }

}
</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果你使用 <code>@ConditionalOnClass</code> 或 <code>@ConditionalOnMissingClass</code> 作为元注释的一部分来组成你自己的组合注释，则必须使用 <code>name</code> 来引用类，在这种情况下不处理。</p>
<p translation-origin="off">If you use <code>@ConditionalOnClass</code> or <code>@ConditionalOnMissingClass</code> as a part of a meta-annotation to compose your own composed annotations, you must use <code>name</code> as referring to the class in such a case is not handled.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.condition-annotations.bean-conditions" translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.bean-conditions"></a> 9.3.2.豆条件</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.condition-annotations.bean-conditions"></a>9.3.2. Bean Conditions</h4>
<div class="paragraph">
<p translation-result="on"><code>@ConditionalOnBean</code> 和 <code>@ConditionalOnMissingBean</code> 注释允许根据特定 bean 的存在或不存在来包含 bean。你可以使用 <code>value</code> 属性按类型指定 beans，也可以使用 <code>name</code> 按名称指定 beans。<code>search</code> 属性允许你限制在搜索 bean 时应考虑的 <code>ApplicationContext</code> 层次结构。</p>
<p translation-origin="off">The <code>@ConditionalOnBean</code> and <code>@ConditionalOnMissingBean</code> annotations let a bean be included based on the presence or absence of specific beans.
You can use the <code>value</code> attribute to specify beans by type or <code>name</code> to specify beans by name.
The <code>search</code> attribute lets you limit the <code>ApplicationContext</code> hierarchy that should be considered when searching for beans.</p>
</div>
<div class="paragraph">
<p translation-result="on">当放置在 <code>@Bean</code> 方法上时，目标类型默认为方法的返回类型，如下例所示：</p>
<p translation-origin="off">When placed on a <code>@Bean</code> method, the target type defaults to the return type of the method, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

</span><span class="fold-block">@Configuration(proxyBeanMethods = false)
public class MyAutoConfiguration {

    @Bean
    @ConditionalOnMissingBean
    public SomeService someService() {
        return new SomeService();
    }

}
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">在前面的示例中，如果 <code>ApplicationContext</code> 中没有 <code>SomeService</code> 类型的 bean，则将创建 <code>someService</code> bean。</p>
<p translation-origin="off">In the preceding example, the <code>someService</code> bean is going to be created if no bean of type <code>SomeService</code> is already contained in the <code>ApplicationContext</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">你需要非常小心添加 bean 定义的顺序，因为这些条件是根据到目前为止已处理的内容进行评估的。出于这个原因，我们建议在自动配置类上仅使用 <code>@ConditionalOnBean</code> 和 <code>@ConditionalOnMissingBean</code> 注释（因为它们保证在添加任何用户定义的 bean 定义后加载）。</p>
<p translation-origin="off">You need to be very careful about the order in which bean definitions are added, as these conditions are evaluated based on what has been processed so far.
For this reason, we recommend using only <code>@ConditionalOnBean</code> and <code>@ConditionalOnMissingBean</code> annotations on auto-configuration classes (since these are guaranteed to load after any user-defined bean definitions have been added).</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on"><code>@ConditionalOnBean</code> 和 <code>@ConditionalOnMissingBean</code> 不会阻止创建 <code>@Configuration</code> 类。在类级别使用这些条件和使用注解标记每个包含的 <code>@Bean</code> 方法之间的唯一区别是，如果条件不匹配，前者会阻止将 <code>@Configuration</code> 类注册为 bean。</p>
<p translation-origin="off"><code>@ConditionalOnBean</code> and <code>@ConditionalOnMissingBean</code> do not prevent <code>@Configuration</code> classes from being created.
The only difference between using these conditions at the class level and marking each contained <code>@Bean</code> method with the annotation is that the former prevents registration of the <code>@Configuration</code> class as a bean if the condition does not match.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">声明 <code>@Bean</code> 方法时，在方法的返回类型中提供尽可能多的类型信息。例如，如果你的 bean 的具体类实现了一个接口，那么 bean 方法的返回类型应该是具体类而不是接口。在使用 bean 条件时，在 <code>@Bean</code> 方法中提供尽可能多的类型信息尤其重要，因为它们的评估只能依赖于方法签名中可用的类型信息。</p>
<p translation-origin="off">When declaring a <code>@Bean</code> method, provide as much type information as possible in the method’s return type.
For example, if your bean’s concrete class implements an interface the bean method’s return type should be the concrete class and not the interface.
Providing as much type information as possible in <code>@Bean</code> methods is particularly important when using bean conditions as their evaluation can only rely upon to type information that is available in the method signature.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.condition-annotations.property-conditions" translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.property-conditions"></a> 9.3.3.物业条件</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.condition-annotations.property-conditions"></a>9.3.3. Property Conditions</h4>
<div class="paragraph">
<p translation-result="on"><code>@ConditionalOnProperty</code> 注释允许基于 Spring Environment 属性包含配置。使用 <code>prefix</code> 和 <code>name</code> 属性来指定应该检查的属性。默认情况下，匹配任何存在且不等于 <code>false</code> 的属性。你还可以使用 <code>havingValue</code> 和 <code>matchIfMissing</code> 属性创建更高级的检查。</p>
<p translation-origin="off">The <code>@ConditionalOnProperty</code> annotation lets configuration be included based on a Spring Environment property.
Use the <code>prefix</code> and <code>name</code> attributes to specify the property that should be checked.
By default, any property that exists and is not equal to <code>false</code> is matched.
You can also create more advanced checks by using the <code>havingValue</code> and <code>matchIfMissing</code> attributes.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.condition-annotations.resource-conditions" translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.resource-conditions"></a> 9.3.4. 资源条件</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.condition-annotations.resource-conditions"></a>9.3.4. Resource Conditions</h4>
<div class="paragraph">
<p translation-result="on"><code>@ConditionalOnResource</code> 注释允许仅在存在特定资源时才包含配置。可以使用通常的 Spring 约定来指定资源，如以下示例所示： <code>file:/home/user/test.dat</code> 。</p>
<p translation-origin="off">The <code>@ConditionalOnResource</code> annotation lets configuration be included only when a specific resource is present.
Resources can be specified by using the usual Spring conventions, as shown in the following example: <code>file:/home/user/test.dat</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.condition-annotations.web-application-conditions" translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.web-application-conditions"></a> 9.3.5. 网络申请条件</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.condition-annotations.web-application-conditions"></a>9.3.5. Web Application Conditions</h4>
<div class="paragraph">
<p translation-result="on"><code>@ConditionalOnWebApplication</code> 和 <code>@ConditionalOnNotWebApplication</code> 注释允许根据应用程序是否为“Web 应用程序”来包含配置。基于 servlet 的 Web 应用程序是使用 Spring <code>WebApplicationContext</code> 、定义 <code>session</code> 范围或具有 <code>ConfigurableWebEnvironment</code> 的任何应用程序。反应式 Web 应用程序是使用 <code>ReactiveWebApplicationContext</code> 或具有 <code>ConfigurableReactiveWebEnvironment</code> 的任何应用程序。</p>
<p translation-origin="off">The <code>@ConditionalOnWebApplication</code> and <code>@ConditionalOnNotWebApplication</code> annotations let configuration be included depending on whether the application is a “web application”.
A servlet-based web application is any application that uses a Spring <code>WebApplicationContext</code>, defines a <code>session</code> scope, or has a <code>ConfigurableWebEnvironment</code>.
A reactive web application is any application that uses a <code>ReactiveWebApplicationContext</code>, or has a <code>ConfigurableReactiveWebEnvironment</code>.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>@ConditionalOnWarDeployment</code> 注释允许根据应用程序是否是部署到容器的传统 WAR 应用程序来包含配置。对于使用嵌入式服务器运行的应用程序，此条件将不匹配。</p>
<p translation-origin="off">The <code>@ConditionalOnWarDeployment</code> annotation lets configuration be included depending on whether the application is a traditional WAR application that is deployed to a container.
This condition will not match for applications that are run with an embedded server.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.condition-annotations.spel-conditions" translation-result="on"><a href="features.html#features.developing-auto-configuration.condition-annotations.spel-conditions"></a> 9.3.6.  SpEL 表达条件</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.condition-annotations.spel-conditions"></a>9.3.6. SpEL Expression Conditions</h4>
<div class="paragraph">
<p translation-result="on"><code>@ConditionalOnExpression</code> 注释允许基于 <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/core.html#expressions">SpEL 表达式</a>的结果包含配置。</p>
<p translation-origin="off">The <code>@ConditionalOnExpression</code> annotation lets configuration be included based on the result of a <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/core.html#expressions">SpEL expression</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.developing-auto-configuration.testing" translation-result="on"><a href="features.html#features.developing-auto-configuration.testing"></a>9.4. 测试你的自动配置</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.testing"></a>9.4. Testing your Auto-configuration</h3>
<div class="paragraph">
<p translation-result="on">自动配置会受到许多因素的影响：用户配置（ <code>@Bean</code> 定义和 <code>Environment</code> 自定义）、条件评估（特定库的存在）等。具体来说，每个测试都应该创建一个定义良好的 <code>ApplicationContext</code> 来表示这些定制的组合。<code>ApplicationContextRunner</code> 提供了一个很好的方法来实现这一点。</p>
<p translation-origin="off">An auto-configuration can be affected by many factors: user configuration (<code>@Bean</code> definition and <code>Environment</code> customization), condition evaluation (presence of a particular library), and others.
Concretely, each test should create a well defined <code>ApplicationContext</code> that represents a combination of those customizations.
<code>ApplicationContextRunner</code> provides a great way to achieve that.</p>
</div>
<div class="paragraph">
<p translation-result="on"><code>ApplicationContextRunner</code> 通常被定义为测试类的一个字段，用于收集基本的通用配置。以下示例确保始终调用 <code>MyServiceAutoConfiguration</code> ：</p>
<p translation-origin="off"><code>ApplicationContextRunner</code> is usually defined as a field of the test class to gather the base, common configuration.
The following example makes sure that <code>MyServiceAutoConfiguration</code> is always invoked:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private final ApplicationContextRunner contextRunner = new ApplicationContextRunner()
        .withConfiguration(AutoConfigurations.of(MyServiceAutoConfiguration.class));
</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果必须定义多个自动配置，则无需对它们的声明进行排序，因为它们的调用顺序与运行应用程序时完全相同。</p>
<p translation-origin="off">If multiple auto-configurations have to be defined, there is no need to order their declarations as they are invoked in the exact same order as when running the application.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">每个测试都可以使用运行器来表示特定的用例。例如，下面的示例调用用户配置 ( <code>UserConfiguration</code> ) 并检查自动配置是否正确退出。调用 <code>run</code> 提供了一个可以与 <code>AssertJ</code> 一起使用的回调上下文。</p>
<p translation-origin="off">Each test can use the runner to represent a particular use case.
For instance, the sample below invokes a user configuration (<code>UserConfiguration</code>) and checks that the auto-configuration backs off properly.
Invoking <code>run</code> provides a callback context that can be used with <code>AssertJ</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Test
void defaultServiceBacksOff() {
    this.contextRunner.withUserConfiguration(UserConfiguration.class).run((context) -&gt; {
        assertThat(context).hasSingleBean(MyService.class);
        assertThat(context).getBean("myCustomService").isSameAs(context.getBean(MyService.class));
    });
}

@Configuration(proxyBeanMethods = false)
static class UserConfiguration {

    @Bean
    MyService myCustomService() {
        return new MyService("mine");
    }

}
</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">也可以轻松自定义 <code>Environment</code> ，如下例所示：</p>
<p translation-origin="off">It is also possible to easily customize the <code>Environment</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Test
void serviceNameCanBeConfigured() {
    this.contextRunner.withPropertyValues("user.name=test123").run((context) -&gt; {
        assertThat(context).hasSingleBean(MyService.class);
        assertThat(context.getBean(MyService.class).getName()).isEqualTo("test123");
    });
}
</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">跑步者也可用于显示 <code>ConditionEvaluationReport</code> 。报告可以在 <code>INFO</code> 或 <code>DEBUG</code> 级别打印。以下示例显示如何使用 <code>ConditionEvaluationReportLoggingListener</code> 在自动配置测试中打印报告。</p>
<p translation-origin="off">The runner can also be used to display the <code>ConditionEvaluationReport</code>.
The report can be printed at <code>INFO</code> or <code>DEBUG</code> level.
The following example shows how to use the <code>ConditionEvaluationReportLoggingListener</code> to print the report in auto-configuration tests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import org.junit.jupiter.api.Test;

import org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener;
import org.springframework.boot.logging.LogLevel;
import org.springframework.boot.test.context.runner.ApplicationContextRunner;

</span><span class="fold-block">class MyConditionEvaluationReportingTests {

    @Test
    void autoConfigTest() {
        new ApplicationContextRunner()
            .withInitializer(new ConditionEvaluationReportLoggingListener(LogLevel.INFO))
            .run((context) -&gt; {
                    // Test something...
            });
    }

}
</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.testing.simulating-a-web-context" translation-result="on"><a href="features.html#features.developing-auto-configuration.testing.simulating-a-web-context"></a>9.4.1. 模拟 Web 上下文</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.testing.simulating-a-web-context"></a>9.4.1. Simulating a Web Context</h4>
<div class="paragraph">
<p translation-result="on">如果你需要测试仅在 servlet 或响应式 Web 应用程序上下文中运行的自动配置，请分别使用 <code>WebApplicationContextRunner</code> 或 <code>ReactiveWebApplicationContextRunner</code> 。</p>
<p translation-origin="off">If you need to test an auto-configuration that only operates in a servlet or reactive web application context, use the <code>WebApplicationContextRunner</code> or <code>ReactiveWebApplicationContextRunner</code> respectively.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.testing.overriding-classpath" translation-result="on"><a href="features.html#features.developing-auto-configuration.testing.overriding-classpath"></a> 9.4.2.覆盖类路径</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.testing.overriding-classpath"></a>9.4.2. Overriding the Classpath</h4>
<div class="paragraph">
<p translation-result="on">还可以测试在运行时不存在特定类和/或包时会发生什么。Spring Boot 附带了一个 <code>FilteredClassLoader</code> ，运行者可以轻松使用它。在以下示例中，我们断言如果 <code>MyService</code> 不存在，则自动配置被正确禁用：</p>
<p translation-origin="off">It is also possible to test what happens when a particular class and/or package is not present at runtime.
Spring Boot ships with a <code>FilteredClassLoader</code> that can easily be used by the runner.
In the following example, we assert that if <code>MyService</code> is not present, the auto-configuration is properly disabled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Test
void serviceIsIgnoredIfLibraryIsNotPresent() {
    this.contextRunner.withClassLoader(new FilteredClassLoader(MyService.class))
            .run((context) -&gt; assertThat(context).doesNotHaveBean("myService"));
}
</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.developing-auto-configuration.custom-starter" translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter"></a>9.5. 创建自己的启动器</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.custom-starter"></a>9.5. Creating Your Own Starter</h3>
<div class="paragraph">
<p translation-result="on">一个典型的 Spring Boot 启动器包含自动配置和自定义给定技术的基础设施的代码，我们称之为“acme”。为了使其易于扩展，可以将专用命名空间中的许多配置键暴露给环境。最后，提供了一个“starter”依赖项来帮助用户尽可能轻松地开始。</p>
<p translation-origin="off">A typical Spring Boot starter contains code to auto-configure and customize the infrastructure of a given technology, let’s call that "acme".
To make it easily extensible, a number of configuration keys in a dedicated namespace can be exposed to the environment.
Finally, a single "starter" dependency is provided to help users get started as easily as possible.</p>
</div>
<div class="paragraph">
<p translation-result="on">具体来说，自定义启动器可以包含以下内容：</p>
<p translation-origin="off">Concretely, a custom starter can contain the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">包含“acme”的自动配置代码的自动 <code>autoconfigure</code> 模块。</p>
<p translation-origin="off">The <code>autoconfigure</code> module that contains the auto-configuration code for "acme".</p>
</li>
<li>
<p translation-result="on">提供对 <code>autoconfigure</code> 模块以及“acme”和任何其他通常有用的依赖项的依赖关系的 <code>starter</code> 模块。简而言之，添加启动器应该提供开始使用该库所需的一切。</p>
<p translation-origin="off">The <code>starter</code> module that provides a dependency to the <code>autoconfigure</code> module as well as "acme" and any additional dependencies that are typically useful.
In a nutshell, adding the starter should provide everything needed to start using that library.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">两个模块中的这种分离绝不是必要的。如果“acme”有多种风格、选项或可选功能，那么最好将自动配置分开，因为你可以清楚地表达某些功能是可选的事实。此外，你还可以制作一个启动器来提供有关这些可选依赖项的意见。同时，其他人只能依靠 <code>autoconfigure</code> 模块，制作自己的不同意见的启动器。</p>
<p translation-origin="off">This separation in two modules is in no way necessary.
If "acme" has several flavors, options or optional features, then it is better to separate the auto-configuration as you can clearly express the fact some features are optional.
Besides, you have the ability to craft a starter that provides an opinion about those optional dependencies.
At the same time, others can rely only on the <code>autoconfigure</code> module and craft their own starter with different opinions.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果自动配置相对简单并且没有可选功能，那么在启动器中合并两个模块绝对是一种选择。</p>
<p translation-origin="off">If the auto-configuration is relatively straightforward and does not have optional feature, merging the two modules in the starter is definitely an option.</p>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.custom-starter.naming" translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter.naming"></a>9.5.1. 命名</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.custom-starter.naming"></a>9.5.1. Naming</h4>
<div class="paragraph">
<p translation-result="on">你应该确保为你的启动器提供适当的命名空间。不要以 <code>spring-boot</code> 开头你的模块名称，即使你使用不同的 Maven <code>groupId</code> 。我们将来可能会为你自动配置的内容提供官方支持。</p>
<p translation-origin="off">You should make sure to provide a proper namespace for your starter.
Do not start your module names with <code>spring-boot</code>, even if you use a different Maven <code>groupId</code>.
We may offer official support for the thing you auto-configure in the future.</p>
</div>
<div class="paragraph">
<p translation-result="on">根据经验，你应该在启动器之后命名组合模块。例如，假设你正在为“acme”创建一个启动器，并将自动配置模块命名为 <code>acme-spring-boot</code> 和启动器 <code>acme-spring-boot-starter</code> 。如果你只有一个模块将两者结合起来，请将其命名为 <code>acme-spring-boot-starter</code> 。</p>
<p translation-origin="off">As a rule of thumb, you should name a combined module after the starter.
For example, assume that you are creating a starter for "acme" and that you name the auto-configure module <code>acme-spring-boot</code> and the starter <code>acme-spring-boot-starter</code>.
If you only have one module that combines the two, name it <code>acme-spring-boot-starter</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.custom-starter.configuration-keys" translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter.configuration-keys"></a> 9.5.2.配置键</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.custom-starter.configuration-keys"></a>9.5.2. Configuration keys</h4>
<div class="paragraph">
<p translation-result="on">如果你的启动器提供配置键，请为它们使用唯一的命名空间。特别是，不要将你的键包含在 Spring Boot 使用的命名空间中（例如 <code>server</code> 、 <code>management</code> 、 <code>spring</code> 等）。如果你使用相同的命名空间，我们将来可能会以破坏你的模块的方式修改这些命名空间。根据经验，在所有键前面加上你拥有的命名空间（例如 <code>acme</code> ）。</p>
<p translation-origin="off">If your starter provides configuration keys, use a unique namespace for them.
In particular, do not include your keys in the namespaces that Spring Boot uses (such as <code>server</code>, <code>management</code>, <code>spring</code>, and so on).
If you use the same namespace, we may modify these namespaces in the future in ways that break your modules.
As a rule of thumb, prefix all your keys with a namespace that you own (for example <code>acme</code>).</p>
</div>
<div class="paragraph">
<p translation-result="on">确保通过为每个属性添加字段 javadoc 来记录配置键，如以下示例所示：</p>
<p translation-origin="off">Make sure that configuration keys are documented by adding field javadoc for each property, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="fold-block hide-when-folded">import java.time.Duration;

import org.springframework.boot.context.properties.ConfigurationProperties;

</span><span class="fold-block">@ConfigurationProperties("acme")
public class AcmeProperties {

    /**
     * Whether to check the location of acme resources.
     */
    private boolean checkLocation = true;

    /**
     * Timeout for establishing a connection to the acme server.
     */
    private Duration loginTimeout = Duration.ofSeconds(3);

</span><span class="fold-block hide-when-unfolded">    // getters/setters ...

</span><span class="fold-block hide-when-folded">    public boolean isCheckLocation() {
        return this.checkLocation;
    }

    public void setCheckLocation(boolean checkLocation) {
        this.checkLocation = checkLocation;
    }

    public Duration getLoginTimeout() {
        return this.loginTimeout;
    }

    public void setLoginTimeout(Duration loginTimeout) {
        this.loginTimeout = loginTimeout;
    }

</span><span class="fold-block">}
</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">你应该只使用带有 <code>@ConfigurationProperties</code> 字段 Javadoc 的纯文本，因为它们在添加到 JSON 之前不会被处理。</p>
<p translation-origin="off">You should only use plain text with <code>@ConfigurationProperties</code> field Javadoc, since they are not processed before being added to the JSON.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">以下是我们在内部遵循的一些规则，以确保描述一致：</p>
<p translation-origin="off">Here are some rules we follow internally to make sure descriptions are consistent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p translation-result="on">不要以“The”或“A”开始描述。</p>
<p translation-origin="off">Do not start the description by "The" or "A".</p>
</li>
<li>
<p translation-result="on">对于 <code>boolean</code> 类型，以“是否”或“启用”开始描述。</p>
<p translation-origin="off">For <code>boolean</code> types, start the description with "Whether" or "Enable".</p>
</li>
<li>
<p translation-result="on">对于基于集合的类型，以“逗号分隔列表”开始描述</p>
<p translation-origin="off">For collection-based types, start the description with "Comma-separated list"</p>
</li>
<li>
<p translation-result="on">使用 <code>java.time.Duration</code> 而不是 <code>long</code> 并描述默认单位（如果它与毫秒不同），例如“如果未指定持续时间后缀，则将使用秒”。</p>
<p translation-origin="off">Use <code>java.time.Duration</code> rather than <code>long</code> and describe the default unit if it differs from milliseconds, such as "If a duration suffix is not specified, seconds will be used".</p>
</li>
<li>
<p translation-result="on">除非必须在运行时确定，否则不要在描述中提供默认值。</p>
<p translation-origin="off">Do not provide the default value in the description unless it has to be determined at runtime.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p translation-result="on">确保<a href="configuration-metadata.html#configuration-metadata.annotation-processor">触发元数据生成</a>，以便你的密钥也可以使用 IDE 帮助。你可能需要查看生成的元数据（ <code>META-INF/spring-configuration-metadata.json</code> ）以确保正确记录你的密钥。在兼容的 IDE 中使用你自己的启动器也是验证元数据质量的好主意。</p>
<p translation-origin="off">Make sure to <a href="configuration-metadata.html#configuration-metadata.annotation-processor">trigger meta-data generation</a> so that IDE assistance is available for your keys as well.
You may want to review the generated metadata (<code>META-INF/spring-configuration-metadata.json</code>) to make sure your keys are properly documented.
Using your own starter in a compatible IDE is also a good idea to validate that quality of the metadata.</p>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.custom-starter.autoconfigure-module" translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter.autoconfigure-module"></a> 9.5.3.  “自动配置”模块</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.custom-starter.autoconfigure-module"></a>9.5.3. The “autoconfigure” Module</h4>
<div class="paragraph">
<p translation-result="on"><code>autoconfigure</code> 模块包含开始使用库所需的一切。它还可能包含配置键定义（例如 <code>@ConfigurationProperties</code> ）和任何可用于进一步自定义组件初始化方式的回调接口。</p>
<p translation-origin="off">The <code>autoconfigure</code> module contains everything that is necessary to get started with the library.
It may also contain configuration key definitions (such as <code>@ConfigurationProperties</code>) and any callback interface that can be used to further customize how the components are initialized.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">你应该将库的依赖项标记为可选，以便你可以更轻松地在项目中包含 <code>autoconfigure</code> 模块。如果你这样做，则不会提供该库，并且默认情况下，Spring Boot 会退出。</p>
<p translation-origin="off">You should mark the dependencies to the library as optional so that you can include the <code>autoconfigure</code> module in your projects more easily.
If you do it that way, the library is not provided and, by default, Spring Boot backs off.</p>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 使用注释处理器来收集元数据文件（ <code>META-INF/spring-autoconfigure-metadata.properties</code> ）中的自动配置条件。如果该文件存在，它将用于急切地过滤不匹配的自动配置，这将缩短启动时间。建议在包含自动配置的模块中添加以下依赖项：</p>
<p translation-origin="off">Spring Boot uses an annotation processor to collect the conditions on auto-configurations in a metadata file (<code>META-INF/spring-autoconfigure-metadata.properties</code>).
If that file is present, it is used to eagerly filter auto-configurations that do not match, which will improve startup time.
It is recommended to add the following dependency in a module that contains auto-configurations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-autoconfigure-processor&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">如果你在应用程序中直接定义了自动配置，请确保配置 <code>spring-boot-maven-plugin</code> 以防止 <code>repackage</code> 目标将依赖项添加到 fat jar 中：</p>
<p translation-origin="off">If you have defined auto-configurations directly in your application, make sure to configure the <code>spring-boot-maven-plugin</code> to prevent the <code>repackage</code> goal from adding the dependency into the fat jar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;project&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;
                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                            &lt;artifactId&gt;spring-boot-autoconfigure-processor&lt;/artifactId&gt;
                        &lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">对于 Gradle 4.5 及更早版本，应在 <code>compileOnly</code> 配置中声明依赖项，如以下示例所示：</p>
<p translation-origin="off">With Gradle 4.5 and earlier, the dependency should be declared in the <code>compileOnly</code> configuration, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-gradle" data-lang="gradle">dependencies {
    compileOnly "org.springframework.boot:spring-boot-autoconfigure-processor"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">对于 Gradle 4.6 及更高版本，应在 <code>annotationProcessor</code> 配置中声明依赖项，如以下示例所示：</p>
<p translation-origin="off">With Gradle 4.6 and later, the dependency should be declared in the <code>annotationProcessor</code> configuration, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-gradle" data-lang="gradle">dependencies {
    annotationProcessor "org.springframework.boot:spring-boot-autoconfigure-processor"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.developing-auto-configuration.custom-starter.starter-module" translation-result="on"><a href="features.html#features.developing-auto-configuration.custom-starter.starter-module"></a> 9.5.4. 入门模块</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.developing-auto-configuration.custom-starter.starter-module"></a>9.5.4. Starter Module</h4>
<div class="paragraph">
<p translation-result="on">启动器实际上是一个空罐子。它的唯一目的是提供必要的依赖项以使用该库。你可以将其视为对入门所需内容的固执己见。</p>
<p translation-origin="off">The starter is really an empty jar.
Its only purpose is to provide the necessary dependencies to work with the library.
You can think of it as an opinionated view of what is required to get started.</p>
</div>
<div class="paragraph">
<p translation-result="on">不要对添加启动器的项目做出假设。如果你要自动配置的库通常需要其他启动器，请同时提及它们。如果可选依赖项的数量很高，则提供一组适当的<em>默认</em>依赖项可能会很困难，因为你应该避免包含对于库的典型使用而言不必要的依赖项。换句话说，你不应该包含可选依赖项。</p>
<p translation-origin="off">Do not make assumptions about the project in which your starter is added.
If the library you are auto-configuring typically requires other starters, mention them as well.
Providing a proper set of <em>default</em> dependencies may be hard if the number of optional dependencies is high, as you should avoid including dependencies that are unnecessary for a typical usage of the library.
In other words, you should not include optional dependencies.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<p translation-result="on">无论哪种方式，你的启动器都必须直接或间接引用核心 Spring Boot 启动器（ <code>spring-boot-starter</code> ）（如果你的启动器依赖于另一个启动器，则无需添加它）。如果仅使用你的自定义启动器创建项目，则 Spring Boot 的核心功能将因核心启动器的存在而受到尊重。</p>
<p translation-origin="off">Either way, your starter must reference the core Spring Boot starter (<code>spring-boot-starter</code>) directly or indirectly (there is no need to add it if your starter relies on another starter).
If a project is created with only your custom starter, Spring Boot’s core features will be honoured by the presence of the core starter.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.kotlin" translation-result="on"><a href="features.html#features.kotlin"></a>10. Kotlin 支持</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.kotlin"></a>10. Kotlin support</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on"><a href="https://kotlinlang.org">Kotlin</a> 是一种针对 JVM（和其他平台）的静态类型语言，它允许编写简洁优雅的代码，同时提供与用 Java 编写的现有库的<a href="https://kotlinlang.org/docs/reference/java-interop.html">互操作性</a>。</p>
<p translation-origin="off"><a href="https://kotlinlang.org">Kotlin</a> is a statically-typed language targeting the JVM (and other platforms) which allows writing concise and elegant code while providing <a href="https://kotlinlang.org/docs/reference/java-interop.html">interoperability</a> with existing libraries written in Java.</p>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 通过利用其他 Spring 项目（如 Spring Framework、Spring Data 和 Reactor）中的支持来提供 Kotlin 支持。有关更多信息，请参阅 <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/languages.html#kotlin">Spring Framework Kotlin 支持文档</a>。</p>
<p translation-origin="off">Spring Boot provides Kotlin support by leveraging the support in other Spring projects such as Spring Framework, Spring Data, and Reactor.
See the <a href="https://docs.spring.io/spring-framework/docs/5.3.15/reference/html/languages.html#kotlin">Spring Framework Kotlin support documentation</a> for more information.</p>
</div>
<div class="paragraph">
<p translation-result="on">开始使用 Spring Boot 和 Kotlin 的最简单方法是遵循<a href="https://spring.io/guides/tutorials/spring-boot-kotlin/">这个综合教程</a>。你可以使用 <a href="https://start.spring.io/#!language=kotlin">start.spring.io</a> 创建新的 Kotlin 项目。如果你需要支持，请随时加入 <a href="https://slack.kotlinlang.org/">Kotlin Slack</a> 的#spring 频道，或者在 <a href="https://stackoverflow.com/questions/tagged/spring+kotlin">Stack Overflow</a> 上提出有关 <code>spring</code> 和 <code>kotlin</code> 标签的问题。</p>
<p translation-origin="off">The easiest way to start with Spring Boot and Kotlin is to follow <a href="https://spring.io/guides/tutorials/spring-boot-kotlin/">this comprehensive tutorial</a>.
You can create new Kotlin projects by using <a href="https://start.spring.io/#!language=kotlin">start.spring.io</a>.
Feel free to join the #spring channel of <a href="https://slack.kotlinlang.org/">Kotlin Slack</a> or ask a question with the <code>spring</code> and <code>kotlin</code> tags on <a href="https://stackoverflow.com/questions/tagged/spring+kotlin">Stack Overflow</a> if you need support.</p>
</div>
<div class="sect2">
<h3 id="features.kotlin.requirements" translation-result="on"><a href="features.html#features.kotlin.requirements"></a>10.1. 要求</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.requirements"></a>10.1. Requirements</h3>
<div class="paragraph">
<p translation-result="on">Spring Boot 至少需要 Kotlin 1.3.x，并通过依赖管理来管理合适的 Kotlin 版本。要使用 Kotlin，类路径中必须存在 <code>org.jetbrains.kotlin:kotlin-stdlib</code> 和 <code>org.jetbrains.kotlin:kotlin-reflect</code> 。也可以使用 <code>kotlin-stdlib</code> 变体 <code>kotlin-stdlib-jdk7</code> 和 <code>kotlin-stdlib-jdk8</code> 。</p>
<p translation-origin="off">Spring Boot requires at least Kotlin 1.3.x and manages a suitable Kotlin version through dependency management.
To use Kotlin, <code>org.jetbrains.kotlin:kotlin-stdlib</code> and <code>org.jetbrains.kotlin:kotlin-reflect</code> must be present on the classpath.
The <code>kotlin-stdlib</code> variants <code>kotlin-stdlib-jdk7</code> and <code>kotlin-stdlib-jdk8</code> can also be used.</p>
</div>
<div class="paragraph">
<p translation-result="on">由于 <a href="https://discuss.kotlinlang.org/t/classes-final-by-default/166">Kotlin 类默认为 final</a> ，你可能需要配置 <a href="https://kotlinlang.org/docs/reference/compiler-plugins.html#spring-support">kotlin-spring</a> 插件以自动打开带有 Spring 注释的类，以便它们可以被代理。</p>
<p translation-origin="off">Since <a href="https://discuss.kotlinlang.org/t/classes-final-by-default/166">Kotlin classes are final by default</a>, you are likely to want to configure <a href="https://kotlinlang.org/docs/reference/compiler-plugins.html#spring-support">kotlin-spring</a> plugin in order to automatically open Spring-annotated classes so that they can be proxied.</p>
</div>
<div class="paragraph">
<p translation-result="on">在 Kotlin 中序列化/反序列化 JSON 数据需要 <a href="https://github.com/FasterXML/jackson-module-kotlin">Jackson 的 Kotlin 模块</a>。在类路径中找到它时会自动注册。如果 Jackson 和 Kotlin 存在但 Jackson Kotlin 模块不存在，则会记录一条警告消息。</p>
<p translation-origin="off"><a href="https://github.com/FasterXML/jackson-module-kotlin">Jackson’s Kotlin module</a> is required for serializing / deserializing JSON data in Kotlin.
It is automatically registered when found on the classpath.
A warning message is logged if Jackson and Kotlin are present but the Jackson Kotlin module is not.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">如果在 <a href="https://start.spring.io/#!language=kotlin">start.spring.io</a> 上引导 Kotlin 项目，则默认提供这些依赖项和插件。</p>
<p translation-origin="off">These dependencies and plugins are provided by default if one bootstraps a Kotlin project on <a href="https://start.spring.io/#!language=kotlin">start.spring.io</a>.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.kotlin.null-safety" translation-result="on"><a href="features.html#features.kotlin.null-safety"></a>10.2. 零安全</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.null-safety"></a>10.2. Null-safety</h3>
<div class="paragraph">
<p translation-result="on">Kotlin 的主要功能之一是 <a href="https://kotlinlang.org/docs/reference/null-safety.html">null-safety</a> 。它在编译时处理 <code>null</code> 值，而不是将问题推迟到运行时并遇到 <code>NullPointerException</code> 。这有助于消除常见的错误来源，而无需支付像 <code>Optional</code> 这样的包装器的成本。Kotlin 还允许使用具有可为空值的函数构造，如本 <a href="https://www.baeldung.com/kotlin-null-safety">Kotlin 中空安全综合指南中</a>所述。</p>
<p translation-origin="off">One of Kotlin’s key features is <a href="https://kotlinlang.org/docs/reference/null-safety.html">null-safety</a>.
It deals with <code>null</code> values at compile time rather than deferring the problem to runtime and encountering a <code>NullPointerException</code>.
This helps to eliminate a common source of bugs without paying the cost of wrappers like <code>Optional</code>.
Kotlin also allows using functional constructs with nullable values as described in this <a href="https://www.baeldung.com/kotlin-null-safety">comprehensive guide to null-safety in Kotlin</a>.</p>
</div>
<div class="paragraph">
<p translation-result="on">尽管 Java 不允许在其类型系统中表达 null 安全性，但 Spring Framework、Spring Data 和 Reactor 现在通过工具友好的注解为其 API 提供 null 安全性。默认情况下，Kotlin 中使用的 Java API 的类型被识别为放宽空检查的<a href="https://kotlinlang.org/docs/reference/java-interop.html#null-safety-and-platform-types">平台类型</a>。<a href="https://kotlinlang.org/docs/reference/java-interop.html#jsr-305-support">Kotlin 对 JSR 305 注释和可空性注释的支持为 Kotlin</a> 中的相关 Spring API 提供了空值安全性。</p>
<p translation-origin="off">Although Java does not allow one to express null-safety in its type system, Spring Framework, Spring Data, and Reactor now provide null-safety of their API through tooling-friendly annotations.
By default, types from Java APIs used in Kotlin are recognized as <a href="https://kotlinlang.org/docs/reference/java-interop.html#null-safety-and-platform-types">platform types</a> for which null-checks are relaxed.
<a href="https://kotlinlang.org/docs/reference/java-interop.html#jsr-305-support">Kotlin’s support for JSR 305 annotations</a> combined with nullability annotations provide null-safety for the related Spring API in Kotlin.</p>
</div>
<div class="paragraph">
<p translation-result="on">JSR 305 检查可以通过添加带有以下选项的 <code>-Xjsr305</code> 编译器标志来配置： <code>-Xjsr305={strict|warn|ignore}</code> 。默认行为与 <code>-Xjsr305=warn</code> 相同。在从 Spring API 推断出的 Kotlin 类型中需要考虑 null 安全性，但应在知道 Spring API 可空性声明甚至在次要版本之间演变并且将来可能会添加更多检查的情况下使用该 <code>strict</code> 值。</p>
<p translation-origin="off">The JSR 305 checks can be configured by adding the <code>-Xjsr305</code> compiler flag with the following options: <code>-Xjsr305={strict|warn|ignore}</code>.
The default behavior is the same as <code>-Xjsr305=warn</code>.
The <code>strict</code> value is required to have null-safety taken in account in Kotlin types inferred from Spring API but should be used with the knowledge that Spring API nullability declaration could evolve even between minor releases and more checks may be added in the future).</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<p translation-result="on">尚不支持泛型类型参数、可变参数和数组元素可空性。有关最新信息，请参阅 <a href="https://jira.spring.io/browse/SPR-15942">SPR-15942</a> 。另请注意，Spring Boot 自己的 API<a href="https://github.com/spring-projects/spring-boot/issues/10712">尚未注释</a>。</p>
<p translation-origin="off">Generic type arguments, varargs and array elements nullability are not yet supported.
See <a href="https://jira.spring.io/browse/SPR-15942">SPR-15942</a> for up-to-date information.
Also be aware that Spring Boot’s own API is <a href="https://github.com/spring-projects/spring-boot/issues/10712">not yet annotated</a>.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.kotlin.api" translation-result="on"><a href="features.html#features.kotlin.api"></a>10.3. Kotlin API</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.api"></a>10.3. Kotlin API</h3>
<div class="sect3">
<h4 id="features.kotlin.api.run-application" translation-result="on"><a href="features.html#features.kotlin.api.run-application"></a>10.3.1. 运行应用程序</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.api.run-application"></a>10.3.1. runApplication</h4>
<div class="paragraph">
<p translation-result="on">Spring Boot 提供了一种使用 <code>runApplication&lt;MyApplication&gt;(*args)</code> 运行应用程序的惯用方式，如下例所示：</p>
<p translation-origin="off">Spring Boot provides an idiomatic way to run an application with <code>runApplication&lt;MyApplication&gt;(*args)</code> as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">import org.springframework.boot.autoconfigure.SpringBootApplication
import org.springframework.boot.runApplication

@SpringBootApplication
class MyApplication

fun main(args: Array&lt;String&gt;) {
    runApplication&lt;MyApplication&gt;(*args)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p translation-result="on">这是 <code>SpringApplication.run(MyApplication::class.java, *args)</code> 的替代品。它还允许自定义应用程序，如以下示例所示：</p>
<p translation-origin="off">This is a drop-in replacement for <code>SpringApplication.run(MyApplication::class.java, *args)</code>.
It also allows customization of the application as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">runApplication&lt;MyApplication&gt;(*args) {
    setBannerMode(OFF)
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="features.kotlin.api.extensions" translation-result="on"><a href="features.html#features.kotlin.api.extensions"></a>10.3.2. 扩展</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.api.extensions"></a>10.3.2. Extensions</h4>
<div class="paragraph">
<p translation-result="on">Kotlin<a href="https://kotlinlang.org/docs/reference/extensions.html">扩展</a>提供了使用附加功能扩展现有类的能力。Spring Boot Kotlin API 利用这些扩展为现有 API 添加新的 Kotlin 特定便利。</p>
<p translation-origin="off">Kotlin <a href="https://kotlinlang.org/docs/reference/extensions.html">extensions</a> provide the ability to extend existing classes with additional functionality.
The Spring Boot Kotlin API makes use of these extensions to add new Kotlin specific conveniences to existing APIs.</p>
</div>
<div class="paragraph">
<p translation-result="on">提供 <code>TestRestTemplate</code> 扩展，类似于 Spring Framework 为 Spring Framework 中的 <code>RestOperations</code> 提供的扩展。除其他外，这些扩展使利用 Kotlin 实体化类型参数成为可能。</p>
<p translation-origin="off"><code>TestRestTemplate</code> extensions, similar to those provided by Spring Framework for <code>RestOperations</code> in Spring Framework, are provided.
Among other things, the extensions make it possible to take advantage of Kotlin reified type parameters.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features.kotlin.dependency-management" translation-result="on"><a href="features.html#features.kotlin.dependency-management"></a>10.4. 依赖管理</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.dependency-management"></a>10.4. Dependency management</h3>
<div class="paragraph">
<p translation-result="on">为了避免在类路径上混合不同版本的 Kotlin 依赖项，Spring Boot 导入了 Kotlin BOM。</p>
<p translation-origin="off">In order to avoid mixing different versions of Kotlin dependencies on the classpath, Spring Boot imports the Kotlin BOM.</p>
</div>
<div class="paragraph">
<p translation-result="on">使用 Maven，可以通过设置 <code>kotlin.version</code> 属性来自定义 Kotlin 版本，并为 <code>kotlin-maven-plugin</code> 提供插件管理。使用 Gradle，Spring Boot 插件会自动将 <code>kotlin.version</code> 与 Kotlin 插件的版本对齐。</p>
<p translation-origin="off">With Maven, the Kotlin version can be customized by setting the <code>kotlin.version</code> property and plugin management is provided for <code>kotlin-maven-plugin</code>.
With Gradle, the Spring Boot plugin automatically aligns the <code>kotlin.version</code> with the version of the Kotlin plugin.</p>
</div>
<div class="paragraph">
<p translation-result="on">Spring Boot 还通过导入 Kotlin Coroutines BOM 来管理 Coroutines 依赖项的版本。可以通过设置 <code>kotlin-coroutines.version</code> 属性来自定义版本。</p>
<p translation-origin="off">Spring Boot also manages the version of Coroutines dependencies by importing the Kotlin Coroutines BOM.
The version can be customized by setting the <code>kotlin-coroutines.version</code> property.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on"><code>org.jetbrains.kotlinx:kotlinx-coroutines-reactor</code> 依赖是默认提供的，如果一个 Kotlin 项目至少有一个对 <a href="https://start.spring.io/#!language=kotlin">start.spring.io</a> 的响应式依赖。</p>
<p translation-origin="off"><code>org.jetbrains.kotlinx:kotlinx-coroutines-reactor</code> dependency is provided by default if one bootstraps a Kotlin project with at least one reactive dependency on <a href="https://start.spring.io/#!language=kotlin">start.spring.io</a>.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.kotlin.configuration-properties" translation-result="on"><a href="features.html#features.kotlin.configuration-properties"></a>10.5.@ConfigurationProperties</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.configuration-properties"></a>10.5. @ConfigurationProperties</h3>
<div class="paragraph">
<p translation-result="on"><code>@ConfigurationProperties</code> 与<a href="features.html#features.external-config.typesafe-configuration-properties.constructor-binding"><code>@ConstructorBinding</code></a>结合使用时支持具有不可变 <code>val</code> 属性的类，如下例所示：</p>
<p translation-origin="off"><code>@ConfigurationProperties</code> when used in combination with <a href="features.html#features.external-config.typesafe-configuration-properties.constructor-binding"><code>@ConstructorBinding</code></a> supports classes with immutable <code>val</code> properties as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">@ConstructorBinding
@ConfigurationProperties("example.kotlin")
data class KotlinExampleProperties(
        val name: String,
        val description: String,
        val myService: MyService) {

    data class MyService(
            val apiToken: String,
            val uri: URI
    )
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="提示"></i>
</td>
<td class="content">
<p translation-result="on">要使用注释处理器生成<a href="configuration-metadata.html#configuration-metadata.annotation-processor">你自己的元数据</a>，<a href="https://kotlinlang.org/docs/reference/kapt.html"><code>kapt</code></a>使用 <code>spring-boot-configuration-processor</code> 依赖项配置 kapt。请注意，由于 kapt 提供的模型的限制，某些功能（例如检测默认值或不推荐使用的项目）无法正常工作。</p>
<p translation-origin="off">To generate <a href="configuration-metadata.html#configuration-metadata.annotation-processor">your own metadata</a> using the annotation processor, <a href="https://kotlinlang.org/docs/reference/kapt.html"><code>kapt</code> should be configured</a> with the <code>spring-boot-configuration-processor</code> dependency.
Note that some features (such as detecting the default value or deprecated items) are not working due to limitations in the model kapt provides.</p>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="features.kotlin.testing" translation-result="on"><a href="features.html#features.kotlin.testing"></a>10.6. 测试</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.testing"></a>10.6. Testing</h3>
<div class="paragraph">
<p translation-result="on">虽然可以使用 JUnit 4 来测试 Kotlin 代码，但 JUnit 5 默认提供并推荐使用。JUnit 5 允许一个测试类被实例化一次，并被重用于该类的所有测试。这使得在非静态方法上使用 <code>@BeforeAll</code> 和 <code>@AfterAll</code> 注释成为可能，这非常适合 Kotlin。</p>
<p translation-origin="off">While it is possible to use JUnit 4 to test Kotlin code, JUnit 5 is provided by default and is recommended.
JUnit 5 enables a test class to be instantiated once and reused for all of the class’s tests.
This makes it possible to use <code>@BeforeAll</code> and <code>@AfterAll</code> annotations on non-static methods, which is a good fit for Kotlin.</p>
</div>
<div class="paragraph">
<p translation-result="on">要模拟 Kotlin 类，建议使用 <a href="https://mockk.io/">MockK</a> 。如果你需要与 <code>Mockk</code> 特定的<a href="features.html#features.testing.spring-boot-applications.mocking-beans"><code>@MockBean</code> 和 <code>@SpyBean</code> 注释</a>等效的 <a href="https://github.com/Ninja-Squad/springmockk">Mockk</a> ，则可以使用提供类似 <code>@MockkBean</code> 和 <code>@SpykBean</code> 注释的 SpringMockK。</p>
<p translation-origin="off">To mock Kotlin classes, <a href="https://mockk.io/">MockK</a> is recommended.
If you need the <code>Mockk</code> equivalent of the Mockito specific <a href="features.html#features.testing.spring-boot-applications.mocking-beans"><code>@MockBean</code> and <code>@SpyBean</code> annotations</a>, you can use <a href="https://github.com/Ninja-Squad/springmockk">SpringMockK</a> which provides similar <code>@MockkBean</code> and <code>@SpykBean</code> annotations.</p>
</div>
</div>
<div class="sect2">
<h3 id="features.kotlin.resources" translation-result="on"><a href="features.html#features.kotlin.resources"></a>10.7. 资源</h3>
<h3 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.resources"></a>10.7. Resources</h3>
<div class="sect3">
<h4 id="features.kotlin.resources.further-reading" translation-result="on"><a href="features.html#features.kotlin.resources.further-reading"></a>10.7.1. 进一步阅读</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.resources.further-reading"></a>10.7.1. Further reading</h4>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><a href="https://kotlinlang.org/docs/reference/">Kotlin 语言参考</a></p>
<p translation-origin="off"><a href="https://kotlinlang.org/docs/reference/">Kotlin language reference</a></p>
</li>
<li>
<p translation-result="on"><a href="https://kotlinlang.slack.com/">Kotlin Slack</a> （带有专用的#spring 频道）</p>
<p translation-origin="off"><a href="https://kotlinlang.slack.com/">Kotlin Slack</a> (with a dedicated #spring channel)</p>
</li>
<li>
<p translation-result="on"><a href="https://stackoverflow.com/questions/tagged/spring+kotlin">带有 <code>spring</code> 和 <code>kotlin</code> 标签的 Stackoverflow</a></p>
<p translation-origin="off"><a href="https://stackoverflow.com/questions/tagged/spring+kotlin">Stackoverflow with <code>spring</code> and <code>kotlin</code> tags</a></p>
</li>
<li>
<p translation-result="on"><a href="https://try.kotlinlang.org/">在浏览器中试用 Kotlin</a></p>
<p translation-origin="off"><a href="https://try.kotlinlang.org/">Try Kotlin in your browser</a></p>
</li>
<li>
<p translation-result="on"><a href="https://blog.jetbrains.com/kotlin/">科特林博客</a></p>
<p translation-origin="off"><a href="https://blog.jetbrains.com/kotlin/">Kotlin blog</a></p>
</li>
<li>
<p translation-result="on"><a href="https://kotlin.link/">很棒的科特林</a></p>
<p translation-origin="off"><a href="https://kotlin.link/">Awesome Kotlin</a></p>
</li>
<li>
<p translation-result="on"><a href="https://spring.io/guides/tutorials/spring-boot-kotlin/">教程：使用 Spring Boot 和 Kotlin 构建 Web 应用程序</a></p>
<p translation-origin="off"><a href="https://spring.io/guides/tutorials/spring-boot-kotlin/">Tutorial: building web applications with Spring Boot and Kotlin</a></p>
</li>
<li>
<p translation-result="on"><a href="https://spring.io/blog/2016/02/15/developing-spring-boot-applications-with-kotlin">使用 Kotlin 开发 Spring Boot 应用程序</a></p>
<p translation-origin="off"><a href="https://spring.io/blog/2016/02/15/developing-spring-boot-applications-with-kotlin">Developing Spring Boot applications with Kotlin</a></p>
</li>
<li>
<p translation-result="on"><a href="https://spring.io/blog/2016/03/20/a-geospatial-messenger-with-kotlin-spring-boot-and-postgresql">带有 Kotlin、Spring Boot 和 PostgreSQL 的地理空间信使</a></p>
<p translation-origin="off"><a href="https://spring.io/blog/2016/03/20/a-geospatial-messenger-with-kotlin-spring-boot-and-postgresql">A Geospatial Messenger with Kotlin, Spring Boot and PostgreSQL</a></p>
</li>
<li>
<p translation-result="on"><a href="https://spring.io/blog/2017/01/04/introducing-kotlin-support-in-spring-framework-5-0">在 Spring Framework 5.0 中引入 Kotlin 支持</a></p>
<p translation-origin="off"><a href="https://spring.io/blog/2017/01/04/introducing-kotlin-support-in-spring-framework-5-0">Introducing Kotlin support in Spring Framework 5.0</a></p>
</li>
<li>
<p translation-result="on"><a href="https://spring.io/blog/2017/08/01/spring-framework-5-kotlin-apis-the-functional-way">Spring Framework 5 Kotlin API，函数式方式</a></p>
<p translation-origin="off"><a href="https://spring.io/blog/2017/08/01/spring-framework-5-kotlin-apis-the-functional-way">Spring Framework 5 Kotlin APIs, the functional way</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="features.kotlin.resources.examples" translation-result="on"><a href="features.html#features.kotlin.resources.examples"></a>10.7.2. 例子</h4>
<h4 translation-origin="off"><a class="anchor" href="features.html#features.kotlin.resources.examples"></a>10.7.2. Examples</h4>
<div class="ulist">
<ul>
<li>
<p translation-result="on"><a href="https://github.com/sdeleuze/spring-boot-kotlin-demo">spring-boot-kotlin-demo</a> ：常规 Spring Boot + Spring Data JPA 项目</p>
<p translation-origin="off"><a href="https://github.com/sdeleuze/spring-boot-kotlin-demo">spring-boot-kotlin-demo</a>: regular Spring Boot + Spring Data JPA project</p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/mixitconf/mixit">mixit</a> ：Spring Boot 2 + WebFlux + Reactive Spring Data MongoDB</p>
<p translation-origin="off"><a href="https://github.com/mixitconf/mixit">mixit</a>: Spring Boot 2 + WebFlux + Reactive Spring Data MongoDB</p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/sdeleuze/spring-kotlin-fullstack">spring-kotlin-fullstack</a> ：WebFlux Kotlin fullstack 示例，前端使用 Kotlin2js 而不是 JavaScript 或 TypeScript</p>
<p translation-origin="off"><a href="https://github.com/sdeleuze/spring-kotlin-fullstack">spring-kotlin-fullstack</a>: WebFlux Kotlin fullstack example with Kotlin2js for frontend instead of JavaScript or TypeScript</p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/spring-petclinic/spring-petclinic-kotlin">spring-petclinic-kotlin</a> ：Spring PetClinic 示例应用程序的 Kotlin 版本</p>
<p translation-origin="off"><a href="https://github.com/spring-petclinic/spring-petclinic-kotlin">spring-petclinic-kotlin</a>: Kotlin version of the Spring PetClinic Sample Application</p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/sdeleuze/spring-kotlin-deepdive">spring-kotlin-deepdive</a> ：从 Boot 1.0 + Java 到 Boot 2.0 + Kotlin 的逐步迁移</p>
<p translation-origin="off"><a href="https://github.com/sdeleuze/spring-kotlin-deepdive">spring-kotlin-deepdive</a>: a step by step migration for Boot 1.0 + Java to Boot 2.0 + Kotlin</p>
</li>
<li>
<p translation-result="on"><a href="https://github.com/sdeleuze/spring-boot-coroutines-demo">spring-boot-coroutines-demo</a> : 协程示例项目</p>
<p translation-origin="off"><a href="https://github.com/sdeleuze/spring-boot-coroutines-demo">spring-boot-coroutines-demo</a>: Coroutines sample project</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features.whats-next" translation-result="on"><a href="features.html#features.whats-next"></a>11. 接下来要读什么</h2>
<h2 translation-origin="off"><a class="anchor" href="features.html#features.whats-next"></a>11. What to Read Next</h2>
<div class="sectionbody">
<div class="paragraph">
<p translation-result="on">如果你想了解有关本节中讨论的任何类的更多信息，请参阅 <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/">Spring Boot API 文档</a>，或者你可以<a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3">直接浏览源代码</a>。如果你有具体问题，请参阅<a href="howto.html#howto">操作方法</a>部分。</p>
<p translation-origin="off">If you want to learn more about any of the classes discussed in this section, see the <a href="https://docs.spring.io/spring-boot/docs/2.6.3/api/">Spring Boot API documentation</a> or you can browse the <a href="https://github.com/spring-projects/spring-boot/tree/v2.6.3">source code directly</a>.
If you have specific questions, see the <a href="howto.html#howto">how-to</a> section.</p>
</div>
<div class="paragraph">
<p translation-result="on">如果你对 Spring Boot 的核心功能感到满意，你可以继续阅读有关<a href="actuator.html#actuator">生产就绪功能的</a>信息。</p>
<p translation-origin="off">If you are comfortable with Spring Boot’s core features, you can continue on and read about <a href="actuator.html#actuator">production-ready features</a>.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
最后更新于 2022-01-20 14:11:26 UTC
</div>
</div>
</div>
</div>
</div>
<script data-cfasync="false" src="../../../../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>if (window.parent == window) {(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-2728886-23', 'auto', {'siteSpeedSampleRate': 100});ga('send', 'pageview');}</script><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js/v652eace1692a40cfa3763df669d7439c1639079717194" integrity="sha512-Gi7xpJR8tSkrpF7aordPZQlW2DLtzUlZcumS8dMQjwDHEnw9I7ZLyiOj/6tZStRBGtGgN6ceN6cMH8z7etPGlw==" data-cf-beacon="{&quot;rayId&quot;:&quot;6d1fde7758007c65&quot;,&quot;token&quot;:&quot;bffcb8a918ae4755926f76178bfbd26b&quot;,&quot;version&quot;:&quot;2021.12.0&quot;,&quot;si&quot;:100}" crossorigin="anonymous"></script>




</body></html>

